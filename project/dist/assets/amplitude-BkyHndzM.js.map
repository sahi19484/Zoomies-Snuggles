{"version":3,"file":"amplitude-BkyHndzM.js","sources":["../../node_modules/tslib/tslib.es6.mjs","../../node_modules/@amplitude/analytics-types/lib/esm/event.js","../../node_modules/@amplitude/analytics-types/lib/esm/logger.js","../../node_modules/@amplitude/analytics-types/lib/esm/plugin.js","../../node_modules/@amplitude/analytics-types/lib/esm/server-zone.js","../../node_modules/@amplitude/analytics-types/lib/esm/status.js","../../node_modules/@amplitude/analytics-types/lib/esm/transport.js","../../node_modules/@amplitude/analytics-core/lib/esm/constants.js","../../node_modules/@amplitude/analytics-core/lib/esm/utils/valid-properties.js","../../node_modules/@amplitude/analytics-core/lib/esm/identify.js","../../node_modules/@amplitude/analytics-core/lib/esm/utils/event-builder.js","../../node_modules/@amplitude/analytics-core/lib/esm/utils/result-builder.js","../../node_modules/@amplitude/analytics-core/lib/esm/timeline.js","../../node_modules/@amplitude/analytics-core/lib/esm/messages.js","../../node_modules/@amplitude/analytics-core/lib/esm/utils/return-wrapper.js","../../node_modules/@amplitude/analytics-core/lib/esm/core-client.js","../../node_modules/@amplitude/analytics-core/lib/esm/revenue.js","../../node_modules/@amplitude/analytics-core/lib/esm/utils/chunk.js","../../node_modules/@amplitude/analytics-core/lib/esm/logger.js","../../node_modules/@amplitude/analytics-core/lib/esm/config.js","../../node_modules/@amplitude/analytics-core/lib/esm/plugins/destination.js","../../node_modules/@amplitude/analytics-core/lib/esm/utils/debug.js","../../node_modules/@amplitude/analytics-core/lib/esm/utils/uuid.js","../../node_modules/@amplitude/analytics-core/lib/esm/storage/memory.js","../../node_modules/@amplitude/analytics-core/lib/esm/transports/base.js","../../node_modules/@amplitude/analytics-connector/dist/analytics-connector.esm.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/analytics-connector.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/global-scope.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/query-params.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/attribution/constants.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/attribution/campaign-parser.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/cookie-name.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/default-tracking.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/language.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/plugins/identity.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/storage/cookie.js","../../node_modules/@amplitude/analytics-client-common/lib/esm/transports/fetch.js","../../node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/utils.js","../../node_modules/@amplitude/plugin-page-view-tracking-browser/lib/esm/page-view-tracking.js","../../node_modules/@amplitude/plugin-web-attribution-browser/lib/esm/helpers.js","../../node_modules/@amplitude/plugin-web-attribution-browser/lib/esm/web-attribution.js","../../node_modules/@amplitude/analytics-browser/lib/esm/storage/local-storage.js","../../node_modules/@amplitude/analytics-browser/lib/esm/transports/xhr.js","../../node_modules/@amplitude/analytics-browser/lib/esm/transports/send-beacon.js","../../node_modules/@amplitude/analytics-browser/lib/esm/version.js","../../node_modules/@amplitude/analytics-browser/lib/esm/config.js","../../node_modules/@amplitude/analytics-browser/lib/esm/constants.js","../../node_modules/@amplitude/analytics-browser/lib/esm/cookie-migration/index.js","../../node_modules/@amplitude/ua-parser-js/src/ua-parser.js","../../node_modules/@amplitude/analytics-browser/lib/esm/plugins/context.js","../../node_modules/@amplitude/analytics-browser/lib/esm/plugins/default-page-view-event-enrichment.js","../../node_modules/@amplitude/analytics-browser/lib/esm/plugins/file-download-tracking.js","../../node_modules/@amplitude/analytics-browser/lib/esm/plugins/form-interaction-tracking.js","../../node_modules/@amplitude/analytics-browser/lib/esm/utils/snippet-helper.js","../../node_modules/@amplitude/analytics-browser/lib/esm/browser-client.js","../../node_modules/@amplitude/analytics-browser/lib/esm/browser-client-factory.js","../../node_modules/@amplitude/analytics-browser/lib/esm/index.js","../../src/services/amplitude.ts"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","export var IdentifyOperation;\n(function (IdentifyOperation) {\n    // Base Operations to set values\n    IdentifyOperation[\"SET\"] = \"$set\";\n    IdentifyOperation[\"SET_ONCE\"] = \"$setOnce\";\n    // Operations around modifying existing values\n    IdentifyOperation[\"ADD\"] = \"$add\";\n    IdentifyOperation[\"APPEND\"] = \"$append\";\n    IdentifyOperation[\"PREPEND\"] = \"$prepend\";\n    IdentifyOperation[\"REMOVE\"] = \"$remove\";\n    // Operations around appending values *if* they aren't present\n    IdentifyOperation[\"PREINSERT\"] = \"$preInsert\";\n    IdentifyOperation[\"POSTINSERT\"] = \"$postInsert\";\n    // Operations around removing properties/values\n    IdentifyOperation[\"UNSET\"] = \"$unset\";\n    IdentifyOperation[\"CLEAR_ALL\"] = \"$clearAll\";\n})(IdentifyOperation || (IdentifyOperation = {}));\nexport var RevenueProperty;\n(function (RevenueProperty) {\n    RevenueProperty[\"REVENUE_PRODUCT_ID\"] = \"$productId\";\n    RevenueProperty[\"REVENUE_QUANTITY\"] = \"$quantity\";\n    RevenueProperty[\"REVENUE_PRICE\"] = \"$price\";\n    RevenueProperty[\"REVENUE_TYPE\"] = \"$revenueType\";\n    RevenueProperty[\"REVENUE_CURRENCY\"] = \"$currency\";\n    RevenueProperty[\"REVENUE\"] = \"$revenue\";\n})(RevenueProperty || (RevenueProperty = {}));\n/**\n * Strings that have special meaning when used as an event's type\n * and have different specifications.\n */\nexport var SpecialEventType;\n(function (SpecialEventType) {\n    SpecialEventType[\"IDENTIFY\"] = \"$identify\";\n    SpecialEventType[\"GROUP_IDENTIFY\"] = \"$groupidentify\";\n    SpecialEventType[\"REVENUE\"] = \"revenue_amount\";\n})(SpecialEventType || (SpecialEventType = {}));\n//# sourceMappingURL=event.js.map","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"None\"] = 0] = \"None\";\n    LogLevel[LogLevel[\"Error\"] = 1] = \"Error\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Verbose\"] = 3] = \"Verbose\";\n    LogLevel[LogLevel[\"Debug\"] = 4] = \"Debug\";\n})(LogLevel || (LogLevel = {}));\n//# sourceMappingURL=logger.js.map","export var PluginType;\n(function (PluginType) {\n    PluginType[\"BEFORE\"] = \"before\";\n    PluginType[\"ENRICHMENT\"] = \"enrichment\";\n    PluginType[\"DESTINATION\"] = \"destination\";\n})(PluginType || (PluginType = {}));\n//# sourceMappingURL=plugin.js.map","export var ServerZone;\n(function (ServerZone) {\n    ServerZone[\"US\"] = \"US\";\n    ServerZone[\"EU\"] = \"EU\";\n    ServerZone[\"STAGING\"] = \"STAGING\";\n})(ServerZone || (ServerZone = {}));\n//# sourceMappingURL=server-zone.js.map","/** The status of an event. */\nexport var Status;\n(function (Status) {\n    /** The status could not be determined. */\n    Status[\"Unknown\"] = \"unknown\";\n    /** The event was skipped due to configuration or callbacks. */\n    Status[\"Skipped\"] = \"skipped\";\n    /** The event was sent successfully. */\n    Status[\"Success\"] = \"success\";\n    /** A user or device in the payload is currently rate limited and should try again later. */\n    Status[\"RateLimit\"] = \"rate_limit\";\n    /** The sent payload was too large to be processed. */\n    Status[\"PayloadTooLarge\"] = \"payload_too_large\";\n    /** The event could not be processed. */\n    Status[\"Invalid\"] = \"invalid\";\n    /** A server-side error ocurred during submission. */\n    Status[\"Failed\"] = \"failed\";\n    /** a server or client side error occuring when a request takes too long and is cancelled */\n    Status[\"Timeout\"] = \"Timeout\";\n    /** NodeJS runtime environment error.. E.g. disconnected from network */\n    Status[\"SystemError\"] = \"SystemError\";\n})(Status || (Status = {}));\n//# sourceMappingURL=status.js.map","export var TransportType;\n(function (TransportType) {\n    TransportType[\"XHR\"] = \"xhr\";\n    TransportType[\"SendBeacon\"] = \"beacon\";\n    TransportType[\"Fetch\"] = \"fetch\";\n})(TransportType || (TransportType = {}));\n//# sourceMappingURL=transport.js.map","export var UNSET_VALUE = '-';\nexport var AMPLITUDE_PREFIX = 'AMP';\nexport var STORAGE_PREFIX = \"\".concat(AMPLITUDE_PREFIX, \"_unsent\");\nexport var AMPLITUDE_SERVER_URL = 'https://api2.amplitude.com/2/httpapi';\nexport var EU_AMPLITUDE_SERVER_URL = 'https://api.eu.amplitude.com/2/httpapi';\nexport var AMPLITUDE_BATCH_SERVER_URL = 'https://api2.amplitude.com/batch';\nexport var EU_AMPLITUDE_BATCH_SERVER_URL = 'https://api.eu.amplitude.com/batch';\n//# sourceMappingURL=constants.js.map","import { __values } from \"tslib\";\nvar MAX_PROPERTY_KEYS = 1000;\nexport var isValidObject = function (properties) {\n    if (Object.keys(properties).length > MAX_PROPERTY_KEYS) {\n        return false;\n    }\n    for (var key in properties) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        var value = properties[key];\n        if (!isValidProperties(key, value))\n            return false;\n    }\n    return true;\n};\nexport var isValidProperties = function (property, value) {\n    var e_1, _a;\n    if (typeof property !== 'string')\n        return false;\n    if (Array.isArray(value)) {\n        var isValid = true;\n        try {\n            for (var value_1 = __values(value), value_1_1 = value_1.next(); !value_1_1.done; value_1_1 = value_1.next()) {\n                var valueElement = value_1_1.value;\n                if (Array.isArray(valueElement)) {\n                    return false;\n                }\n                else if (typeof valueElement === 'object') {\n                    isValid = isValid && isValidObject(valueElement);\n                }\n                else if (!['number', 'string'].includes(typeof valueElement)) {\n                    return false;\n                }\n                if (!isValid) {\n                    return false;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (value_1_1 && !value_1_1.done && (_a = value_1.return)) _a.call(value_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    else if (value === null || value === undefined) {\n        return false;\n    }\n    else if (typeof value === 'object') {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        return isValidObject(value);\n    }\n    else if (!['number', 'string', 'boolean'].includes(typeof value)) {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=valid-properties.js.map","import { __assign } from \"tslib\";\nimport { IdentifyOperation, } from '@amplitude/analytics-types';\nimport { UNSET_VALUE } from './constants';\nimport { isValidProperties } from './utils/valid-properties';\nvar Identify = /** @class */ (function () {\n    function Identify() {\n        this._propertySet = new Set();\n        this._properties = {};\n    }\n    Identify.prototype.getUserProperties = function () {\n        return __assign({}, this._properties);\n    };\n    Identify.prototype.set = function (property, value) {\n        this._safeSet(IdentifyOperation.SET, property, value);\n        return this;\n    };\n    Identify.prototype.setOnce = function (property, value) {\n        this._safeSet(IdentifyOperation.SET_ONCE, property, value);\n        return this;\n    };\n    Identify.prototype.append = function (property, value) {\n        this._safeSet(IdentifyOperation.APPEND, property, value);\n        return this;\n    };\n    Identify.prototype.prepend = function (property, value) {\n        this._safeSet(IdentifyOperation.PREPEND, property, value);\n        return this;\n    };\n    Identify.prototype.postInsert = function (property, value) {\n        this._safeSet(IdentifyOperation.POSTINSERT, property, value);\n        return this;\n    };\n    Identify.prototype.preInsert = function (property, value) {\n        this._safeSet(IdentifyOperation.PREINSERT, property, value);\n        return this;\n    };\n    Identify.prototype.remove = function (property, value) {\n        this._safeSet(IdentifyOperation.REMOVE, property, value);\n        return this;\n    };\n    Identify.prototype.add = function (property, value) {\n        this._safeSet(IdentifyOperation.ADD, property, value);\n        return this;\n    };\n    Identify.prototype.unset = function (property) {\n        this._safeSet(IdentifyOperation.UNSET, property, UNSET_VALUE);\n        return this;\n    };\n    Identify.prototype.clearAll = function () {\n        // When clear all happens, all properties are unset. Reset the entire object.\n        this._properties = {};\n        this._properties[IdentifyOperation.CLEAR_ALL] = UNSET_VALUE;\n        return this;\n    };\n    // Returns whether or not this set actually worked.\n    Identify.prototype._safeSet = function (operation, property, value) {\n        if (this._validate(operation, property, value)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            var userPropertyMap = this._properties[operation];\n            if (userPropertyMap === undefined) {\n                userPropertyMap = {};\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                this._properties[operation] = userPropertyMap;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            userPropertyMap[property] = value;\n            this._propertySet.add(property);\n            return true;\n        }\n        return false;\n    };\n    Identify.prototype._validate = function (operation, property, value) {\n        if (this._properties[IdentifyOperation.CLEAR_ALL] !== undefined) {\n            // clear all already set. Skipping operation;\n            return false;\n        }\n        if (this._propertySet.has(property)) {\n            // Property already used. Skipping operation\n            return false;\n        }\n        if (operation === IdentifyOperation.ADD) {\n            return typeof value === 'number';\n        }\n        if (operation !== IdentifyOperation.UNSET && operation !== IdentifyOperation.REMOVE) {\n            return isValidProperties(property, value);\n        }\n        return true;\n    };\n    return Identify;\n}());\nexport { Identify };\n//# sourceMappingURL=identify.js.map","import { __assign } from \"tslib\";\nimport { SpecialEventType, } from '@amplitude/analytics-types';\nimport { Identify } from '../identify';\nexport var createTrackEvent = function (eventInput, eventProperties, eventOptions) {\n    var baseEvent = typeof eventInput === 'string' ? { event_type: eventInput } : eventInput;\n    return __assign(__assign(__assign({}, baseEvent), eventOptions), (eventProperties && { event_properties: eventProperties }));\n};\nexport var createIdentifyEvent = function (identify, eventOptions) {\n    var identifyEvent = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.IDENTIFY, user_properties: identify.getUserProperties() });\n    return identifyEvent;\n};\nexport var createGroupIdentifyEvent = function (groupType, groupName, identify, eventOptions) {\n    var _a;\n    var groupIdentify = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.GROUP_IDENTIFY, group_properties: identify.getUserProperties(), groups: (_a = {},\n            _a[groupType] = groupName,\n            _a) });\n    return groupIdentify;\n};\nexport var createGroupEvent = function (groupType, groupName, eventOptions) {\n    var _a;\n    var identify = new Identify();\n    identify.set(groupType, groupName);\n    var groupEvent = __assign(__assign({}, eventOptions), { event_type: SpecialEventType.IDENTIFY, user_properties: identify.getUserProperties(), groups: (_a = {},\n            _a[groupType] = groupName,\n            _a) });\n    return groupEvent;\n};\nexport var createRevenueEvent = function (revenue, eventOptions) {\n    return __assign(__assign({}, eventOptions), { event_type: SpecialEventType.REVENUE, event_properties: revenue.getEventProperties() });\n};\n//# sourceMappingURL=event-builder.js.map","import { Status } from '@amplitude/analytics-types';\nexport var buildResult = function (event, code, message) {\n    if (code === void 0) { code = 0; }\n    if (message === void 0) { message = Status.Unknown; }\n    return { event: event, code: code, message: message };\n};\n//# sourceMappingURL=result-builder.js.map","import { __assign, __awaiter, __generator, __read, __values } from \"tslib\";\nimport { PluginType, } from '@amplitude/analytics-types';\nimport { buildResult } from './utils/result-builder';\nvar Timeline = /** @class */ (function () {\n    function Timeline(client) {\n        this.client = client;\n        this.queue = [];\n        // Flag to guarantee one schedule apply is running\n        this.applying = false;\n        // Flag indicates whether timeline is ready to process event\n        // Events collected before timeline is ready will stay in the queue to be processed later\n        this.plugins = [];\n    }\n    Timeline.prototype.register = function (plugin, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, plugin.setup(config, this.client)];\n                    case 1:\n                        _a.sent();\n                        this.plugins.push(plugin);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.deregister = function (pluginName, config) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var index, plugin;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        index = this.plugins.findIndex(function (plugin) { return plugin.name === pluginName; });\n                        if (index === -1) {\n                            config.loggerProvider.warn(\"Plugin with name \".concat(pluginName, \" does not exist, skipping deregistration\"));\n                            return [2 /*return*/];\n                        }\n                        plugin = this.plugins[index];\n                        this.plugins.splice(index, 1);\n                        return [4 /*yield*/, ((_a = plugin.teardown) === null || _a === void 0 ? void 0 : _a.call(plugin))];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.reset = function (client) {\n        this.applying = false;\n        var plugins = this.plugins;\n        plugins.map(function (plugin) { var _a; return (_a = plugin.teardown) === null || _a === void 0 ? void 0 : _a.call(plugin); });\n        this.plugins = [];\n        this.client = client;\n    };\n    Timeline.prototype.push = function (event) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            _this.queue.push([event, resolve]);\n            _this.scheduleApply(0);\n        });\n    };\n    Timeline.prototype.scheduleApply = function (timeout) {\n        var _this = this;\n        if (this.applying)\n            return;\n        this.applying = true;\n        setTimeout(function () {\n            void _this.apply(_this.queue.shift()).then(function () {\n                _this.applying = false;\n                if (_this.queue.length > 0) {\n                    _this.scheduleApply(0);\n                }\n            });\n        }, timeout);\n    };\n    Timeline.prototype.apply = function (item) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, event, _b, resolve, before, before_1, before_1_1, plugin, e, e_1_1, enrichment, enrichment_1, enrichment_1_1, plugin, e, e_2_1, destination, executeDestinations;\n            var e_1, _c, e_2, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!item) {\n                            return [2 /*return*/];\n                        }\n                        _a = __read(item, 1), event = _a[0];\n                        _b = __read(item, 2), resolve = _b[1];\n                        before = this.plugins.filter(function (plugin) { return plugin.type === PluginType.BEFORE; });\n                        _e.label = 1;\n                    case 1:\n                        _e.trys.push([1, 6, 7, 8]);\n                        before_1 = __values(before), before_1_1 = before_1.next();\n                        _e.label = 2;\n                    case 2:\n                        if (!!before_1_1.done) return [3 /*break*/, 5];\n                        plugin = before_1_1.value;\n                        return [4 /*yield*/, plugin.execute(__assign({}, event))];\n                    case 3:\n                        e = _e.sent();\n                        if (e === null) {\n                            resolve({ event: event, code: 0, message: '' });\n                            return [2 /*return*/];\n                        }\n                        else {\n                            event = e;\n                        }\n                        _e.label = 4;\n                    case 4:\n                        before_1_1 = before_1.next();\n                        return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 8];\n                    case 6:\n                        e_1_1 = _e.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 8];\n                    case 7:\n                        try {\n                            if (before_1_1 && !before_1_1.done && (_c = before_1.return)) _c.call(before_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                        return [7 /*endfinally*/];\n                    case 8:\n                        enrichment = this.plugins.filter(function (plugin) { return plugin.type === PluginType.ENRICHMENT; });\n                        _e.label = 9;\n                    case 9:\n                        _e.trys.push([9, 14, 15, 16]);\n                        enrichment_1 = __values(enrichment), enrichment_1_1 = enrichment_1.next();\n                        _e.label = 10;\n                    case 10:\n                        if (!!enrichment_1_1.done) return [3 /*break*/, 13];\n                        plugin = enrichment_1_1.value;\n                        return [4 /*yield*/, plugin.execute(__assign({}, event))];\n                    case 11:\n                        e = _e.sent();\n                        if (e === null) {\n                            resolve({ event: event, code: 0, message: '' });\n                            return [2 /*return*/];\n                        }\n                        else {\n                            event = e;\n                        }\n                        _e.label = 12;\n                    case 12:\n                        enrichment_1_1 = enrichment_1.next();\n                        return [3 /*break*/, 10];\n                    case 13: return [3 /*break*/, 16];\n                    case 14:\n                        e_2_1 = _e.sent();\n                        e_2 = { error: e_2_1 };\n                        return [3 /*break*/, 16];\n                    case 15:\n                        try {\n                            if (enrichment_1_1 && !enrichment_1_1.done && (_d = enrichment_1.return)) _d.call(enrichment_1);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                        return [7 /*endfinally*/];\n                    case 16:\n                        destination = this.plugins.filter(function (plugin) { return plugin.type === PluginType.DESTINATION; });\n                        executeDestinations = destination.map(function (plugin) {\n                            var eventClone = __assign({}, event);\n                            return plugin.execute(eventClone).catch(function (e) { return buildResult(eventClone, 0, String(e)); });\n                        });\n                        void Promise.all(executeDestinations).then(function (_a) {\n                            var _b = __read(_a, 1), result = _b[0];\n                            resolve(result);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Timeline.prototype.flush = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var queue, destination, executeDestinations;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        queue = this.queue;\n                        this.queue = [];\n                        return [4 /*yield*/, Promise.all(queue.map(function (item) { return _this.apply(item); }))];\n                    case 1:\n                        _a.sent();\n                        destination = this.plugins.filter(function (plugin) { return plugin.type === PluginType.DESTINATION; });\n                        executeDestinations = destination.map(function (plugin) {\n                            return plugin.flush && plugin.flush();\n                        });\n                        return [4 /*yield*/, Promise.all(executeDestinations)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Timeline;\n}());\nexport { Timeline };\n//# sourceMappingURL=timeline.js.map","export var SUCCESS_MESSAGE = 'Event tracked successfully';\nexport var UNEXPECTED_ERROR_MESSAGE = 'Unexpected error occurred';\nexport var MAX_RETRIES_EXCEEDED_MESSAGE = 'Event rejected due to exceeded retry count';\nexport var OPT_OUT_MESSAGE = 'Event skipped due to optOut config';\nexport var MISSING_API_KEY_MESSAGE = 'Event rejected due to missing API key';\nexport var INVALID_API_KEY = 'Invalid API key';\nexport var CLIENT_NOT_INITIALIZED = 'Client not initialized';\n//# sourceMappingURL=messages.js.map","export var returnWrapper = function (awaitable) { return ({\n    promise: awaitable || Promise.resolve(),\n}); };\n//# sourceMappingURL=return-wrapper.js.map","import { __awaiter, __generator, __values } from \"tslib\";\nimport { createGroupIdentifyEvent, createIdentifyEvent, createTrackEvent, createRevenueEvent, createGroupEvent, } from './utils/event-builder';\nimport { Timeline } from './timeline';\nimport { buildResult } from './utils/result-builder';\nimport { CLIENT_NOT_INITIALIZED, OPT_OUT_MESSAGE } from './messages';\nimport { returnWrapper } from './utils/return-wrapper';\nvar AmplitudeCore = /** @class */ (function () {\n    function AmplitudeCore(name) {\n        if (name === void 0) { name = '$default'; }\n        this.initializing = false;\n        this.q = [];\n        this.dispatchQ = [];\n        this.logEvent = this.track.bind(this);\n        this.timeline = new Timeline(this);\n        this.name = name;\n    }\n    AmplitudeCore.prototype._init = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.config = config;\n                        this.timeline.reset(this);\n                        return [4 /*yield*/, this.runQueuedFunctions('q')];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.runQueuedFunctions = function (queueName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var queuedFunctions, queuedFunctions_1, queuedFunctions_1_1, queuedFunction, e_1_1;\n            var e_1, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        queuedFunctions = this[queueName];\n                        this[queueName] = [];\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 6, 7, 8]);\n                        queuedFunctions_1 = __values(queuedFunctions), queuedFunctions_1_1 = queuedFunctions_1.next();\n                        _b.label = 2;\n                    case 2:\n                        if (!!queuedFunctions_1_1.done) return [3 /*break*/, 5];\n                        queuedFunction = queuedFunctions_1_1.value;\n                        return [4 /*yield*/, queuedFunction()];\n                    case 3:\n                        _b.sent();\n                        _b.label = 4;\n                    case 4:\n                        queuedFunctions_1_1 = queuedFunctions_1.next();\n                        return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 8];\n                    case 6:\n                        e_1_1 = _b.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 8];\n                    case 7:\n                        try {\n                            if (queuedFunctions_1_1 && !queuedFunctions_1_1.done && (_a = queuedFunctions_1.return)) _a.call(queuedFunctions_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                        return [7 /*endfinally*/];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.track = function (eventInput, eventProperties, eventOptions) {\n        var event = createTrackEvent(eventInput, eventProperties, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.identify = function (identify, eventOptions) {\n        var event = createIdentifyEvent(identify, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.groupIdentify = function (groupType, groupName, identify, eventOptions) {\n        var event = createGroupIdentifyEvent(groupType, groupName, identify, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.setGroup = function (groupType, groupName, eventOptions) {\n        var event = createGroupEvent(groupType, groupName, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.revenue = function (revenue, eventOptions) {\n        var event = createRevenueEvent(revenue, eventOptions);\n        return returnWrapper(this.dispatch(event));\n    };\n    AmplitudeCore.prototype.add = function (plugin) {\n        if (!this.config) {\n            this.q.push(this.add.bind(this, plugin));\n            return returnWrapper();\n        }\n        return returnWrapper(this.timeline.register(plugin, this.config));\n    };\n    AmplitudeCore.prototype.remove = function (pluginName) {\n        if (!this.config) {\n            this.q.push(this.remove.bind(this, pluginName));\n            return returnWrapper();\n        }\n        return returnWrapper(this.timeline.deregister(pluginName, this.config));\n    };\n    AmplitudeCore.prototype.dispatchWithCallback = function (event, callback) {\n        if (!this.config) {\n            return callback(buildResult(event, 0, CLIENT_NOT_INITIALIZED));\n        }\n        void this.process(event).then(callback);\n    };\n    AmplitudeCore.prototype.dispatch = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (!this.config) {\n                    return [2 /*return*/, new Promise(function (resolve) {\n                            _this.dispatchQ.push(_this.dispatchWithCallback.bind(_this, event, resolve));\n                        })];\n                }\n                return [2 /*return*/, this.process(event)];\n            });\n        });\n    };\n    AmplitudeCore.prototype.process = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, e_2, message, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        // skip event processing if opt out\n                        if (this.config.optOut) {\n                            return [2 /*return*/, buildResult(event, 0, OPT_OUT_MESSAGE)];\n                        }\n                        return [4 /*yield*/, this.timeline.push(event)];\n                    case 1:\n                        result = _a.sent();\n                        result.code === 200\n                            ? this.config.loggerProvider.log(result.message)\n                            : this.config.loggerProvider.error(result.message);\n                        return [2 /*return*/, result];\n                    case 2:\n                        e_2 = _a.sent();\n                        this.config.loggerProvider.error(e_2);\n                        message = String(e_2);\n                        result = buildResult(event, 0, message);\n                        return [2 /*return*/, result];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeCore.prototype.setOptOut = function (optOut) {\n        if (!this.config) {\n            this.q.push(this.setOptOut.bind(this, Boolean(optOut)));\n            return;\n        }\n        this.config.optOut = Boolean(optOut);\n    };\n    AmplitudeCore.prototype.flush = function () {\n        return returnWrapper(this.timeline.flush());\n    };\n    return AmplitudeCore;\n}());\nexport { AmplitudeCore };\n//# sourceMappingURL=core-client.js.map","import { __assign } from \"tslib\";\nimport { RevenueProperty, } from '@amplitude/analytics-types';\nimport { isValidObject } from './utils/valid-properties';\nvar Revenue = /** @class */ (function () {\n    function Revenue() {\n        this.productId = '';\n        this.quantity = 1;\n        this.price = 0.0;\n    }\n    Revenue.prototype.setProductId = function (productId) {\n        this.productId = productId;\n        return this;\n    };\n    Revenue.prototype.setQuantity = function (quantity) {\n        if (quantity > 0) {\n            this.quantity = quantity;\n        }\n        return this;\n    };\n    Revenue.prototype.setPrice = function (price) {\n        this.price = price;\n        return this;\n    };\n    Revenue.prototype.setRevenueType = function (revenueType) {\n        this.revenueType = revenueType;\n        return this;\n    };\n    Revenue.prototype.setCurrency = function (currency) {\n        this.currency = currency;\n        return this;\n    };\n    Revenue.prototype.setRevenue = function (revenue) {\n        this.revenue = revenue;\n        return this;\n    };\n    Revenue.prototype.setEventProperties = function (properties) {\n        if (isValidObject(properties)) {\n            this.properties = properties;\n        }\n        return this;\n    };\n    Revenue.prototype.getEventProperties = function () {\n        var eventProperties = this.properties ? __assign({}, this.properties) : {};\n        eventProperties[RevenueProperty.REVENUE_PRODUCT_ID] = this.productId;\n        eventProperties[RevenueProperty.REVENUE_QUANTITY] = this.quantity;\n        eventProperties[RevenueProperty.REVENUE_PRICE] = this.price;\n        eventProperties[RevenueProperty.REVENUE_TYPE] = this.revenueType;\n        eventProperties[RevenueProperty.REVENUE_CURRENCY] = this.currency;\n        eventProperties[RevenueProperty.REVENUE] = this.revenue;\n        return eventProperties;\n    };\n    return Revenue;\n}());\nexport { Revenue };\n//# sourceMappingURL=revenue.js.map","// Creates an array of elements split into groups the length of size.\n// If array can't be split evenly, the final chunk will be the remaining elements.\n// Works similary as https://lodash.com/docs/4.17.15#chunk\nexport var chunk = function (arr, size) {\n    var chunkSize = Math.max(size, 1);\n    return arr.reduce(function (chunks, element, index) {\n        var chunkIndex = Math.floor(index / chunkSize);\n        if (!chunks[chunkIndex]) {\n            chunks[chunkIndex] = [];\n        }\n        chunks[chunkIndex].push(element);\n        return chunks;\n    }, []);\n};\n//# sourceMappingURL=chunk.js.map","import { LogLevel } from '@amplitude/analytics-types';\nvar PREFIX = 'Amplitude Logger ';\nvar Logger = /** @class */ (function () {\n    function Logger() {\n        this.logLevel = LogLevel.None;\n    }\n    Logger.prototype.disable = function () {\n        this.logLevel = LogLevel.None;\n    };\n    Logger.prototype.enable = function (logLevel) {\n        if (logLevel === void 0) { logLevel = LogLevel.Warn; }\n        this.logLevel = logLevel;\n    };\n    Logger.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Verbose) {\n            return;\n        }\n        console.log(\"\".concat(PREFIX, \"[Log]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Warn) {\n            return;\n        }\n        console.warn(\"\".concat(PREFIX, \"[Warn]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Error) {\n            return;\n        }\n        console.error(\"\".concat(PREFIX, \"[Error]: \").concat(args.join(' ')));\n    };\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.logLevel < LogLevel.Debug) {\n            return;\n        }\n        // console.debug output is hidden by default in chrome\n        console.log(\"\".concat(PREFIX, \"[Debug]: \").concat(args.join(' ')));\n    };\n    return Logger;\n}());\nexport { Logger };\n//# sourceMappingURL=logger.js.map","import { LogLevel, ServerZone, } from '@amplitude/analytics-types';\nimport { AMPLITUDE_SERVER_URL, AMPLITUDE_BATCH_SERVER_URL, EU_AMPLITUDE_SERVER_URL, EU_AMPLITUDE_BATCH_SERVER_URL, } from './constants';\nimport { Logger } from './logger';\nexport var getDefaultConfig = function () { return ({\n    flushMaxRetries: 12,\n    flushQueueSize: 200,\n    flushIntervalMillis: 10000,\n    instanceName: '$default_instance',\n    logLevel: LogLevel.Warn,\n    loggerProvider: new Logger(),\n    optOut: false,\n    serverUrl: AMPLITUDE_SERVER_URL,\n    serverZone: ServerZone.US,\n    useBatch: false,\n}); };\nvar Config = /** @class */ (function () {\n    function Config(options) {\n        var _a, _b, _c, _d;\n        this._optOut = false;\n        var defaultConfig = getDefaultConfig();\n        this.apiKey = options.apiKey;\n        this.flushIntervalMillis = (_a = options.flushIntervalMillis) !== null && _a !== void 0 ? _a : defaultConfig.flushIntervalMillis;\n        this.flushMaxRetries = options.flushMaxRetries || defaultConfig.flushMaxRetries;\n        this.flushQueueSize = options.flushQueueSize || defaultConfig.flushQueueSize;\n        this.instanceName = options.instanceName || defaultConfig.instanceName;\n        this.loggerProvider = options.loggerProvider || defaultConfig.loggerProvider;\n        this.logLevel = (_b = options.logLevel) !== null && _b !== void 0 ? _b : defaultConfig.logLevel;\n        this.minIdLength = options.minIdLength;\n        this.plan = options.plan;\n        this.ingestionMetadata = options.ingestionMetadata;\n        this.optOut = (_c = options.optOut) !== null && _c !== void 0 ? _c : defaultConfig.optOut;\n        this.serverUrl = options.serverUrl;\n        this.serverZone = options.serverZone || defaultConfig.serverZone;\n        this.storageProvider = options.storageProvider;\n        this.transportProvider = options.transportProvider;\n        this.useBatch = (_d = options.useBatch) !== null && _d !== void 0 ? _d : defaultConfig.useBatch;\n        this.loggerProvider.enable(this.logLevel);\n        var serverConfig = createServerConfig(options.serverUrl, options.serverZone, options.useBatch);\n        this.serverZone = serverConfig.serverZone;\n        this.serverUrl = serverConfig.serverUrl;\n    }\n    Object.defineProperty(Config.prototype, \"optOut\", {\n        get: function () {\n            return this._optOut;\n        },\n        set: function (optOut) {\n            this._optOut = optOut;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Config;\n}());\nexport { Config };\nexport var getServerUrl = function (serverZone, useBatch) {\n    if (serverZone === ServerZone.EU) {\n        return useBatch ? EU_AMPLITUDE_BATCH_SERVER_URL : EU_AMPLITUDE_SERVER_URL;\n    }\n    return useBatch ? AMPLITUDE_BATCH_SERVER_URL : AMPLITUDE_SERVER_URL;\n};\nexport var createServerConfig = function (serverUrl, serverZone, useBatch) {\n    if (serverUrl === void 0) { serverUrl = ''; }\n    if (serverZone === void 0) { serverZone = getDefaultConfig().serverZone; }\n    if (useBatch === void 0) { useBatch = getDefaultConfig().useBatch; }\n    if (serverUrl) {\n        return { serverUrl: serverUrl, serverZone: undefined };\n    }\n    var _serverZone = ['US', 'EU'].includes(serverZone) ? serverZone : getDefaultConfig().serverZone;\n    return {\n        serverZone: _serverZone,\n        serverUrl: getServerUrl(_serverZone, useBatch),\n    };\n};\n//# sourceMappingURL=config.js.map","import { __awaiter, __generator, __read, __rest, __spreadArray } from \"tslib\";\nimport { PluginType, Status, } from '@amplitude/analytics-types';\nimport { INVALID_API_KEY, MAX_RETRIES_EXCEEDED_MESSAGE, MISSING_API_KEY_MESSAGE, SUCCESS_MESSAGE, UNEXPECTED_ERROR_MESSAGE, } from '../messages';\nimport { STORAGE_PREFIX } from '../constants';\nimport { chunk } from '../utils/chunk';\nimport { buildResult } from '../utils/result-builder';\nimport { createServerConfig } from '../config';\nfunction getErrorMessage(error) {\n    if (error instanceof Error)\n        return error.message;\n    return String(error);\n}\nexport function getResponseBodyString(res) {\n    var responseBodyString = '';\n    try {\n        if ('body' in res) {\n            responseBodyString = JSON.stringify(res.body);\n        }\n    }\n    catch (_a) {\n        // to avoid crash, but don't care about the error, add comment to avoid empty block lint error\n    }\n    return responseBodyString;\n}\nvar Destination = /** @class */ (function () {\n    function Destination() {\n        this.name = 'amplitude';\n        this.type = PluginType.DESTINATION;\n        this.retryTimeout = 1000;\n        this.throttleTimeout = 30000;\n        this.storageKey = '';\n        this.scheduled = null;\n        this.queue = [];\n    }\n    Destination.prototype.setup = function (config) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var unsent;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.config = config;\n                        this.storageKey = \"\".concat(STORAGE_PREFIX, \"_\").concat(this.config.apiKey.substring(0, 10));\n                        return [4 /*yield*/, ((_a = this.config.storageProvider) === null || _a === void 0 ? void 0 : _a.get(this.storageKey))];\n                    case 1:\n                        unsent = _b.sent();\n                        this.saveEvents(); // sets storage to '[]'\n                        if (unsent && unsent.length > 0) {\n                            void Promise.all(unsent.map(function (event) { return _this.execute(event); })).catch();\n                        }\n                        return [2 /*return*/, Promise.resolve(undefined)];\n                }\n            });\n        });\n    };\n    Destination.prototype.execute = function (event) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var context = {\n                event: event,\n                attempts: 0,\n                callback: function (result) { return resolve(result); },\n                timeout: 0,\n            };\n            void _this.addToQueue(context);\n        });\n    };\n    Destination.prototype.addToQueue = function () {\n        var _this = this;\n        var list = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            list[_i] = arguments[_i];\n        }\n        var tryable = list.filter(function (context) {\n            if (context.attempts < _this.config.flushMaxRetries) {\n                context.attempts += 1;\n                return true;\n            }\n            void _this.fulfillRequest([context], 500, MAX_RETRIES_EXCEEDED_MESSAGE);\n            return false;\n        });\n        tryable.forEach(function (context) {\n            _this.queue = _this.queue.concat(context);\n            if (context.timeout === 0) {\n                _this.schedule(_this.config.flushIntervalMillis);\n                return;\n            }\n            setTimeout(function () {\n                context.timeout = 0;\n                _this.schedule(0);\n            }, context.timeout);\n        });\n        this.saveEvents();\n    };\n    Destination.prototype.schedule = function (timeout) {\n        var _this = this;\n        if (this.scheduled)\n            return;\n        this.scheduled = setTimeout(function () {\n            void _this.flush(true).then(function () {\n                if (_this.queue.length > 0) {\n                    _this.schedule(timeout);\n                }\n            });\n        }, timeout);\n    };\n    Destination.prototype.flush = function (useRetry) {\n        if (useRetry === void 0) { useRetry = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var list, later, batches;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        list = [];\n                        later = [];\n                        this.queue.forEach(function (context) { return (context.timeout === 0 ? list.push(context) : later.push(context)); });\n                        this.queue = later;\n                        if (this.scheduled) {\n                            clearTimeout(this.scheduled);\n                            this.scheduled = null;\n                        }\n                        batches = chunk(list, this.config.flushQueueSize);\n                        return [4 /*yield*/, Promise.all(batches.map(function (batch) { return _this.send(batch, useRetry); }))];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Destination.prototype.send = function (list, useRetry) {\n        if (useRetry === void 0) { useRetry = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            var payload, serverUrl, res, e_1, errorMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.config.apiKey) {\n                            return [2 /*return*/, this.fulfillRequest(list, 400, MISSING_API_KEY_MESSAGE)];\n                        }\n                        payload = {\n                            api_key: this.config.apiKey,\n                            events: list.map(function (context) {\n                                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                                var _a = context.event, extra = _a.extra, eventWithoutExtra = __rest(_a, [\"extra\"]);\n                                return eventWithoutExtra;\n                            }),\n                            options: {\n                                min_id_length: this.config.minIdLength,\n                            },\n                        };\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        serverUrl = createServerConfig(this.config.serverUrl, this.config.serverZone, this.config.useBatch).serverUrl;\n                        return [4 /*yield*/, this.config.transportProvider.send(serverUrl, payload)];\n                    case 2:\n                        res = _a.sent();\n                        if (res === null) {\n                            this.fulfillRequest(list, 0, UNEXPECTED_ERROR_MESSAGE);\n                            return [2 /*return*/];\n                        }\n                        if (!useRetry) {\n                            if ('body' in res) {\n                                this.fulfillRequest(list, res.statusCode, \"\".concat(res.status, \": \").concat(getResponseBodyString(res)));\n                            }\n                            else {\n                                this.fulfillRequest(list, res.statusCode, res.status);\n                            }\n                            return [2 /*return*/];\n                        }\n                        this.handleResponse(res, list);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        this.config.loggerProvider.error(e_1);\n                        errorMessage = getErrorMessage(e_1);\n                        this.fulfillRequest(list, 0, errorMessage);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Destination.prototype.handleResponse = function (res, list) {\n        var status = res.status;\n        switch (status) {\n            case Status.Success: {\n                this.handleSuccessResponse(res, list);\n                break;\n            }\n            case Status.Invalid: {\n                this.handleInvalidResponse(res, list);\n                break;\n            }\n            case Status.PayloadTooLarge: {\n                this.handlePayloadTooLargeResponse(res, list);\n                break;\n            }\n            case Status.RateLimit: {\n                this.handleRateLimitResponse(res, list);\n                break;\n            }\n            default: {\n                // log intermediate event status before retry\n                this.config.loggerProvider.warn(\"{code: 0, error: \\\"Status '\".concat(status, \"' provided for \").concat(list.length, \" events\\\"}\"));\n                this.handleOtherResponse(list);\n                break;\n            }\n        }\n    };\n    Destination.prototype.handleSuccessResponse = function (res, list) {\n        this.fulfillRequest(list, res.statusCode, SUCCESS_MESSAGE);\n    };\n    Destination.prototype.handleInvalidResponse = function (res, list) {\n        var _this = this;\n        if (res.body.missingField || res.body.error.startsWith(INVALID_API_KEY)) {\n            this.fulfillRequest(list, res.statusCode, res.body.error);\n            return;\n        }\n        var dropIndex = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(Object.values(res.body.eventsWithInvalidFields)), false), __read(Object.values(res.body.eventsWithMissingFields)), false), __read(Object.values(res.body.eventsWithInvalidIdLengths)), false), __read(res.body.silencedEvents), false).flat();\n        var dropIndexSet = new Set(dropIndex);\n        var retry = list.filter(function (context, index) {\n            if (dropIndexSet.has(index)) {\n                _this.fulfillRequest([context], res.statusCode, res.body.error);\n                return;\n            }\n            return true;\n        });\n        if (retry.length > 0) {\n            // log intermediate event status before retry\n            this.config.loggerProvider.warn(getResponseBodyString(res));\n        }\n        this.addToQueue.apply(this, __spreadArray([], __read(retry), false));\n    };\n    Destination.prototype.handlePayloadTooLargeResponse = function (res, list) {\n        if (list.length === 1) {\n            this.fulfillRequest(list, res.statusCode, res.body.error);\n            return;\n        }\n        // log intermediate event status before retry\n        this.config.loggerProvider.warn(getResponseBodyString(res));\n        this.config.flushQueueSize /= 2;\n        this.addToQueue.apply(this, __spreadArray([], __read(list), false));\n    };\n    Destination.prototype.handleRateLimitResponse = function (res, list) {\n        var _this = this;\n        var dropUserIds = Object.keys(res.body.exceededDailyQuotaUsers);\n        var dropDeviceIds = Object.keys(res.body.exceededDailyQuotaDevices);\n        var throttledIndex = res.body.throttledEvents;\n        var dropUserIdsSet = new Set(dropUserIds);\n        var dropDeviceIdsSet = new Set(dropDeviceIds);\n        var throttledIndexSet = new Set(throttledIndex);\n        var retry = list.filter(function (context, index) {\n            if ((context.event.user_id && dropUserIdsSet.has(context.event.user_id)) ||\n                (context.event.device_id && dropDeviceIdsSet.has(context.event.device_id))) {\n                _this.fulfillRequest([context], res.statusCode, res.body.error);\n                return;\n            }\n            if (throttledIndexSet.has(index)) {\n                context.timeout = _this.throttleTimeout;\n            }\n            return true;\n        });\n        if (retry.length > 0) {\n            // log intermediate event status before retry\n            this.config.loggerProvider.warn(getResponseBodyString(res));\n        }\n        this.addToQueue.apply(this, __spreadArray([], __read(retry), false));\n    };\n    Destination.prototype.handleOtherResponse = function (list) {\n        var _this = this;\n        this.addToQueue.apply(this, __spreadArray([], __read(list.map(function (context) {\n            context.timeout = context.attempts * _this.retryTimeout;\n            return context;\n        })), false));\n    };\n    Destination.prototype.fulfillRequest = function (list, code, message) {\n        this.saveEvents();\n        list.forEach(function (context) { return context.callback(buildResult(context.event, code, message)); });\n    };\n    /**\n     * Saves events to storage\n     * This is called on\n     * 1) new events are added to queue; or\n     * 2) response comes back for a request\n     */\n    Destination.prototype.saveEvents = function () {\n        if (!this.config.storageProvider) {\n            return;\n        }\n        var events = Array.from(this.queue.map(function (context) { return context.event; }));\n        void this.config.storageProvider.set(this.storageKey, events);\n    };\n    return Destination;\n}());\nexport { Destination };\n//# sourceMappingURL=destination.js.map","import { __assign, __values } from \"tslib\";\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { LogLevel } from '@amplitude/analytics-types';\nexport var getStacktrace = function (ignoreDepth) {\n    if (ignoreDepth === void 0) { ignoreDepth = 0; }\n    var trace = new Error().stack || '';\n    return trace\n        .split('\\n')\n        .slice(2 + ignoreDepth)\n        .map(function (text) { return text.trim(); });\n};\n// This hook makes sure we always get the latest logger and logLevel.\nexport var getClientLogConfig = function (client) { return function () {\n    var _a = __assign({}, client.config), logger = _a.loggerProvider, logLevel = _a.logLevel;\n    return {\n        logger: logger,\n        logLevel: logLevel,\n    };\n}; };\n// This is a convenient function to get the attribute from object with string path, similar to lodash '#get'.\nexport var getValueByStringPath = function (obj, path) {\n    var e_1, _a;\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties\n    path = path.replace(/^\\./, ''); // strip a leading dot\n    try {\n        for (var _b = __values(path.split('.')), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var attr = _c.value;\n            if (attr in obj) {\n                obj = obj[attr];\n            }\n            else {\n                return;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return obj;\n};\nexport var getClientStates = function (client, paths) { return function () {\n    var e_2, _a;\n    var res = {};\n    try {\n        for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n            var path = paths_1_1.value;\n            res[path] = getValueByStringPath(client, path);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return res;\n}; };\nexport var debugWrapper = function (fn, fnName, getLogConfig, getStates, fnContext) {\n    if (fnContext === void 0) { fnContext = null; }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _a = getLogConfig(), logger = _a.logger, logLevel = _a.logLevel;\n        // return early if possible to reduce overhead\n        if ((logLevel && logLevel < LogLevel.Debug) || !logLevel || !logger) {\n            return fn.apply(fnContext, args);\n        }\n        var debugContext = {\n            type: 'invoke public method',\n            name: fnName,\n            args: args,\n            stacktrace: getStacktrace(1),\n            time: {\n                start: new Date().toISOString(),\n            },\n            states: {},\n        };\n        if (getStates && debugContext.states) {\n            debugContext.states.before = getStates();\n        }\n        var result = fn.apply(fnContext, args);\n        if (result && result.promise) {\n            // if result is a promise, add the callback\n            result.promise.then(function () {\n                if (getStates && debugContext.states) {\n                    debugContext.states.after = getStates();\n                }\n                if (debugContext.time) {\n                    debugContext.time.end = new Date().toISOString();\n                }\n                logger.debug(JSON.stringify(debugContext, null, 2));\n            });\n        }\n        else {\n            if (getStates && debugContext.states) {\n                debugContext.states.after = getStates();\n            }\n            if (debugContext.time) {\n                debugContext.time.end = new Date().toISOString();\n            }\n            logger.debug(JSON.stringify(debugContext, null, 2));\n        }\n        return result;\n    };\n};\n//# sourceMappingURL=debug.js.map","/**\n * Source: [jed's gist]{@link https://gist.github.com/982883}.\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f, and\n * y is replaced with a random hexadecimal digit from 8 to b.\n * Used to generate UUIDs for deviceIds.\n * @private\n */\nexport var UUID = function (a) {\n    return a // if the placeholder was passed, return\n        ? // a random number from 0 to 15\n            (a ^ // unless b is 8,\n                ((Math.random() * // in which case\n                    16) >> // a random number from\n                    (a / 4))) // 8 to 11\n                .toString(16) // in hexadecimal\n        : // or otherwise a concatenated string:\n            (String(1e7) + // 10000000 +\n                String(-1e3) + // -1000 +\n                String(-4e3) + // -4000 +\n                String(-8e3) + // -80000000 +\n                String(-1e11)) // -100000000000,\n                .replace(\n            // replacing\n            /[018]/g, // zeroes, ones, and eights with\n            UUID);\n};\n//# sourceMappingURL=uuid.js.map","import { __awaiter, __generator } from \"tslib\";\nvar MemoryStorage = /** @class */ (function () {\n    function MemoryStorage() {\n        this.memoryStorage = new Map();\n    }\n    MemoryStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, true];\n            });\n        });\n    };\n    MemoryStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.memoryStorage.get(key)];\n            });\n        });\n    };\n    MemoryStorage.prototype.getRaw = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.get(key)];\n                    case 1:\n                        value = _a.sent();\n                        return [2 /*return*/, value ? JSON.stringify(value) : undefined];\n                }\n            });\n        });\n    };\n    MemoryStorage.prototype.set = function (key, value) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.set(key, value);\n                return [2 /*return*/];\n            });\n        });\n    };\n    MemoryStorage.prototype.remove = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.delete(key);\n                return [2 /*return*/];\n            });\n        });\n    };\n    MemoryStorage.prototype.reset = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.memoryStorage.clear();\n                return [2 /*return*/];\n            });\n        });\n    };\n    return MemoryStorage;\n}());\nexport { MemoryStorage };\n//# sourceMappingURL=memory.js.map","/* eslint-disable @typescript-eslint/no-unsafe-argument */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport { Status } from '@amplitude/analytics-types';\nvar BaseTransport = /** @class */ (function () {\n    function BaseTransport() {\n    }\n    BaseTransport.prototype.send = function (_serverUrl, _payload) {\n        return Promise.resolve(null);\n    };\n    BaseTransport.prototype.buildResponse = function (responseJSON) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n        if (typeof responseJSON !== 'object') {\n            return null;\n        }\n        var statusCode = responseJSON.code || 0;\n        var status = this.buildStatus(statusCode);\n        switch (status) {\n            case Status.Success:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        eventsIngested: (_a = responseJSON.events_ingested) !== null && _a !== void 0 ? _a : 0,\n                        payloadSizeBytes: (_b = responseJSON.payload_size_bytes) !== null && _b !== void 0 ? _b : 0,\n                        serverUploadTime: (_c = responseJSON.server_upload_time) !== null && _c !== void 0 ? _c : 0,\n                    },\n                };\n            case Status.Invalid:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_d = responseJSON.error) !== null && _d !== void 0 ? _d : '',\n                        missingField: (_e = responseJSON.missing_field) !== null && _e !== void 0 ? _e : '',\n                        eventsWithInvalidFields: (_f = responseJSON.events_with_invalid_fields) !== null && _f !== void 0 ? _f : {},\n                        eventsWithMissingFields: (_g = responseJSON.events_with_missing_fields) !== null && _g !== void 0 ? _g : {},\n                        eventsWithInvalidIdLengths: (_h = responseJSON.events_with_invalid_id_lengths) !== null && _h !== void 0 ? _h : {},\n                        epsThreshold: (_j = responseJSON.eps_threshold) !== null && _j !== void 0 ? _j : 0,\n                        exceededDailyQuotaDevices: (_k = responseJSON.exceeded_daily_quota_devices) !== null && _k !== void 0 ? _k : {},\n                        silencedDevices: (_l = responseJSON.silenced_devices) !== null && _l !== void 0 ? _l : [],\n                        silencedEvents: (_m = responseJSON.silenced_events) !== null && _m !== void 0 ? _m : [],\n                        throttledDevices: (_o = responseJSON.throttled_devices) !== null && _o !== void 0 ? _o : {},\n                        throttledEvents: (_p = responseJSON.throttled_events) !== null && _p !== void 0 ? _p : [],\n                    },\n                };\n            case Status.PayloadTooLarge:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_q = responseJSON.error) !== null && _q !== void 0 ? _q : '',\n                    },\n                };\n            case Status.RateLimit:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_r = responseJSON.error) !== null && _r !== void 0 ? _r : '',\n                        epsThreshold: (_s = responseJSON.eps_threshold) !== null && _s !== void 0 ? _s : 0,\n                        throttledDevices: (_t = responseJSON.throttled_devices) !== null && _t !== void 0 ? _t : {},\n                        throttledUsers: (_u = responseJSON.throttled_users) !== null && _u !== void 0 ? _u : {},\n                        exceededDailyQuotaDevices: (_v = responseJSON.exceeded_daily_quota_devices) !== null && _v !== void 0 ? _v : {},\n                        exceededDailyQuotaUsers: (_w = responseJSON.exceeded_daily_quota_users) !== null && _w !== void 0 ? _w : {},\n                        throttledEvents: (_x = responseJSON.throttled_events) !== null && _x !== void 0 ? _x : [],\n                    },\n                };\n            case Status.Timeout:\n            default:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                };\n        }\n    };\n    BaseTransport.prototype.buildStatus = function (code) {\n        if (code >= 200 && code < 300) {\n            return Status.Success;\n        }\n        if (code === 429) {\n            return Status.RateLimit;\n        }\n        if (code === 413) {\n            return Status.PayloadTooLarge;\n        }\n        if (code === 408) {\n            return Status.Timeout;\n        }\n        if (code >= 400 && code < 500) {\n            return Status.Invalid;\n        }\n        if (code >= 500) {\n            return Status.Failed;\n        }\n        return Status.Unknown;\n    };\n    return BaseTransport;\n}());\nexport { BaseTransport };\n//# sourceMappingURL=base.js.map","var ApplicationContextProviderImpl = /** @class */ (function () {\n    function ApplicationContextProviderImpl() {\n    }\n    ApplicationContextProviderImpl.prototype.getApplicationContext = function () {\n        return {\n            versionName: this.versionName,\n            language: getLanguage(),\n            platform: 'Web',\n            os: undefined,\n            deviceModel: undefined,\n        };\n    };\n    return ApplicationContextProviderImpl;\n}());\nvar getLanguage = function () {\n    return ((typeof navigator !== 'undefined' &&\n        ((navigator.languages && navigator.languages[0]) ||\n            navigator.language)) ||\n        '');\n};\n\nvar EventBridgeImpl = /** @class */ (function () {\n    function EventBridgeImpl() {\n        this.queue = [];\n    }\n    EventBridgeImpl.prototype.logEvent = function (event) {\n        if (!this.receiver) {\n            if (this.queue.length < 512) {\n                this.queue.push(event);\n            }\n        }\n        else {\n            this.receiver(event);\n        }\n    };\n    EventBridgeImpl.prototype.setEventReceiver = function (receiver) {\n        this.receiver = receiver;\n        if (this.queue.length > 0) {\n            this.queue.forEach(function (event) {\n                receiver(event);\n            });\n            this.queue = [];\n        }\n    };\n    return EventBridgeImpl;\n}());\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar isEqual = function (obj1, obj2) {\n    var e_1, _a;\n    var primitive = ['string', 'number', 'boolean', 'undefined'];\n    var typeA = typeof obj1;\n    var typeB = typeof obj2;\n    if (typeA !== typeB) {\n        return false;\n    }\n    try {\n        for (var primitive_1 = __values(primitive), primitive_1_1 = primitive_1.next(); !primitive_1_1.done; primitive_1_1 = primitive_1.next()) {\n            var p = primitive_1_1.value;\n            if (p === typeA) {\n                return obj1 === obj2;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (primitive_1_1 && !primitive_1_1.done && (_a = primitive_1.return)) _a.call(primitive_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    // check null\n    if (obj1 == null && obj2 == null) {\n        return true;\n    }\n    else if (obj1 == null || obj2 == null) {\n        return false;\n    }\n    // if got here - objects\n    if (obj1.length !== obj2.length) {\n        return false;\n    }\n    //check if arrays\n    var isArrayA = Array.isArray(obj1);\n    var isArrayB = Array.isArray(obj2);\n    if (isArrayA !== isArrayB) {\n        return false;\n    }\n    if (isArrayA && isArrayB) {\n        //arrays\n        for (var i = 0; i < obj1.length; i++) {\n            if (!isEqual(obj1[i], obj2[i])) {\n                return false;\n            }\n        }\n    }\n    else {\n        //objects\n        var sorted1 = Object.keys(obj1).sort();\n        var sorted2 = Object.keys(obj2).sort();\n        if (!isEqual(sorted1, sorted2)) {\n            return false;\n        }\n        //compare object values\n        var result_1 = true;\n        Object.keys(obj1).forEach(function (key) {\n            if (!isEqual(obj1[key], obj2[key])) {\n                result_1 = false;\n            }\n        });\n        return result_1;\n    }\n    return true;\n};\n\nvar ID_OP_SET = '$set';\nvar ID_OP_UNSET = '$unset';\nvar ID_OP_CLEAR_ALL = '$clearAll';\n// Polyfill for Object.entries\nif (!Object.entries) {\n    Object.entries = function (obj) {\n        var ownProps = Object.keys(obj);\n        var i = ownProps.length;\n        var resArray = new Array(i);\n        while (i--) {\n            resArray[i] = [ownProps[i], obj[ownProps[i]]];\n        }\n        return resArray;\n    };\n}\nvar IdentityStoreImpl = /** @class */ (function () {\n    function IdentityStoreImpl() {\n        this.identity = { userProperties: {} };\n        this.listeners = new Set();\n    }\n    IdentityStoreImpl.prototype.editIdentity = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var actingUserProperties = __assign({}, this.identity.userProperties);\n        var actingIdentity = __assign(__assign({}, this.identity), { userProperties: actingUserProperties });\n        return {\n            setUserId: function (userId) {\n                actingIdentity.userId = userId;\n                return this;\n            },\n            setDeviceId: function (deviceId) {\n                actingIdentity.deviceId = deviceId;\n                return this;\n            },\n            setUserProperties: function (userProperties) {\n                actingIdentity.userProperties = userProperties;\n                return this;\n            },\n            setOptOut: function (optOut) {\n                actingIdentity.optOut = optOut;\n                return this;\n            },\n            updateUserProperties: function (actions) {\n                var e_1, _a, e_2, _b, e_3, _c;\n                var actingProperties = actingIdentity.userProperties || {};\n                try {\n                    for (var _d = __values(Object.entries(actions)), _e = _d.next(); !_e.done; _e = _d.next()) {\n                        var _f = __read(_e.value, 2), action = _f[0], properties = _f[1];\n                        switch (action) {\n                            case ID_OP_SET:\n                                try {\n                                    for (var _g = (e_2 = void 0, __values(Object.entries(properties))), _h = _g.next(); !_h.done; _h = _g.next()) {\n                                        var _j = __read(_h.value, 2), key = _j[0], value = _j[1];\n                                        actingProperties[key] = value;\n                                    }\n                                }\n                                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                finally {\n                                    try {\n                                        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n                                    }\n                                    finally { if (e_2) throw e_2.error; }\n                                }\n                                break;\n                            case ID_OP_UNSET:\n                                try {\n                                    for (var _k = (e_3 = void 0, __values(Object.keys(properties))), _l = _k.next(); !_l.done; _l = _k.next()) {\n                                        var key = _l.value;\n                                        delete actingProperties[key];\n                                    }\n                                }\n                                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                                finally {\n                                    try {\n                                        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n                                    }\n                                    finally { if (e_3) throw e_3.error; }\n                                }\n                                break;\n                            case ID_OP_CLEAR_ALL:\n                                actingProperties = {};\n                                break;\n                        }\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                actingIdentity.userProperties = actingProperties;\n                return this;\n            },\n            commit: function () {\n                self.setIdentity(actingIdentity);\n                return this;\n            },\n        };\n    };\n    IdentityStoreImpl.prototype.getIdentity = function () {\n        return __assign({}, this.identity);\n    };\n    IdentityStoreImpl.prototype.setIdentity = function (identity) {\n        var originalIdentity = __assign({}, this.identity);\n        this.identity = __assign({}, identity);\n        if (!isEqual(originalIdentity, this.identity)) {\n            this.listeners.forEach(function (listener) {\n                listener(identity);\n            });\n        }\n    };\n    IdentityStoreImpl.prototype.addIdentityListener = function (listener) {\n        this.listeners.add(listener);\n    };\n    IdentityStoreImpl.prototype.removeIdentityListener = function (listener) {\n        this.listeners.delete(listener);\n    };\n    return IdentityStoreImpl;\n}());\n\nvar safeGlobal = typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n        ? global\n        : self;\n\nvar AnalyticsConnector = /** @class */ (function () {\n    function AnalyticsConnector() {\n        this.identityStore = new IdentityStoreImpl();\n        this.eventBridge = new EventBridgeImpl();\n        this.applicationContextProvider = new ApplicationContextProviderImpl();\n    }\n    AnalyticsConnector.getInstance = function (instanceName) {\n        if (!safeGlobal['analyticsConnectorInstances']) {\n            safeGlobal['analyticsConnectorInstances'] = {};\n        }\n        if (!safeGlobal['analyticsConnectorInstances'][instanceName]) {\n            safeGlobal['analyticsConnectorInstances'][instanceName] =\n                new AnalyticsConnector();\n        }\n        return safeGlobal['analyticsConnectorInstances'][instanceName];\n    };\n    return AnalyticsConnector;\n}());\n\nexport { AnalyticsConnector };\n","import { AnalyticsConnector } from '@amplitude/analytics-connector';\nexport var getAnalyticsConnector = function (instanceName) {\n    if (instanceName === void 0) { instanceName = '$default_instance'; }\n    return AnalyticsConnector.getInstance(instanceName);\n};\nexport var setConnectorUserId = function (userId, instanceName) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setUserId(userId).commit();\n};\nexport var setConnectorDeviceId = function (deviceId, instanceName) {\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setDeviceId(deviceId).commit();\n};\nexport var setConnectorOptOut = function (optOut, instanceName) {\n    getAnalyticsConnector(instanceName).identityStore.editIdentity().setOptOut(optOut).commit();\n};\n//# sourceMappingURL=analytics-connector.js.map","/* eslint-disable no-restricted-globals */\n/* Only file allowed to access to globalThis, window, self */\nexport var getGlobalScope = function () {\n    if (typeof globalThis !== 'undefined') {\n        return globalThis;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    return undefined;\n};\n//# sourceMappingURL=global-scope.js.map","import { getGlobalScope } from './global-scope';\nexport var getQueryParams = function () {\n    var _a;\n    var globalScope = getGlobalScope();\n    /* istanbul ignore if */\n    if (!((_a = globalScope === null || globalScope === void 0 ? void 0 : globalScope.location) === null || _a === void 0 ? void 0 : _a.search)) {\n        return {};\n    }\n    var pairs = globalScope.location.search.substring(1).split('&').filter(Boolean);\n    var params = pairs.reduce(function (acc, curr) {\n        var query = curr.split('=', 2);\n        var key = tryDecodeURIComponent(query[0]);\n        var value = tryDecodeURIComponent(query[1]);\n        if (!value) {\n            return acc;\n        }\n        acc[key] = value;\n        return acc;\n    }, {});\n    return params;\n};\nexport var tryDecodeURIComponent = function (value) {\n    if (value === void 0) { value = ''; }\n    try {\n        return decodeURIComponent(value);\n    }\n    catch (_a) {\n        return '';\n    }\n};\n//# sourceMappingURL=query-params.js.map","export var UTM_CAMPAIGN = 'utm_campaign';\nexport var UTM_CONTENT = 'utm_content';\nexport var UTM_ID = 'utm_id';\nexport var UTM_MEDIUM = 'utm_medium';\nexport var UTM_SOURCE = 'utm_source';\nexport var UTM_TERM = 'utm_term';\nexport var DCLID = 'dclid';\nexport var FBCLID = 'fbclid';\nexport var GBRAID = 'gbraid';\nexport var GCLID = 'gclid';\nexport var KO_CLICK_ID = 'ko_click_id';\nexport var LI_FAT_ID = 'li_fat_id';\nexport var MSCLKID = 'msclkid';\nexport var RDT_CID = 'rtd_cid';\nexport var TTCLID = 'ttclid';\nexport var TWCLID = 'twclid';\nexport var WBRAID = 'wbraid';\nexport var EMPTY_VALUE = 'EMPTY';\nexport var BASE_CAMPAIGN = {\n    utm_campaign: undefined,\n    utm_content: undefined,\n    utm_id: undefined,\n    utm_medium: undefined,\n    utm_source: undefined,\n    utm_term: undefined,\n    referrer: undefined,\n    referring_domain: undefined,\n    dclid: undefined,\n    gbraid: undefined,\n    gclid: undefined,\n    fbclid: undefined,\n    ko_click_id: undefined,\n    li_fat_id: undefined,\n    msclkid: undefined,\n    rtd_cid: undefined,\n    ttclid: undefined,\n    twclid: undefined,\n    wbraid: undefined,\n};\nexport var MKTG = 'MKTG';\n//# sourceMappingURL=constants.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { getQueryParams } from '../query-params';\nimport { UTM_CAMPAIGN, UTM_CONTENT, UTM_MEDIUM, UTM_SOURCE, UTM_TERM, GCLID, FBCLID, BASE_CAMPAIGN, DCLID, MSCLKID, RDT_CID, TWCLID, TTCLID, KO_CLICK_ID, LI_FAT_ID, GBRAID, WBRAID, UTM_ID, } from './constants';\nvar CampaignParser = /** @class */ (function () {\n    function CampaignParser() {\n    }\n    CampaignParser.prototype.parse = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, __assign(__assign(__assign(__assign({}, BASE_CAMPAIGN), this.getUtmParam()), this.getReferrer()), this.getClickIds())];\n            });\n        });\n    };\n    CampaignParser.prototype.getUtmParam = function () {\n        var params = getQueryParams();\n        var utmCampaign = params[UTM_CAMPAIGN];\n        var utmContent = params[UTM_CONTENT];\n        var utmId = params[UTM_ID];\n        var utmMedium = params[UTM_MEDIUM];\n        var utmSource = params[UTM_SOURCE];\n        var utmTerm = params[UTM_TERM];\n        return {\n            utm_campaign: utmCampaign,\n            utm_content: utmContent,\n            utm_id: utmId,\n            utm_medium: utmMedium,\n            utm_source: utmSource,\n            utm_term: utmTerm,\n        };\n    };\n    CampaignParser.prototype.getReferrer = function () {\n        var _a, _b;\n        var data = {\n            referrer: undefined,\n            referring_domain: undefined,\n        };\n        try {\n            data.referrer = document.referrer || undefined;\n            data.referring_domain = (_b = (_a = data.referrer) === null || _a === void 0 ? void 0 : _a.split('/')[2]) !== null && _b !== void 0 ? _b : undefined;\n        }\n        catch (_c) {\n            // nothing to track\n        }\n        return data;\n    };\n    CampaignParser.prototype.getClickIds = function () {\n        var _a;\n        var params = getQueryParams();\n        return _a = {},\n            _a[DCLID] = params[DCLID],\n            _a[FBCLID] = params[FBCLID],\n            _a[GBRAID] = params[GBRAID],\n            _a[GCLID] = params[GCLID],\n            _a[KO_CLICK_ID] = params[KO_CLICK_ID],\n            _a[LI_FAT_ID] = params[LI_FAT_ID],\n            _a[MSCLKID] = params[MSCLKID],\n            _a[RDT_CID] = params[RDT_CID],\n            _a[TTCLID] = params[TTCLID],\n            _a[TWCLID] = params[TWCLID],\n            _a[WBRAID] = params[WBRAID],\n            _a;\n    };\n    return CampaignParser;\n}());\nexport { CampaignParser };\n//# sourceMappingURL=campaign-parser.js.map","import { AMPLITUDE_PREFIX } from '@amplitude/analytics-core';\nexport var getCookieName = function (apiKey, postKey, limit) {\n    if (postKey === void 0) { postKey = ''; }\n    if (limit === void 0) { limit = 10; }\n    return [AMPLITUDE_PREFIX, postKey, apiKey.substring(0, limit)].filter(Boolean).join('_');\n};\nexport var getOldCookieName = function (apiKey) {\n    return \"\".concat(AMPLITUDE_PREFIX.toLowerCase(), \"_\").concat(apiKey.substring(0, 6));\n};\n//# sourceMappingURL=cookie-name.js.map","export var isFileDownloadTrackingEnabled = function (defaultTracking) {\n    if (typeof defaultTracking === 'boolean') {\n        return defaultTracking;\n    }\n    if (defaultTracking === null || defaultTracking === void 0 ? void 0 : defaultTracking.fileDownloads) {\n        return true;\n    }\n    return false;\n};\nexport var isFormInteractionTrackingEnabled = function (defaultTracking) {\n    if (typeof defaultTracking === 'boolean') {\n        return defaultTracking;\n    }\n    if (defaultTracking === null || defaultTracking === void 0 ? void 0 : defaultTracking.formInteractions) {\n        return true;\n    }\n    return false;\n};\nexport var isPageViewTrackingEnabled = function (defaultTracking) {\n    if (typeof defaultTracking === 'boolean') {\n        return defaultTracking;\n    }\n    if ((defaultTracking === null || defaultTracking === void 0 ? void 0 : defaultTracking.pageViews) === true ||\n        ((defaultTracking === null || defaultTracking === void 0 ? void 0 : defaultTracking.pageViews) && typeof defaultTracking.pageViews === 'object')) {\n        return true;\n    }\n    return false;\n};\nexport var isSessionTrackingEnabled = function (defaultTracking) {\n    if (typeof defaultTracking === 'boolean') {\n        return defaultTracking;\n    }\n    if (defaultTracking === null || defaultTracking === void 0 ? void 0 : defaultTracking.sessions) {\n        return true;\n    }\n    return false;\n};\n/**\n * Returns page view tracking config\n *\n * if config.attribution.trackPageViews and config.defaultTracking.pageViews are both TRUE\n * then always track page views\n *\n * if config.attribution.trackPageViews is TRUE and config.defaultTracking.pageViews is FALSE\n * then only track page views on attribution\n *\n * if config.attribution.trackPageViews is FALSE and config.defaultTracking.pageViews is TRUE\n * then always track page views\n *\n * if config.attribution.trackPageViews and config.defaultTracking.pageViews are both FALSE\n * then never track page views\n */\nexport var getPageViewTrackingConfig = function (config) {\n    var _a;\n    var trackOn = ((_a = config.attribution) === null || _a === void 0 ? void 0 : _a.trackPageViews) ? 'attribution' : function () { return false; };\n    var trackHistoryChanges = undefined;\n    var eventType = 'Page View';\n    var isDefaultPageViewTrackingEnabled = isPageViewTrackingEnabled(config.defaultTracking);\n    if (isDefaultPageViewTrackingEnabled) {\n        trackOn = undefined;\n        eventType = undefined;\n        if (config.defaultTracking &&\n            typeof config.defaultTracking === 'object' &&\n            config.defaultTracking.pageViews &&\n            typeof config.defaultTracking.pageViews === 'object') {\n            if ('trackOn' in config.defaultTracking.pageViews) {\n                trackOn = config.defaultTracking.pageViews.trackOn;\n            }\n            if ('trackHistoryChanges' in config.defaultTracking.pageViews) {\n                trackHistoryChanges = config.defaultTracking.pageViews.trackHistoryChanges;\n            }\n            if ('eventType' in config.defaultTracking.pageViews && config.defaultTracking.pageViews.eventType) {\n                eventType = config.defaultTracking.pageViews.eventType;\n            }\n        }\n    }\n    return {\n        trackOn: trackOn,\n        trackHistoryChanges: trackHistoryChanges,\n        eventType: eventType,\n    };\n};\n//# sourceMappingURL=default-tracking.js.map","export var getLanguage = function () {\n    var _a, _b, _c, _d;\n    if (typeof navigator === 'undefined')\n        return '';\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    var userLanguage = navigator.userLanguage;\n    return (_d = (_c = (_b = (_a = navigator.languages) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : navigator.language) !== null && _c !== void 0 ? _c : userLanguage) !== null && _d !== void 0 ? _d : '';\n};\n//# sourceMappingURL=language.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PluginType } from '@amplitude/analytics-types';\nimport { getAnalyticsConnector } from '../analytics-connector';\nvar IdentityEventSender = /** @class */ (function () {\n    function IdentityEventSender() {\n        this.name = 'identity';\n        this.type = PluginType.BEFORE;\n        this.identityStore = getAnalyticsConnector().identityStore;\n    }\n    IdentityEventSender.prototype.execute = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var userProperties;\n            return __generator(this, function (_a) {\n                userProperties = context.user_properties;\n                if (userProperties) {\n                    this.identityStore.editIdentity().updateUserProperties(userProperties).commit();\n                }\n                return [2 /*return*/, context];\n            });\n        });\n    };\n    IdentityEventSender.prototype.setup = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (config.instanceName) {\n                    this.identityStore = getAnalyticsConnector(config.instanceName).identityStore;\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return IdentityEventSender;\n}());\nexport { IdentityEventSender };\n//# sourceMappingURL=identity.js.map","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { getGlobalScope } from '../global-scope';\nvar CookieStorage = /** @class */ (function () {\n    function CookieStorage(options) {\n        this.options = __assign({}, options);\n    }\n    CookieStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var testStrorage, testKey, value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (!getGlobalScope()) {\n                            return [2 /*return*/, false];\n                        }\n                        CookieStorage.testValue = String(Date.now());\n                        testStrorage = new CookieStorage(this.options);\n                        testKey = 'AMP_TEST';\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, 5, 7]);\n                        return [4 /*yield*/, testStrorage.set(testKey, CookieStorage.testValue)];\n                    case 2:\n                        _b.sent();\n                        return [4 /*yield*/, testStrorage.get(testKey)];\n                    case 3:\n                        value = _b.sent();\n                        return [2 /*return*/, value === CookieStorage.testValue];\n                    case 4:\n                        _a = _b.sent();\n                        /* istanbul ignore next */\n                        return [2 /*return*/, false];\n                    case 5: return [4 /*yield*/, testStrorage.remove(testKey)];\n                    case 6:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getRaw(key)];\n                    case 1:\n                        value = _a.sent();\n                        if (!value) {\n                            return [2 /*return*/, undefined];\n                        }\n                        try {\n                            try {\n                                value = decodeURIComponent(atob(value));\n                            }\n                            catch (_b) {\n                                // value not encoded\n                            }\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                            return [2 /*return*/, JSON.parse(value)];\n                        }\n                        catch (_c) {\n                            /* istanbul ignore next */\n                            return [2 /*return*/, undefined];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.getRaw = function (key) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var globalScope, cookie, match;\n            return __generator(this, function (_b) {\n                globalScope = getGlobalScope();\n                cookie = (_a = globalScope === null || globalScope === void 0 ? void 0 : globalScope.document.cookie.split('; ')) !== null && _a !== void 0 ? _a : [];\n                match = cookie.find(function (c) { return c.indexOf(key + '=') === 0; });\n                if (!match) {\n                    return [2 /*return*/, undefined];\n                }\n                return [2 /*return*/, match.substring(key.length + 1)];\n            });\n        });\n    };\n    CookieStorage.prototype.set = function (key, value) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var expirationDays, expires, expireDate, date, str, globalScope;\n            return __generator(this, function (_b) {\n                try {\n                    expirationDays = (_a = this.options.expirationDays) !== null && _a !== void 0 ? _a : 0;\n                    expires = value !== null ? expirationDays : -1;\n                    expireDate = undefined;\n                    if (expires) {\n                        date = new Date();\n                        date.setTime(date.getTime() + expires * 24 * 60 * 60 * 1000);\n                        expireDate = date;\n                    }\n                    str = \"\".concat(key, \"=\").concat(btoa(encodeURIComponent(JSON.stringify(value))));\n                    if (expireDate) {\n                        str += \"; expires=\".concat(expireDate.toUTCString());\n                    }\n                    str += '; path=/';\n                    if (this.options.domain) {\n                        str += \"; domain=\".concat(this.options.domain);\n                    }\n                    if (this.options.secure) {\n                        str += '; Secure';\n                    }\n                    if (this.options.sameSite) {\n                        str += \"; SameSite=\".concat(this.options.sameSite);\n                    }\n                    globalScope = getGlobalScope();\n                    if (globalScope) {\n                        globalScope.document.cookie = str;\n                    }\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    CookieStorage.prototype.remove = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.set(key, null)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CookieStorage.prototype.reset = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    return CookieStorage;\n}());\nexport { CookieStorage };\n//# sourceMappingURL=cookie.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar FetchTransport = /** @class */ (function (_super) {\n    __extends(FetchTransport, _super);\n    function FetchTransport() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FetchTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var options, response, responseText;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (typeof fetch === 'undefined') {\n                            throw new Error('FetchTransport is not supported');\n                        }\n                        options = {\n                            headers: {\n                                'Content-Type': 'application/json',\n                                Accept: '*/*',\n                            },\n                            body: JSON.stringify(payload),\n                            method: 'POST',\n                        };\n                        return [4 /*yield*/, fetch(serverUrl, options)];\n                    case 1:\n                        response = _a.sent();\n                        return [4 /*yield*/, response.text()];\n                    case 2:\n                        responseText = _a.sent();\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                            return [2 /*return*/, this.buildResponse(JSON.parse(responseText))];\n                        }\n                        catch (_b) {\n                            return [2 /*return*/, this.buildResponse({ code: response.status })];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return FetchTransport;\n}(BaseTransport));\nexport { FetchTransport };\n//# sourceMappingURL=fetch.js.map","export var omitUndefined = function (input) {\n    var obj = {};\n    for (var key in input) {\n        var val = input[key];\n        if (val) {\n            obj[key] = val;\n        }\n    }\n    return obj;\n};\n//# sourceMappingURL=utils.js.map","import { __assign, __awaiter, __generator, __read, __spreadArray } from \"tslib\";\nimport { CampaignParser, getGlobalScope } from '@amplitude/analytics-client-common';\nimport { IdentifyOperation, PluginType, } from '@amplitude/analytics-types';\nimport { BASE_CAMPAIGN } from '@amplitude/analytics-client-common';\nimport { omitUndefined } from './utils';\nexport var pageViewTrackingPlugin = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var amplitude;\n    var options = {};\n    var globalScope = getGlobalScope();\n    var loggerProvider = undefined;\n    var pushState;\n    var _a = __read(args, 2), clientOrOptions = _a[0], configOrUndefined = _a[1];\n    if (clientOrOptions && 'init' in clientOrOptions) {\n        amplitude = clientOrOptions;\n        if (configOrUndefined) {\n            options = configOrUndefined;\n        }\n    }\n    else if (clientOrOptions) {\n        options = clientOrOptions;\n    }\n    var createPageViewEvent = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var _a;\n        var _b;\n        var _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    _b = {\n                        event_type: (_c = options.eventType) !== null && _c !== void 0 ? _c : 'Page View'\n                    };\n                    _a = [{}];\n                    return [4 /*yield*/, getCampaignParams()];\n                case 1: return [2 /*return*/, (_b.event_properties = __assign.apply(void 0, [__assign.apply(void 0, _a.concat([(_d.sent())])), { page_domain: /* istanbul ignore next */ (typeof location !== 'undefined' && location.hostname) || '', page_location: /* istanbul ignore next */ (typeof location !== 'undefined' && location.href) || '', page_path: /* istanbul ignore next */ (typeof location !== 'undefined' && location.pathname) || '', page_title: /* istanbul ignore next */ (typeof document !== 'undefined' && document.title) || '', page_url: /* istanbul ignore next */ (typeof location !== 'undefined' && location.href.split('?')[0]) || '' }]),\n                        _b)];\n            }\n        });\n    }); };\n    var shouldTrackOnPageLoad = function () {\n        return typeof options.trackOn === 'undefined' || (typeof options.trackOn === 'function' && options.trackOn());\n    };\n    /* istanbul ignore next */\n    var previousURL = typeof location !== 'undefined' ? location.href : null;\n    var trackHistoryPageView = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var newURL, shouldTrackPageView, _a, _b, _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    newURL = location.href;\n                    shouldTrackPageView = shouldTrackHistoryPageView(options.trackHistoryChanges, newURL, previousURL || '') && shouldTrackOnPageLoad();\n                    // Note: Update `previousURL` in the same clock tick as `shouldTrackHistoryPageView()`\n                    // This was previously done after `amplitude?.track(await createPageViewEvent());` and\n                    // causes a concurrency issue where app triggers `pushState` twice with the same URL target\n                    // but `previousURL` is only updated after the second `pushState` producing two page viewed events\n                    previousURL = newURL;\n                    if (!shouldTrackPageView) return [3 /*break*/, 4];\n                    /* istanbul ignore next */\n                    loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.log('Tracking page view event');\n                    if (!(amplitude === null || amplitude === void 0)) return [3 /*break*/, 1];\n                    _a = void 0;\n                    return [3 /*break*/, 3];\n                case 1:\n                    _c = (_b = amplitude).track;\n                    return [4 /*yield*/, createPageViewEvent()];\n                case 2:\n                    _a = _c.apply(_b, [_d.sent()]);\n                    _d.label = 3;\n                case 3:\n                    _a;\n                    _d.label = 4;\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    /* istanbul ignore next */\n    var trackHistoryPageViewWrapper = function () {\n        void trackHistoryPageView();\n    };\n    var plugin = {\n        name: 'page-view-tracking',\n        type: PluginType.ENRICHMENT,\n        setup: function (config, client) { return __awaiter(void 0, void 0, void 0, function () {\n            var receivedType, _a, _b;\n            var _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        amplitude = amplitude !== null && amplitude !== void 0 ? amplitude : client;\n                        if (!amplitude) {\n                            receivedType = clientOrOptions ? 'Options' : 'undefined';\n                            config.loggerProvider.error(\"Argument of type '\".concat(receivedType, \"' is not assignable to parameter of type 'BrowserClient'.\"));\n                            return [2 /*return*/];\n                        }\n                        loggerProvider = config.loggerProvider;\n                        loggerProvider.log('Installing @amplitude/plugin-page-view-tracking-browser');\n                        options.trackOn = ((_c = config.attribution) === null || _c === void 0 ? void 0 : _c.trackPageViews) ? 'attribution' : options.trackOn;\n                        if (!client && ((_d = config.attribution) === null || _d === void 0 ? void 0 : _d.trackPageViews)) {\n                            loggerProvider.warn(\"@amplitude/plugin-page-view-tracking-browser overrides page view tracking behavior defined in @amplitude/analytics-browser. Resolve by disabling page view tracking in @amplitude/analytics-browser.\");\n                            config.attribution.trackPageViews = false;\n                        }\n                        if (options.trackHistoryChanges && globalScope) {\n                            /* istanbul ignore next */\n                            globalScope.addEventListener('popstate', trackHistoryPageViewWrapper);\n                            // Save reference to original push state, to be used in teardown\n                            // eslint-disable-next-line @typescript-eslint/unbound-method\n                            pushState = globalScope.history.pushState;\n                            /* istanbul ignore next */\n                            // There is no global browser listener for changes to history, so we have\n                            // to modify pushState directly.\n                            // https://stackoverflow.com/a/64927639\n                            // eslint-disable-next-line @typescript-eslint/unbound-method\n                            globalScope.history.pushState = new Proxy(globalScope.history.pushState, {\n                                apply: function (target, thisArg, _a) {\n                                    var _b = __read(_a, 3), state = _b[0], unused = _b[1], url = _b[2];\n                                    target.apply(thisArg, [state, unused, url]);\n                                    void trackHistoryPageView();\n                                },\n                            });\n                        }\n                        if (!shouldTrackOnPageLoad()) return [3 /*break*/, 2];\n                        loggerProvider.log('Tracking page view event');\n                        _b = (_a = amplitude).track;\n                        return [4 /*yield*/, createPageViewEvent()];\n                    case 1:\n                        _b.apply(_a, [_e.sent()]);\n                        _e.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        }); },\n        execute: function (event) { return __awaiter(void 0, void 0, void 0, function () {\n            var pageViewEvent;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(options.trackOn === 'attribution' && isCampaignEvent(event))) return [3 /*break*/, 2];\n                        /* istanbul ignore next */ // loggerProvider should be defined by the time execute is invoked\n                        loggerProvider === null || loggerProvider === void 0 ? void 0 : loggerProvider.log('Enriching campaign event to page view event with campaign parameters');\n                        return [4 /*yield*/, createPageViewEvent()];\n                    case 1:\n                        pageViewEvent = _a.sent();\n                        event.event_type = pageViewEvent.event_type;\n                        event.event_properties = __assign(__assign({}, event.event_properties), pageViewEvent.event_properties);\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, event];\n                }\n            });\n        }); },\n        teardown: function () { return __awaiter(void 0, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (globalScope) {\n                    globalScope.removeEventListener('popstate', trackHistoryPageViewWrapper);\n                    if (pushState) {\n                        globalScope.history.pushState = pushState;\n                    }\n                }\n                return [2 /*return*/];\n            });\n        }); },\n    };\n    // Required for unit tests\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    plugin.__trackHistoryPageView = trackHistoryPageView;\n    return plugin;\n};\nvar getCampaignParams = function () { return __awaiter(void 0, void 0, void 0, function () { var _a; return __generator(this, function (_b) {\n    switch (_b.label) {\n        case 0:\n            _a = omitUndefined;\n            return [4 /*yield*/, new CampaignParser().parse()];\n        case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n    }\n}); }); };\nvar isCampaignEvent = function (event) {\n    if (event.event_type === '$identify' && event.user_properties) {\n        var properties = event.user_properties;\n        var $set = properties[IdentifyOperation.SET] || {};\n        var $unset = properties[IdentifyOperation.UNSET] || {};\n        var userProperties_1 = __spreadArray(__spreadArray([], __read(Object.keys($set)), false), __read(Object.keys($unset)), false);\n        return Object.keys(BASE_CAMPAIGN).every(function (value) { return userProperties_1.includes(value); });\n    }\n    return false;\n};\nexport var shouldTrackHistoryPageView = function (trackingOption, newURL, oldURL) {\n    switch (trackingOption) {\n        case 'pathOnly':\n            return newURL.split('?')[0] !== oldURL.split('?')[0];\n        default:\n            return newURL !== oldURL;\n    }\n};\n//# sourceMappingURL=page-view-tracking.js.map","import { __assign, __read, __rest } from \"tslib\";\nimport { BASE_CAMPAIGN } from '@amplitude/analytics-client-common';\nimport { AMPLITUDE_PREFIX, createIdentifyEvent, Identify } from '@amplitude/analytics-core';\nexport var getStorageKey = function (apiKey, postKey, limit) {\n    if (postKey === void 0) { postKey = ''; }\n    if (limit === void 0) { limit = 10; }\n    return [AMPLITUDE_PREFIX, postKey, apiKey.substring(0, limit)].filter(Boolean).join('_');\n};\nvar domainWithoutSubdomain = function (domain) {\n    var parts = domain.split('.');\n    if (parts.length <= 2) {\n        return domain;\n    }\n    return parts.slice(parts.length - 2, parts.length).join('.');\n};\nexport var isNewCampaign = function (current, previous, options) {\n    var _a;\n    var referrer = current.referrer, referring_domain = current.referring_domain, currentCampaign = __rest(current, [\"referrer\", \"referring_domain\"]);\n    var _b = previous || {}, _previous_referrer = _b.referrer, prevReferringDomain = _b.referring_domain, previousCampaign = __rest(_b, [\"referrer\", \"referring_domain\"]);\n    if (current.referring_domain && ((_a = options.excludeReferrers) === null || _a === void 0 ? void 0 : _a.includes(current.referring_domain))) {\n        return false;\n    }\n    var hasNewCampaign = JSON.stringify(currentCampaign) !== JSON.stringify(previousCampaign);\n    var hasNewDomain = domainWithoutSubdomain(referring_domain || '') !== domainWithoutSubdomain(prevReferringDomain || '');\n    return !previous || hasNewCampaign || hasNewDomain;\n};\nexport var createCampaignEvent = function (campaign, options) {\n    var campaignParameters = __assign(__assign({}, BASE_CAMPAIGN), campaign);\n    var identifyEvent = Object.entries(campaignParameters).reduce(function (identify, _a) {\n        var _b;\n        var _c = __read(_a, 2), key = _c[0], value = _c[1];\n        identify.setOnce(\"initial_\".concat(key), (_b = value !== null && value !== void 0 ? value : options.initialEmptyValue) !== null && _b !== void 0 ? _b : 'EMPTY');\n        if (value) {\n            return identify.set(key, value);\n        }\n        return identify.unset(key);\n    }, new Identify());\n    return createIdentifyEvent(identifyEvent);\n};\n//# sourceMappingURL=helpers.js.map","import { __assign, __awaiter, __generator, __read } from \"tslib\";\nimport { CampaignParser } from '@amplitude/analytics-client-common';\nimport { PluginType, } from '@amplitude/analytics-types';\nimport { createCampaignEvent, getStorageKey, isNewCampaign } from './helpers';\nexport var webAttributionPlugin = function () {\n    var _this = this;\n    var _a;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var amplitude;\n    var options = {};\n    var _b = __read(args, 2), clientOrOptions = _b[0], configOrUndefined = _b[1];\n    if (clientOrOptions && 'init' in clientOrOptions) {\n        amplitude = clientOrOptions;\n        if (configOrUndefined) {\n            options = configOrUndefined;\n        }\n    }\n    else if (clientOrOptions) {\n        options = clientOrOptions;\n    }\n    var excludeReferrers = (_a = options.excludeReferrers) !== null && _a !== void 0 ? _a : [];\n    if (typeof location !== 'undefined') {\n        excludeReferrers.unshift(location.hostname);\n    }\n    options = __assign(__assign({ disabled: false, initialEmptyValue: 'EMPTY', resetSessionOnNewCampaign: false }, options), { excludeReferrers: excludeReferrers });\n    var plugin = {\n        name: 'web-attribution',\n        type: PluginType.BEFORE,\n        setup: function (config, client) {\n            var _a;\n            return __awaiter(this, void 0, void 0, function () {\n                var receivedType, storage, storageKey, _b, currentCampaign, previousCampaign, pluginEnabledOverride, campaignEvent;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0:\n                            amplitude = amplitude !== null && amplitude !== void 0 ? amplitude : client;\n                            if (!amplitude) {\n                                receivedType = clientOrOptions ? 'Options' : 'undefined';\n                                config.loggerProvider.error(\"Argument of type '\".concat(receivedType, \"' is not assignable to parameter of type 'BrowserClient'.\"));\n                                return [2 /*return*/];\n                            }\n                            if (options.disabled) {\n                                config.loggerProvider.log('@amplitude/plugin-web-attribution-browser is disabled. Attribution is not tracked.');\n                                return [2 /*return*/];\n                            }\n                            config.loggerProvider.log('Installing @amplitude/plugin-web-attribution-browser.');\n                            if (!client && !((_a = config.attribution) === null || _a === void 0 ? void 0 : _a.disabled)) {\n                                config.loggerProvider.warn('@amplitude/plugin-web-attribution-browser overrides web attribution behavior defined in @amplitude/analytics-browser. Resolve by disabling web attribution tracking in @amplitude/analytics-browser.');\n                                config.attribution = {\n                                    disabled: true,\n                                };\n                            }\n                            storage = config.cookieStorage;\n                            storageKey = getStorageKey(config.apiKey, 'MKTG');\n                            return [4 /*yield*/, Promise.all([\n                                    new CampaignParser().parse(),\n                                    storage.get(storageKey),\n                                ])];\n                        case 1:\n                            _b = __read.apply(void 0, [_c.sent(), 2]), currentCampaign = _b[0], previousCampaign = _b[1];\n                            pluginEnabledOverride = this.__pluginEnabledOverride;\n                            if (pluginEnabledOverride !== null && pluginEnabledOverride !== void 0 ? pluginEnabledOverride : isNewCampaign(currentCampaign, previousCampaign, options)) {\n                                if (options.resetSessionOnNewCampaign) {\n                                    amplitude.setSessionId(Date.now());\n                                    config.loggerProvider.log('Created a new session for new campaign.');\n                                }\n                                config.loggerProvider.log('Tracking attribution.');\n                                campaignEvent = createCampaignEvent(currentCampaign, options);\n                                amplitude.track(campaignEvent);\n                                void storage.set(storageKey, currentCampaign);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        execute: function (event) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n            return [2 /*return*/, event];\n        }); }); },\n    };\n    // For Amplitude-internal functionality\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    plugin.__pluginEnabledOverride = undefined;\n    return plugin;\n};\n//# sourceMappingURL=web-attribution.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-client-common';\nvar MAX_ARRAY_LENGTH = 1000;\nvar LocalStorage = /** @class */ (function () {\n    function LocalStorage(config) {\n        this.loggerProvider = config === null || config === void 0 ? void 0 : config.loggerProvider;\n    }\n    LocalStorage.prototype.isEnabled = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var random, testStorage, testKey, value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        /* istanbul ignore if */\n                        if (!getGlobalScope()) {\n                            return [2 /*return*/, false];\n                        }\n                        random = String(Date.now());\n                        testStorage = new LocalStorage();\n                        testKey = 'AMP_TEST';\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, 5, 7]);\n                        return [4 /*yield*/, testStorage.set(testKey, random)];\n                    case 2:\n                        _b.sent();\n                        return [4 /*yield*/, testStorage.get(testKey)];\n                    case 3:\n                        value = _b.sent();\n                        return [2 /*return*/, value === random];\n                    case 4:\n                        _a = _b.sent();\n                        /* istanbul ignore next */\n                        return [2 /*return*/, false];\n                    case 5: return [4 /*yield*/, testStorage.remove(testKey)];\n                    case 6:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    LocalStorage.prototype.get = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.getRaw(key)];\n                    case 1:\n                        value = _b.sent();\n                        if (!value) {\n                            return [2 /*return*/, undefined];\n                        }\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                        return [2 /*return*/, JSON.parse(value)];\n                    case 2:\n                        _a = _b.sent();\n                        /* istanbul ignore next */\n                        return [2 /*return*/, undefined];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    LocalStorage.prototype.getRaw = function (key) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                return [2 /*return*/, ((_a = getGlobalScope()) === null || _a === void 0 ? void 0 : _a.localStorage.getItem(key)) || undefined];\n            });\n        });\n    };\n    LocalStorage.prototype.set = function (key, value) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var isExceededArraySize, serializedValue, droppedEventsCount;\n            return __generator(this, function (_c) {\n                isExceededArraySize = Array.isArray(value) && value.length > MAX_ARRAY_LENGTH;\n                try {\n                    serializedValue = isExceededArraySize\n                        ? JSON.stringify(value.slice(0, MAX_ARRAY_LENGTH))\n                        : JSON.stringify(value);\n                    (_a = getGlobalScope()) === null || _a === void 0 ? void 0 : _a.localStorage.setItem(key, serializedValue);\n                }\n                catch (_d) {\n                    //\n                }\n                if (isExceededArraySize) {\n                    droppedEventsCount = value.length - MAX_ARRAY_LENGTH;\n                    (_b = this.loggerProvider) === null || _b === void 0 ? void 0 : _b.error(\"Failed to save \".concat(droppedEventsCount, \" events because the queue length exceeded \").concat(MAX_ARRAY_LENGTH, \".\"));\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    LocalStorage.prototype.remove = function (key) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                try {\n                    (_a = getGlobalScope()) === null || _a === void 0 ? void 0 : _a.localStorage.removeItem(key);\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    LocalStorage.prototype.reset = function () {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                try {\n                    (_a = getGlobalScope()) === null || _a === void 0 ? void 0 : _a.localStorage.clear();\n                }\n                catch (_c) {\n                    //\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return LocalStorage;\n}());\nexport { LocalStorage };\n//# sourceMappingURL=local-storage.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar XHRTransport = /** @class */ (function (_super) {\n    __extends(XHRTransport, _super);\n    function XHRTransport() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            done: 4,\n        };\n        return _this;\n    }\n    XHRTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        /* istanbul ignore if */\n                        if (typeof XMLHttpRequest === 'undefined') {\n                            reject(new Error('XHRTransport is not supported.'));\n                        }\n                        var xhr = new XMLHttpRequest();\n                        xhr.open('POST', serverUrl, true);\n                        xhr.onreadystatechange = function () {\n                            if (xhr.readyState === _this.state.done) {\n                                var responseText = xhr.responseText;\n                                try {\n                                    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                                    resolve(_this.buildResponse(JSON.parse(responseText)));\n                                }\n                                catch (_a) {\n                                    resolve(_this.buildResponse({ code: xhr.status }));\n                                }\n                            }\n                        };\n                        xhr.setRequestHeader('Content-Type', 'application/json');\n                        xhr.setRequestHeader('Accept', '*/*');\n                        xhr.send(JSON.stringify(payload));\n                    })];\n            });\n        });\n    };\n    return XHRTransport;\n}(BaseTransport));\nexport { XHRTransport };\n//# sourceMappingURL=xhr.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { getGlobalScope } from '@amplitude/analytics-client-common';\nimport { BaseTransport } from '@amplitude/analytics-core';\nvar SendBeaconTransport = /** @class */ (function (_super) {\n    __extends(SendBeaconTransport, _super);\n    function SendBeaconTransport() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SendBeaconTransport.prototype.send = function (serverUrl, payload) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var globalScope = getGlobalScope();\n                        /* istanbul ignore if */\n                        if (!(globalScope === null || globalScope === void 0 ? void 0 : globalScope.navigator.sendBeacon)) {\n                            throw new Error('SendBeaconTransport is not supported');\n                        }\n                        try {\n                            var data = JSON.stringify(payload);\n                            var success = globalScope.navigator.sendBeacon(serverUrl, JSON.stringify(payload));\n                            if (success) {\n                                return resolve(_this.buildResponse({\n                                    code: 200,\n                                    events_ingested: payload.events.length,\n                                    payload_size_bytes: data.length,\n                                    server_upload_time: Date.now(),\n                                }));\n                            }\n                            return resolve(_this.buildResponse({ code: 500 }));\n                        }\n                        catch (e) {\n                            reject(e);\n                        }\n                    })];\n            });\n        });\n    };\n    return SendBeaconTransport;\n}(BaseTransport));\nexport { SendBeaconTransport };\n//# sourceMappingURL=send-beacon.js.map","export var VERSION = '1.14.0';\n//# sourceMappingURL=version.js.map","import { __assign, __awaiter, __extends, __generator, __values } from \"tslib\";\nimport { TransportType, } from '@amplitude/analytics-types';\nimport { Config, MemoryStorage, UUID } from '@amplitude/analytics-core';\nimport { CookieStorage, getCookieName, FetchTransport } from '@amplitude/analytics-client-common';\nimport { LocalStorage } from './storage/local-storage';\nimport { XHRTransport } from './transports/xhr';\nimport { SendBeaconTransport } from './transports/send-beacon';\nimport { VERSION } from './version';\nexport var getDefaultConfig = function () {\n    var cookieStorage = new MemoryStorage();\n    var trackingOptions = {\n        deviceManufacturer: true,\n        deviceModel: true,\n        ipAddress: true,\n        language: true,\n        osName: true,\n        osVersion: true,\n        platform: true,\n    };\n    return {\n        cookieExpiration: 365,\n        cookieSameSite: 'Lax',\n        cookieSecure: false,\n        cookieStorage: cookieStorage,\n        cookieUpgrade: true,\n        disableCookies: false,\n        domain: '',\n        sessionTimeout: 30 * 60 * 1000,\n        trackingOptions: trackingOptions,\n        transportProvider: new FetchTransport(),\n    };\n};\nvar BrowserConfig = /** @class */ (function (_super) {\n    __extends(BrowserConfig, _super);\n    function BrowserConfig(apiKey, options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        var defaultConfig = getDefaultConfig();\n        _this = _super.call(this, __assign(__assign({ flushIntervalMillis: 1000, flushMaxRetries: 5, flushQueueSize: 30, transportProvider: defaultConfig.transportProvider }, options), { apiKey: apiKey })) || this;\n        _this.version = VERSION;\n        _this._optOut = false;\n        // NOTE: Define `cookieStorage` first to persist user session\n        // user session properties expect `cookieStorage` to be defined\n        _this.cookieStorage = (_a = options === null || options === void 0 ? void 0 : options.cookieStorage) !== null && _a !== void 0 ? _a : defaultConfig.cookieStorage;\n        _this.deviceId = options === null || options === void 0 ? void 0 : options.deviceId;\n        _this.lastEventId = options === null || options === void 0 ? void 0 : options.lastEventId;\n        _this.lastEventTime = options === null || options === void 0 ? void 0 : options.lastEventTime;\n        _this.optOut = Boolean(options === null || options === void 0 ? void 0 : options.optOut);\n        _this.sessionId = options === null || options === void 0 ? void 0 : options.sessionId;\n        _this.userId = options === null || options === void 0 ? void 0 : options.userId;\n        _this.appVersion = options === null || options === void 0 ? void 0 : options.appVersion;\n        _this.attribution = options === null || options === void 0 ? void 0 : options.attribution;\n        _this.cookieExpiration = (_b = options === null || options === void 0 ? void 0 : options.cookieExpiration) !== null && _b !== void 0 ? _b : defaultConfig.cookieExpiration;\n        _this.cookieSameSite = (_c = options === null || options === void 0 ? void 0 : options.cookieSameSite) !== null && _c !== void 0 ? _c : defaultConfig.cookieSameSite;\n        _this.cookieSecure = (_d = options === null || options === void 0 ? void 0 : options.cookieSecure) !== null && _d !== void 0 ? _d : defaultConfig.cookieSecure;\n        _this.cookieUpgrade = (_e = options === null || options === void 0 ? void 0 : options.cookieUpgrade) !== null && _e !== void 0 ? _e : defaultConfig.cookieUpgrade;\n        _this.defaultTracking = options === null || options === void 0 ? void 0 : options.defaultTracking;\n        _this.disableCookies = (_f = options === null || options === void 0 ? void 0 : options.disableCookies) !== null && _f !== void 0 ? _f : defaultConfig.disableCookies;\n        _this.defaultTracking = options === null || options === void 0 ? void 0 : options.defaultTracking;\n        _this.domain = (_g = options === null || options === void 0 ? void 0 : options.domain) !== null && _g !== void 0 ? _g : defaultConfig.domain;\n        _this.partnerId = options === null || options === void 0 ? void 0 : options.partnerId;\n        _this.sessionTimeout = (_h = options === null || options === void 0 ? void 0 : options.sessionTimeout) !== null && _h !== void 0 ? _h : defaultConfig.sessionTimeout;\n        _this.trackingOptions = (_j = options === null || options === void 0 ? void 0 : options.trackingOptions) !== null && _j !== void 0 ? _j : defaultConfig.trackingOptions;\n        return _this;\n    }\n    Object.defineProperty(BrowserConfig.prototype, \"deviceId\", {\n        get: function () {\n            return this._deviceId;\n        },\n        set: function (deviceId) {\n            if (this._deviceId !== deviceId) {\n                this._deviceId = deviceId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"userId\", {\n        get: function () {\n            return this._userId;\n        },\n        set: function (userId) {\n            if (this._userId !== userId) {\n                this._userId = userId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"sessionId\", {\n        get: function () {\n            return this._sessionId;\n        },\n        set: function (sessionId) {\n            if (this._sessionId !== sessionId) {\n                this._sessionId = sessionId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"optOut\", {\n        get: function () {\n            return this._optOut;\n        },\n        set: function (optOut) {\n            if (this._optOut !== optOut) {\n                this._optOut = optOut;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"lastEventTime\", {\n        get: function () {\n            return this._lastEventTime;\n        },\n        set: function (lastEventTime) {\n            if (this._lastEventTime !== lastEventTime) {\n                this._lastEventTime = lastEventTime;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserConfig.prototype, \"lastEventId\", {\n        get: function () {\n            return this._lastEventId;\n        },\n        set: function (lastEventId) {\n            if (this._lastEventId !== lastEventId) {\n                this._lastEventId = lastEventId;\n                this.updateStorage();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BrowserConfig.prototype.updateStorage = function () {\n        var _a;\n        var cache = {\n            deviceId: this._deviceId,\n            userId: this._userId,\n            sessionId: this._sessionId,\n            optOut: this._optOut,\n            lastEventTime: this._lastEventTime,\n            lastEventId: this._lastEventId,\n        };\n        void ((_a = this.cookieStorage) === null || _a === void 0 ? void 0 : _a.set(getCookieName(this.apiKey), cache));\n    };\n    return BrowserConfig;\n}(Config));\nexport { BrowserConfig };\nexport var useBrowserConfig = function (apiKey, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var defaultConfig, deviceId, lastEventId, lastEventTime, optOut, sessionId, userId, cookieStorage, domain, _a, _b, _c;\n    var _d;\n    var _e, _f;\n    return __generator(this, function (_g) {\n        switch (_g.label) {\n            case 0:\n                defaultConfig = getDefaultConfig();\n                deviceId = (_e = options === null || options === void 0 ? void 0 : options.deviceId) !== null && _e !== void 0 ? _e : UUID();\n                lastEventId = options === null || options === void 0 ? void 0 : options.lastEventId;\n                lastEventTime = options === null || options === void 0 ? void 0 : options.lastEventTime;\n                optOut = options === null || options === void 0 ? void 0 : options.optOut;\n                sessionId = options === null || options === void 0 ? void 0 : options.sessionId;\n                userId = options === null || options === void 0 ? void 0 : options.userId;\n                cookieStorage = options === null || options === void 0 ? void 0 : options.cookieStorage;\n                domain = options === null || options === void 0 ? void 0 : options.domain;\n                _a = BrowserConfig.bind;\n                _b = [void 0, apiKey];\n                _c = [__assign({}, options)];\n                _d = { cookieStorage: cookieStorage, deviceId: deviceId, domain: domain, lastEventId: lastEventId, lastEventTime: lastEventTime, optOut: optOut, sessionId: sessionId };\n                return [4 /*yield*/, createEventsStorage(options)];\n            case 1: return [2 /*return*/, new (_a.apply(BrowserConfig, _b.concat([__assign.apply(void 0, _c.concat([(_d.storageProvider = _g.sent(), _d.trackingOptions = __assign(__assign({}, defaultConfig.trackingOptions), options === null || options === void 0 ? void 0 : options.trackingOptions), _d.transportProvider = (_f = options === null || options === void 0 ? void 0 : options.transportProvider) !== null && _f !== void 0 ? _f : createTransport(options === null || options === void 0 ? void 0 : options.transport), _d.userId = userId, _d)]))])))()];\n        }\n    });\n}); };\nexport var createCookieStorage = function (overrides, baseConfig) {\n    if (baseConfig === void 0) { baseConfig = getDefaultConfig(); }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var options, cookieStorage, _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    options = __assign(__assign({}, baseConfig), overrides);\n                    cookieStorage = overrides === null || overrides === void 0 ? void 0 : overrides.cookieStorage;\n                    _a = !cookieStorage;\n                    if (_a) return [3 /*break*/, 2];\n                    return [4 /*yield*/, cookieStorage.isEnabled()];\n                case 1:\n                    _a = !(_b.sent());\n                    _b.label = 2;\n                case 2:\n                    if (_a) {\n                        return [2 /*return*/, createFlexibleStorage(options)];\n                    }\n                    return [2 /*return*/, cookieStorage];\n            }\n        });\n    });\n};\nvar createFlexibleStorage = function (options) { return __awaiter(void 0, void 0, void 0, function () {\n    var storage, _a;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                storage = new CookieStorage({\n                    domain: options.domain,\n                    expirationDays: options.cookieExpiration,\n                    sameSite: options.cookieSameSite,\n                    secure: options.cookieSecure,\n                });\n                _a = options.disableCookies;\n                if (_a) return [3 /*break*/, 2];\n                return [4 /*yield*/, storage.isEnabled()];\n            case 1:\n                _a = !(_b.sent());\n                _b.label = 2;\n            case 2:\n                if (!_a) return [3 /*break*/, 4];\n                storage = new LocalStorage();\n                return [4 /*yield*/, storage.isEnabled()];\n            case 3:\n                if (!(_b.sent())) {\n                    storage = new MemoryStorage();\n                }\n                _b.label = 4;\n            case 4: return [2 /*return*/, storage];\n        }\n    });\n}); };\nexport var createEventsStorage = function (overrides) { return __awaiter(void 0, void 0, void 0, function () {\n    var hasStorageProviderProperty, loggerProvider, _a, _b, storage, _c, e_1_1;\n    var e_1, _d;\n    return __generator(this, function (_e) {\n        switch (_e.label) {\n            case 0:\n                hasStorageProviderProperty = overrides && Object.prototype.hasOwnProperty.call(overrides, 'storageProvider');\n                loggerProvider = overrides && overrides.loggerProvider;\n                if (!(!hasStorageProviderProperty || overrides.storageProvider)) return [3 /*break*/, 9];\n                _e.label = 1;\n            case 1:\n                _e.trys.push([1, 7, 8, 9]);\n                _a = __values([overrides === null || overrides === void 0 ? void 0 : overrides.storageProvider, new LocalStorage({ loggerProvider: loggerProvider })]), _b = _a.next();\n                _e.label = 2;\n            case 2:\n                if (!!_b.done) return [3 /*break*/, 6];\n                storage = _b.value;\n                _c = storage;\n                if (!_c) return [3 /*break*/, 4];\n                return [4 /*yield*/, storage.isEnabled()];\n            case 3:\n                _c = (_e.sent());\n                _e.label = 4;\n            case 4:\n                if (_c) {\n                    return [2 /*return*/, storage];\n                }\n                _e.label = 5;\n            case 5:\n                _b = _a.next();\n                return [3 /*break*/, 2];\n            case 6: return [3 /*break*/, 9];\n            case 7:\n                e_1_1 = _e.sent();\n                e_1 = { error: e_1_1 };\n                return [3 /*break*/, 9];\n            case 8:\n                try {\n                    if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n                }\n                finally { if (e_1) throw e_1.error; }\n                return [7 /*endfinally*/];\n            case 9: return [2 /*return*/, undefined];\n        }\n    });\n}); };\nexport var createTransport = function (transport) {\n    if (transport === TransportType.XHR) {\n        return new XHRTransport();\n    }\n    if (transport === TransportType.SendBeacon) {\n        return new SendBeaconTransport();\n    }\n    return getDefaultConfig().transportProvider;\n};\nexport var getTopLevelDomain = function (url) { return __awaiter(void 0, void 0, void 0, function () {\n    var host, parts, levels, storageKey, i, i, domain, options, storage, value;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, new CookieStorage().isEnabled()];\n            case 1:\n                if (!(_a.sent()) ||\n                    (!url && (typeof location === 'undefined' || !location.hostname))) {\n                    return [2 /*return*/, ''];\n                }\n                host = url !== null && url !== void 0 ? url : location.hostname;\n                parts = host.split('.');\n                levels = [];\n                storageKey = 'AMP_TLDTEST';\n                for (i = parts.length - 2; i >= 0; --i) {\n                    levels.push(parts.slice(i).join('.'));\n                }\n                i = 0;\n                _a.label = 2;\n            case 2:\n                if (!(i < levels.length)) return [3 /*break*/, 7];\n                domain = levels[i];\n                options = { domain: '.' + domain };\n                storage = new CookieStorage(options);\n                return [4 /*yield*/, storage.set(storageKey, 1)];\n            case 3:\n                _a.sent();\n                return [4 /*yield*/, storage.get(storageKey)];\n            case 4:\n                value = _a.sent();\n                if (!value) return [3 /*break*/, 6];\n                return [4 /*yield*/, storage.remove(storageKey)];\n            case 5:\n                _a.sent();\n                return [2 /*return*/, '.' + domain];\n            case 6:\n                i++;\n                return [3 /*break*/, 2];\n            case 7: return [2 /*return*/, ''];\n        }\n    });\n}); };\n//# sourceMappingURL=config.js.map","export var DEFAULT_EVENT_PREFIX = '[Amplitude]';\nexport var DEFAULT_PAGE_VIEW_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Page Viewed\");\nexport var DEFAULT_FORM_START_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Started\");\nexport var DEFAULT_FORM_SUBMIT_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Submitted\");\nexport var DEFAULT_FILE_DOWNLOAD_EVENT = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Downloaded\");\nexport var DEFAULT_SESSION_START_EVENT = 'session_start';\nexport var DEFAULT_SESSION_END_EVENT = 'session_end';\nexport var FILE_EXTENSION = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Extension\");\nexport var FILE_NAME = \"\".concat(DEFAULT_EVENT_PREFIX, \" File Name\");\nexport var LINK_ID = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link ID\");\nexport var LINK_TEXT = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link Text\");\nexport var LINK_URL = \"\".concat(DEFAULT_EVENT_PREFIX, \" Link URL\");\nexport var FORM_ID = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form ID\");\nexport var FORM_NAME = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Name\");\nexport var FORM_DESTINATION = \"\".concat(DEFAULT_EVENT_PREFIX, \" Form Destination\");\n//# sourceMappingURL=constants.js.map","import { __awaiter, __generator, __read } from \"tslib\";\nimport { getOldCookieName } from '@amplitude/analytics-client-common';\nimport { createCookieStorage, getDefaultConfig } from '../config';\nexport var parseLegacyCookies = function (apiKey, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var storage, oldCookieName, cookies, _a, deviceId, userId, optOut, sessionId, lastEventTime, lastEventId;\n    var _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0: return [4 /*yield*/, createCookieStorage(options)];\n            case 1:\n                storage = _c.sent();\n                oldCookieName = getOldCookieName(apiKey);\n                return [4 /*yield*/, storage.getRaw(oldCookieName)];\n            case 2:\n                cookies = _c.sent();\n                if (!cookies) {\n                    return [2 /*return*/, {\n                            optOut: false,\n                        }];\n                }\n                if (!((_b = options.cookieUpgrade) !== null && _b !== void 0 ? _b : getDefaultConfig().cookieUpgrade)) return [3 /*break*/, 4];\n                return [4 /*yield*/, storage.remove(oldCookieName)];\n            case 3:\n                _c.sent();\n                _c.label = 4;\n            case 4:\n                _a = __read(cookies.split('.'), 6), deviceId = _a[0], userId = _a[1], optOut = _a[2], sessionId = _a[3], lastEventTime = _a[4], lastEventId = _a[5];\n                return [2 /*return*/, {\n                        deviceId: deviceId,\n                        userId: decode(userId),\n                        sessionId: parseTime(sessionId),\n                        lastEventId: parseTime(lastEventId),\n                        lastEventTime: parseTime(lastEventTime),\n                        optOut: Boolean(optOut),\n                    }];\n        }\n    });\n}); };\nexport var parseTime = function (num) {\n    var integer = parseInt(num, 32);\n    if (isNaN(integer)) {\n        return undefined;\n    }\n    return integer;\n};\nexport var decode = function (value) {\n    if (!atob || !escape || !value) {\n        return undefined;\n    }\n    try {\n        return decodeURIComponent(escape(atob(value)));\n    }\n    catch (_a) {\n        return undefined;\n    }\n};\n//# sourceMappingURL=index.js.map","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v0.7.33\n   Copyright  2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License */ /*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment.\n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n  \"use strict\";\n\n  //////////////\n  // Constants\n  /////////////\n\n  var LIBVERSION = \"0.7.33\",\n    EMPTY = \"\",\n    UNKNOWN = \"?\",\n    FUNC_TYPE = \"function\",\n    UNDEF_TYPE = \"undefined\",\n    OBJ_TYPE = \"object\",\n    STR_TYPE = \"string\",\n    MAJOR = \"major\",\n    MODEL = \"model\",\n    NAME = \"name\",\n    TYPE = \"type\",\n    VENDOR = \"vendor\",\n    VERSION = \"version\",\n    ARCHITECTURE = \"architecture\",\n    CONSOLE = \"console\",\n    MOBILE = \"mobile\",\n    TABLET = \"tablet\",\n    SMARTTV = \"smarttv\",\n    WEARABLE = \"wearable\",\n    EMBEDDED = \"embedded\",\n    UA_MAX_LENGTH = 350;\n\n  var AMAZON = \"Amazon\",\n    APPLE = \"Apple\",\n    ASUS = \"ASUS\",\n    BLACKBERRY = \"BlackBerry\",\n    BROWSER = \"Browser\",\n    CHROME = \"Chrome\",\n    EDGE = \"Edge\",\n    FIREFOX = \"Firefox\",\n    GOOGLE = \"Google\",\n    HUAWEI = \"Huawei\",\n    LG = \"LG\",\n    MICROSOFT = \"Microsoft\",\n    MOTOROLA = \"Motorola\",\n    OPERA = \"Opera\",\n    SAMSUNG = \"Samsung\",\n    SHARP = \"Sharp\",\n    SONY = \"Sony\",\n    XIAOMI = \"Xiaomi\",\n    ZEBRA = \"Zebra\",\n    FACEBOOK = \"Facebook\";\n\n  ///////////\n  // Helper\n  //////////\n\n  var extend = function (regexes, extensions) {\n      var mergedRegexes = {};\n      for (var i in regexes) {\n        if (extensions[i] && extensions[i].length % 2 === 0) {\n          mergedRegexes[i] = extensions[i].concat(regexes[i]);\n        } else {\n          mergedRegexes[i] = regexes[i];\n        }\n      }\n      return mergedRegexes;\n    },\n    enumerize = function (arr) {\n      var enums = {};\n      for (var i = 0; i < arr.length; i++) {\n        enums[arr[i].toUpperCase()] = arr[i];\n      }\n      return enums;\n    },\n    has = function (str1, str2) {\n      return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n    },\n    lowerize = function (str) {\n      return str.toLowerCase();\n    },\n    majorize = function (version) {\n      return typeof version === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split(\".\")[0] : undefined;\n    },\n    trim = function (str, len) {\n      if (typeof str === STR_TYPE) {\n        str = str.replace(/^\\s\\s*/, EMPTY);\n        return typeof len === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n      }\n    };\n\n  ///////////////\n  // Map helper\n  //////////////\n\n  var rgxMapper = function (ua, arrays) {\n      var i = 0,\n        j,\n        k,\n        p,\n        q,\n        matches,\n        match;\n\n      // loop through all regexes maps\n      while (i < arrays.length && !matches) {\n        var regex = arrays[i], // even sequence (0,2,4,..)\n          props = arrays[i + 1]; // odd sequence (1,3,5,..)\n        j = k = 0;\n\n        // try matching uastring with regexes\n        while (j < regex.length && !matches) {\n          matches = regex[j++].exec(ua);\n\n          if (!!matches) {\n            for (p = 0; p < props.length; p++) {\n              match = matches[++k];\n              q = props[p];\n              // check if given property is actually array\n              if (typeof q === OBJ_TYPE && q.length > 0) {\n                if (q.length === 2) {\n                  if (typeof q[1] == FUNC_TYPE) {\n                    // assign modified match\n                    this[q[0]] = q[1].call(this, match);\n                  } else {\n                    // assign given value, ignore regex match\n                    this[q[0]] = q[1];\n                  }\n                } else if (q.length === 3) {\n                  // check whether function or regex\n                  if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                    // call function (usually string mapper)\n                    this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                  } else {\n                    // sanitize match using given regex\n                    this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                  }\n                } else if (q.length === 4) {\n                  this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                }\n              } else {\n                this[q] = match ? match : undefined;\n              }\n            }\n          }\n        }\n        i += 2;\n      }\n    },\n    strMapper = function (str, map) {\n      for (var i in map) {\n        // check if current value is array\n        if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n          for (var j = 0; j < map[i].length; j++) {\n            if (has(map[i][j], str)) {\n              return i === UNKNOWN ? undefined : i;\n            }\n          }\n        } else if (has(map[i], str)) {\n          return i === UNKNOWN ? undefined : i;\n        }\n      }\n      return str;\n    };\n\n  ///////////////\n  // String map\n  //////////////\n\n  // Safari < 3.0\n  var oldSafariMap = {\n      \"1.0\": \"/8\",\n      1.2: \"/1\",\n      1.3: \"/3\",\n      \"2.0\": \"/412\",\n      \"2.0.2\": \"/416\",\n      \"2.0.3\": \"/417\",\n      \"2.0.4\": \"/419\",\n      \"?\": \"/\"\n    },\n    windowsVersionMap = {\n      ME: \"4.90\",\n      \"NT 3.11\": \"NT3.51\",\n      \"NT 4.0\": \"NT4.0\",\n      2000: \"NT 5.0\",\n      XP: [\"NT 5.1\", \"NT 5.2\"],\n      Vista: \"NT 6.0\",\n      7: \"NT 6.1\",\n      8: \"NT 6.2\",\n      8.1: \"NT 6.3\",\n      10: [\"NT 6.4\", \"NT 10.0\"],\n      RT: \"ARM\"\n    };\n\n  //////////////\n  // Regex map\n  /////////////\n\n  var regexes = {\n    browser: [\n      [\n        /\\b(?:crmo|crios)\\/([\\w\\.]+)/i // Chrome for Android/iOS\n      ],\n      [VERSION, [NAME, \"Chrome\"]],\n      [\n        /edg(?:e|ios|a)?\\/([\\w\\.]+)/i // Microsoft Edge\n      ],\n      [VERSION, [NAME, \"Edge\"]],\n      [\n        // Presto based\n        /(opera mini)\\/([-\\w\\.]+)/i, // Opera Mini\n        /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i, // Opera Mobi/Tablet\n        /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i // Opera\n      ],\n      [NAME, VERSION],\n      [\n        /opios[\\/ ]+([\\w\\.]+)/i // Opera mini on iphone >= 8.0\n      ],\n      [VERSION, [NAME, OPERA + \" Mini\"]],\n      [\n        /\\bopr\\/([\\w\\.]+)/i // Opera Webkit\n      ],\n      [VERSION, [NAME, OPERA]],\n      [\n        // Mixed\n        /(kindle)\\/([\\w\\.]+)/i, // Kindle\n        /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i, // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n        // Trident based\n        /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i, // Avant/IEMobile/SlimBrowser\n        /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i, // Baidu Browser\n        /(?:ms|\\()(ie) ([\\w\\.]+)/i, // Internet Explorer\n\n        // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n        /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,\n        // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n        /(weibo)__([\\d\\.]+)/i // Weibo\n      ],\n      [NAME, VERSION],\n      [\n        /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i // UCBrowser\n      ],\n      [VERSION, [NAME, \"UC\" + BROWSER]],\n      [\n        /microm.+\\bqbcore\\/([\\w\\.]+)/i, // WeChat Desktop for Windows Built-in Browser\n        /\\bqbcore\\/([\\w\\.]+).+microm/i\n      ],\n      [VERSION, [NAME, \"WeChat(Win) Desktop\"]],\n      [\n        /micromessenger\\/([\\w\\.]+)/i // WeChat\n      ],\n      [VERSION, [NAME, \"WeChat\"]],\n      [\n        /konqueror\\/([\\w\\.]+)/i // Konqueror\n      ],\n      [VERSION, [NAME, \"Konqueror\"]],\n      [\n        /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i // IE11\n      ],\n      [VERSION, [NAME, \"IE\"]],\n      [\n        /yabrowser\\/([\\w\\.]+)/i // Yandex\n      ],\n      [VERSION, [NAME, \"Yandex\"]],\n      [\n        /(avast|avg)\\/([\\w\\.]+)/i // Avast/AVG Secure Browser\n      ],\n      [[NAME, /(.+)/, \"$1 Secure \" + BROWSER], VERSION],\n      [\n        /\\bfocus\\/([\\w\\.]+)/i // Firefox Focus\n      ],\n      [VERSION, [NAME, FIREFOX + \" Focus\"]],\n      [\n        /\\bopt\\/([\\w\\.]+)/i // Opera Touch\n      ],\n      [VERSION, [NAME, OPERA + \" Touch\"]],\n      [\n        /coc_coc\\w+\\/([\\w\\.]+)/i // Coc Coc Browser\n      ],\n      [VERSION, [NAME, \"Coc Coc\"]],\n      [\n        /dolfin\\/([\\w\\.]+)/i // Dolphin\n      ],\n      [VERSION, [NAME, \"Dolphin\"]],\n      [\n        /coast\\/([\\w\\.]+)/i // Opera Coast\n      ],\n      [VERSION, [NAME, OPERA + \" Coast\"]],\n      [\n        /miuibrowser\\/([\\w\\.]+)/i // MIUI Browser\n      ],\n      [VERSION, [NAME, \"MIUI \" + BROWSER]],\n      [\n        /fxios\\/([-\\w\\.]+)/i // Firefox for iOS\n      ],\n      [VERSION, [NAME, FIREFOX]],\n      [\n        /\\bqihu|(qi?ho?o?|360)browser/i // 360\n      ],\n      [[NAME, \"360 \" + BROWSER]],\n      [/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],\n      [[NAME, /(.+)/, \"$1 \" + BROWSER], VERSION],\n      [\n        // Oculus/Samsung/Sailfish/Huawei Browser\n        /(comodo_dragon)\\/([\\w\\.]+)/i // Comodo Dragon\n      ],\n      [[NAME, /_/g, \" \"], VERSION],\n      [\n        /(electron)\\/([\\w\\.]+) safari/i, // Electron-based App\n        /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i, // Tesla\n        /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i // QQBrowser/Baidu App/2345 Browser\n      ],\n      [NAME, VERSION],\n      [\n        /(metasr)[\\/ ]?([\\w\\.]+)/i, // SouGouBrowser\n        /(lbbrowser)/i, // LieBao Browser\n        /\\[(linkedin)app\\]/i // LinkedIn App for iOS & Android\n      ],\n      [NAME],\n      [\n        // WebView\n        /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i // Facebook App for iOS & Android\n      ],\n      [[NAME, FACEBOOK], VERSION],\n      [\n        /safari (line)\\/([\\w\\.]+)/i, // Line App for iOS\n        /\\b(line)\\/([\\w\\.]+)\\/iab/i, // Line App for Android\n        /(chromium|instagram)[\\/ ]([-\\w\\.]+)/i // Chromium/Instagram\n      ],\n      [NAME, VERSION],\n      [\n        /\\bgsa\\/([\\w\\.]+) .*safari\\//i // Google Search Appliance on iOS\n      ],\n      [VERSION, [NAME, \"GSA\"]],\n      [\n        /headlesschrome(?:\\/([\\w\\.]+)| )/i // Chrome Headless\n      ],\n      [VERSION, [NAME, CHROME + \" Headless\"]],\n      [\n        / wv\\).+(chrome)\\/([\\w\\.]+)/i // Chrome WebView\n      ],\n      [[NAME, CHROME + \" WebView\"], VERSION],\n      [\n        /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i // Android Browser\n      ],\n      [VERSION, [NAME, \"Android \" + BROWSER]],\n      [\n        /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i // Chrome/OmniWeb/Arora/Tizen/Nokia\n      ],\n      [NAME, VERSION],\n      [\n        /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i // Mobile Safari\n      ],\n      [VERSION, [NAME, \"Mobile Safari\"]],\n      [\n        /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i // Safari & Safari Mobile\n      ],\n      [VERSION, NAME],\n      [\n        /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i // Safari < 3.0\n      ],\n      [NAME, [VERSION, strMapper, oldSafariMap]],\n      [/(webkit|khtml)\\/([\\w\\.]+)/i],\n      [NAME, VERSION],\n      [\n        // Gecko based\n        /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i // Netscape\n      ],\n      [[NAME, \"Netscape\"], VERSION],\n      [\n        /mobile vr; rv:([\\w\\.]+)\\).+firefox/i // Firefox Reality\n      ],\n      [VERSION, [NAME, FIREFOX + \" Reality\"]],\n      [\n        /ekiohf.+(flow)\\/([\\w\\.]+)/i, // Flow\n        /(swiftfox)/i, // Swiftfox\n        /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n        // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n        /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n        // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n        /(firefox)\\/([\\w\\.]+)/i, // Other Firefox-based\n        /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i, // Mozilla\n\n        // Other\n        /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n        // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n        /(links) \\(([\\w\\.]+)/i // Links\n      ],\n      [NAME, VERSION],\n      [\n        /(cobalt)\\/([\\w\\.]+)/i // Cobalt\n      ],\n      [NAME, [VERSION, /master.|lts./, \"\"]]\n    ],\n\n    cpu: [\n      [\n        /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i // AMD64 (x64)\n      ],\n      [[ARCHITECTURE, \"amd64\"]],\n      [\n        /(ia32(?=;))/i // IA32 (quicktime)\n      ],\n      [[ARCHITECTURE, lowerize]],\n      [\n        /((?:i[346]|x)86)[;\\)]/i // IA32 (x86)\n      ],\n      [[ARCHITECTURE, \"ia32\"]],\n      [\n        /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i // ARM64\n      ],\n      [[ARCHITECTURE, \"arm64\"]],\n      [\n        /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i // ARMHF\n      ],\n      [[ARCHITECTURE, \"armhf\"]],\n      [\n        // PocketPC mistakenly identified as PowerPC\n        /windows (ce|mobile); ppc;/i\n      ],\n      [[ARCHITECTURE, \"arm\"]],\n      [\n        /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i // PowerPC\n      ],\n      [[ARCHITECTURE, /ower/, EMPTY, lowerize]],\n      [\n        /(sun4\\w)[;\\)]/i // SPARC\n      ],\n      [[ARCHITECTURE, \"sparc\"]],\n      [\n        /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n        // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n      ],\n      [[ARCHITECTURE, lowerize]]\n    ],\n\n    device: [\n      [\n        //////////////////////////\n        // MOBILES & TABLETS\n        // Ordered by popularity\n        /////////////////////////\n\n        // Samsung\n        /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n      ],\n      [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]],\n      [\n        /\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy nexus)/i,\n        /samsung[- ]([-\\w]+)/i,\n        /sec-(sgh\\w+)/i\n      ],\n      [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]],\n      [\n        // Apple\n        /((ipod|iphone)\\d+,\\d+)/i // iPod/iPhone model\n      ],\n      [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]],\n      [\n        /(ipad\\d+,\\d+)/i // iPad model\n      ],\n      [MODEL, [VENDOR, APPLE], [TYPE, TABLET]],\n      [\n        /\\((ip(?:hone|od)[\\w ]*);/i // iPod/iPhone\n      ],\n      [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]],\n      [\n        /\\((ipad);[-\\w\\),; ]+apple/i, // iPad\n        /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n        /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n      ],\n      [MODEL, [VENDOR, APPLE], [TYPE, TABLET]],\n      [/(macintosh);/i],\n      [MODEL, [VENDOR, APPLE]],\n      [\n        // Huawei\n        /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n      ],\n      [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]],\n      [\n        /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n        /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n      ],\n      [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]],\n      [\n        // Xiaomi\n        /\\b(poco[\\w ]+)(?: bui|\\))/i, // Xiaomi POCO\n        /\\b; (\\w+) build\\/hm\\1/i, // Xiaomi Hongmi 'numeric' models\n        /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i, // Xiaomi Hongmi\n        /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i, // Xiaomi Redmi\n        /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n      ],\n      [\n        [MODEL, /_/g, \" \"],\n        [VENDOR, XIAOMI],\n        [TYPE, MOBILE]\n      ],\n      [\n        /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i // Mi Pad tablets\n      ],\n      [\n        [MODEL, /_/g, \" \"],\n        [VENDOR, XIAOMI],\n        [TYPE, TABLET]\n      ],\n      [\n        // OPPO\n        /; (\\w+) bui.+ oppo/i,\n        /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n      ],\n      [MODEL, [VENDOR, \"OPPO\"], [TYPE, MOBILE]],\n      [\n        // Vivo\n        /vivo (\\w+)(?: bui|\\))/i,\n        /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n      ],\n      [MODEL, [VENDOR, \"Vivo\"], [TYPE, MOBILE]],\n      [\n        // Realme\n        /\\b(rmx[12]\\d{3})(?: bui|;|\\))/i\n      ],\n      [MODEL, [VENDOR, \"Realme\"], [TYPE, MOBILE]],\n      [\n        // Motorola\n        /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n        /\\bmot(?:orola)?[- ](\\w*)/i,\n        /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n      ],\n      [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]],\n      [/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],\n      [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]],\n      [\n        // LG\n        /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n      ],\n      [MODEL, [VENDOR, LG], [TYPE, TABLET]],\n      [\n        /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n        /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n        /\\blg-?([\\d\\w]+) bui/i\n      ],\n      [MODEL, [VENDOR, LG], [TYPE, MOBILE]],\n      [\n        // Lenovo\n        /(ideatab[-\\w ]+)/i,\n        /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n      ],\n      [MODEL, [VENDOR, \"Lenovo\"], [TYPE, TABLET]],\n      [\n        // Nokia\n        /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n        /nokia[-_ ]?([-\\w\\.]*)/i\n      ],\n      [\n        [MODEL, /_/g, \" \"],\n        [VENDOR, \"Nokia\"],\n        [TYPE, MOBILE]\n      ],\n      [\n        // Google\n        /(pixel c)\\b/i // Google Pixel C\n      ],\n      [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]],\n      [\n        /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i // Google Pixel\n      ],\n      [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]],\n      [\n        // Sony\n        /droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n      ],\n      [MODEL, [VENDOR, SONY], [TYPE, MOBILE]],\n      [/sony tablet [ps]/i, /\\b(?:sony)?sgp\\w+(?: bui|\\))/i],\n      [\n        [MODEL, \"Xperia Tablet\"],\n        [VENDOR, SONY],\n        [TYPE, TABLET]\n      ],\n      [\n        // OnePlus\n        / (kb2005|in20[12]5|be20[12][59])\\b/i,\n        /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n      ],\n      [MODEL, [VENDOR, \"OnePlus\"], [TYPE, MOBILE]],\n      [\n        // Amazon\n        /(alexa)webm/i,\n        /(kf[a-z]{2}wi)( bui|\\))/i, // Kindle Fire without Silk\n        /(kf[a-z]+)( bui|\\)).+silk\\//i // Kindle Fire HD\n      ],\n      [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]],\n      [\n        /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i // Fire Phone\n      ],\n      [\n        [MODEL, /(.+)/g, \"Fire Phone $1\"],\n        [VENDOR, AMAZON],\n        [TYPE, MOBILE]\n      ],\n      [\n        // BlackBerry\n        /(playbook);[-\\w\\),; ]+(rim)/i // BlackBerry PlayBook\n      ],\n      [MODEL, VENDOR, [TYPE, TABLET]],\n      [\n        /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n        /\\(bb10; (\\w+)/i // BlackBerry 10\n      ],\n      [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]],\n      [\n        // Asus\n        /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n      ],\n      [MODEL, [VENDOR, ASUS], [TYPE, TABLET]],\n      [/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],\n      [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]],\n      [\n        // HTC\n        /(nexus 9)/i // HTC Nexus 9\n      ],\n      [MODEL, [VENDOR, \"HTC\"], [TYPE, TABLET]],\n      [\n        /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i, // HTC\n\n        // ZTE\n        /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n        /(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\\w]*)/i // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n      ],\n      [VENDOR, [MODEL, /_/g, \" \"], [TYPE, MOBILE]],\n      [\n        // Acer\n        /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n      ],\n      [MODEL, [VENDOR, \"Acer\"], [TYPE, TABLET]],\n      [\n        // Meizu\n        /droid.+; (m[1-5] note) bui/i,\n        /\\bmz-([-\\w]{2,})/i\n      ],\n      [MODEL, [VENDOR, \"Meizu\"], [TYPE, MOBILE]],\n      [\n        // Sharp\n        /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n      ],\n      [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]],\n      [\n        // MIXED\n        /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,\n        // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n        /(hp) ([\\w ]+\\w)/i, // HP iPAQ\n        /(asus)-?(\\w+)/i, // Asus\n        /(microsoft); (lumia[\\w ]+)/i, // Microsoft Lumia\n        /(lenovo)[-_ ]?([-\\w]+)/i, // Lenovo\n        /(jolla)/i, // Jolla\n        /(oppo) ?([\\w ]+) bui/i // OPPO\n      ],\n      [VENDOR, MODEL, [TYPE, MOBILE]],\n      [\n        /(archos) (gamepad2?)/i, // Archos\n        /(hp).+(touchpad(?!.+tablet)|tablet)/i, // HP TouchPad\n        /(kindle)\\/([\\w\\.]+)/i, // Kindle\n        /(nook)[\\w ]+build\\/(\\w+)/i, // Nook\n        /(dell) (strea[kpr\\d ]*[\\dko])/i, // Dell Streak\n        /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i, // Le Pan Tablets\n        /(trinity)[- ]*(t\\d{3}) bui/i, // Trinity Tablets\n        /(gigaset)[- ]+(q\\w{1,9}) bui/i, // Gigaset Tablets\n        /(vodafone) ([\\w ]+)(?:\\)| bui)/i // Vodafone\n      ],\n      [VENDOR, MODEL, [TYPE, TABLET]],\n      [\n        /(surface duo)/i // Surface Duo\n      ],\n      [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]],\n      [\n        /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i // Fairphone\n      ],\n      [MODEL, [VENDOR, \"Fairphone\"], [TYPE, MOBILE]],\n      [\n        /(u304aa)/i // AT&T\n      ],\n      [MODEL, [VENDOR, \"AT&T\"], [TYPE, MOBILE]],\n      [\n        /\\bsie-(\\w*)/i // Siemens\n      ],\n      [MODEL, [VENDOR, \"Siemens\"], [TYPE, MOBILE]],\n      [\n        /\\b(rct\\w+) b/i // RCA Tablets\n      ],\n      [MODEL, [VENDOR, \"RCA\"], [TYPE, TABLET]],\n      [\n        /\\b(venue[\\d ]{2,7}) b/i // Dell Venue Tablets\n      ],\n      [MODEL, [VENDOR, \"Dell\"], [TYPE, TABLET]],\n      [\n        /\\b(q(?:mv|ta)\\w+) b/i // Verizon Tablet\n      ],\n      [MODEL, [VENDOR, \"Verizon\"], [TYPE, TABLET]],\n      [\n        /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i // Barnes & Noble Tablet\n      ],\n      [MODEL, [VENDOR, \"Barnes & Noble\"], [TYPE, TABLET]],\n      [/\\b(tm\\d{3}\\w+) b/i],\n      [MODEL, [VENDOR, \"NuVision\"], [TYPE, TABLET]],\n      [\n        /\\b(k88) b/i // ZTE K Series Tablet\n      ],\n      [MODEL, [VENDOR, \"ZTE\"], [TYPE, TABLET]],\n      [\n        /\\b(nx\\d{3}j) b/i // ZTE Nubia\n      ],\n      [MODEL, [VENDOR, \"ZTE\"], [TYPE, MOBILE]],\n      [\n        /\\b(gen\\d{3}) b.+49h/i // Swiss GEN Mobile\n      ],\n      [MODEL, [VENDOR, \"Swiss\"], [TYPE, MOBILE]],\n      [\n        /\\b(zur\\d{3}) b/i // Swiss ZUR Tablet\n      ],\n      [MODEL, [VENDOR, \"Swiss\"], [TYPE, TABLET]],\n      [\n        /\\b((zeki)?tb.*\\b) b/i // Zeki Tablets\n      ],\n      [MODEL, [VENDOR, \"Zeki\"], [TYPE, TABLET]],\n      [\n        /\\b([yr]\\d{2}) b/i,\n        /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i // Dragon Touch Tablet\n      ],\n      [[VENDOR, \"Dragon Touch\"], MODEL, [TYPE, TABLET]],\n      [\n        /\\b(ns-?\\w{0,9}) b/i // Insignia Tablets\n      ],\n      [MODEL, [VENDOR, \"Insignia\"], [TYPE, TABLET]],\n      [\n        /\\b((nxa|next)-?\\w{0,9}) b/i // NextBook Tablets\n      ],\n      [MODEL, [VENDOR, \"NextBook\"], [TYPE, TABLET]],\n      [\n        /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i // Voice Xtreme Phones\n      ],\n      [[VENDOR, \"Voice\"], MODEL, [TYPE, MOBILE]],\n      [\n        /\\b(lvtel\\-)?(v1[12]) b/i // LvTel Phones\n      ],\n      [[VENDOR, \"LvTel\"], MODEL, [TYPE, MOBILE]],\n      [\n        /\\b(ph-1) /i // Essential PH-1\n      ],\n      [MODEL, [VENDOR, \"Essential\"], [TYPE, MOBILE]],\n      [\n        /\\b(v(100md|700na|7011|917g).*\\b) b/i // Envizen Tablets\n      ],\n      [MODEL, [VENDOR, \"Envizen\"], [TYPE, TABLET]],\n      [\n        /\\b(trio[-\\w\\. ]+) b/i // MachSpeed Tablets\n      ],\n      [MODEL, [VENDOR, \"MachSpeed\"], [TYPE, TABLET]],\n      [\n        /\\btu_(1491) b/i // Rotor Tablets\n      ],\n      [MODEL, [VENDOR, \"Rotor\"], [TYPE, TABLET]],\n      [\n        /(shield[\\w ]+) b/i // Nvidia Shield Tablets\n      ],\n      [MODEL, [VENDOR, \"Nvidia\"], [TYPE, TABLET]],\n      [\n        /(sprint) (\\w+)/i // Sprint Phones\n      ],\n      [VENDOR, MODEL, [TYPE, MOBILE]],\n      [\n        /(kin\\.[onetw]{3})/i // Microsoft Kin\n      ],\n      [\n        [MODEL, /\\./g, \" \"],\n        [VENDOR, MICROSOFT],\n        [TYPE, MOBILE]\n      ],\n      [\n        /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i // Zebra\n      ],\n      [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]],\n      [/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],\n      [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]],\n      [\n        ///////////////////\n        // CONSOLES\n        ///////////////////\n\n        /(ouya)/i, // Ouya\n        /(nintendo) ([wids3utch]+)/i // Nintendo\n      ],\n      [VENDOR, MODEL, [TYPE, CONSOLE]],\n      [\n        /droid.+; (shield) bui/i // Nvidia\n      ],\n      [MODEL, [VENDOR, \"Nvidia\"], [TYPE, CONSOLE]],\n      [\n        /(playstation [345portablevi]+)/i // Playstation\n      ],\n      [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]],\n      [\n        /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i // Microsoft Xbox\n      ],\n      [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]],\n      [\n        ///////////////////\n        // SMARTTVS\n        ///////////////////\n\n        /smart-tv.+(samsung)/i // Samsung\n      ],\n      [VENDOR, [TYPE, SMARTTV]],\n      [/hbbtv.+maple;(\\d+)/i],\n      [\n        [MODEL, /^/, \"SmartTV\"],\n        [VENDOR, SAMSUNG],\n        [TYPE, SMARTTV]\n      ],\n      [\n        /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i // LG SmartTV\n      ],\n      [\n        [VENDOR, LG],\n        [TYPE, SMARTTV]\n      ],\n      [\n        /(apple) ?tv/i // Apple TV\n      ],\n      [VENDOR, [MODEL, APPLE + \" TV\"], [TYPE, SMARTTV]],\n      [\n        /crkey/i // Google Chromecast\n      ],\n      [\n        [MODEL, CHROME + \"cast\"],\n        [VENDOR, GOOGLE],\n        [TYPE, SMARTTV]\n      ],\n      [\n        /droid.+aft(\\w)( bui|\\))/i // Fire TV\n      ],\n      [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]],\n      [\n        /\\(dtv[\\);].+(aquos)/i,\n        /(aquos-tv[\\w ]+)\\)/i // Sharp\n      ],\n      [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],\n      [\n        /(bravia[\\w ]+)( bui|\\))/i // Sony\n      ],\n      [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]],\n      [\n        /(mitv-\\w{5}) bui/i // Xiaomi\n      ],\n      [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]],\n      [\n        /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i, // Roku\n        /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w ]*; *(\\w[^;]*);([^;]*)/i // HbbTV devices\n      ],\n      [\n        [VENDOR, trim],\n        [MODEL, trim],\n        [TYPE, SMARTTV]\n      ],\n      [\n        /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i // SmartTV from Unidentified Vendors\n      ],\n      [[TYPE, SMARTTV]],\n      [\n        ///////////////////\n        // WEARABLES\n        ///////////////////\n\n        /((pebble))app/i // Pebble\n      ],\n      [VENDOR, MODEL, [TYPE, WEARABLE]],\n      [\n        /droid.+; (glass) \\d/i // Google Glass\n      ],\n      [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]],\n      [/droid.+; (wt63?0{2,3})\\)/i],\n      [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]],\n      [\n        /(quest( 2)?)/i // Oculus Quest\n      ],\n      [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]],\n      [\n        ///////////////////\n        // EMBEDDED\n        ///////////////////\n\n        /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i // Tesla\n      ],\n      [VENDOR, [TYPE, EMBEDDED]],\n      [\n        ////////////////////\n        // MIXED (GENERIC)\n        ///////////////////\n\n        /droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i // Android Phones from Unidentified Vendors\n      ],\n      [MODEL, [TYPE, MOBILE]],\n      [\n        /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i // Android Tablets from Unidentified Vendors\n      ],\n      [MODEL, [TYPE, TABLET]],\n      [\n        /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i // Unidentifiable Tablet\n      ],\n      [[TYPE, TABLET]],\n      [\n        /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i // Unidentifiable Mobile\n      ],\n      [[TYPE, MOBILE]],\n      [\n        /(android[-\\w\\. ]{0,9});.+buil/i // Generic Android Device\n      ],\n      [MODEL, [VENDOR, \"Generic\"]]\n    ],\n\n    engine: [\n      [\n        /windows.+ edge\\/([\\w\\.]+)/i // EdgeHTML\n      ],\n      [VERSION, [NAME, EDGE + \"HTML\"]],\n      [\n        /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i // Blink\n      ],\n      [VERSION, [NAME, \"Blink\"]],\n      [\n        /(presto)\\/([\\w\\.]+)/i, // Presto\n        /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n        /ekioh(flow)\\/([\\w\\.]+)/i, // Flow\n        /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i, // KHTML/Tasman/Links\n        /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i // iCab\n      ],\n      [NAME, VERSION],\n      [\n        /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i // Gecko\n      ],\n      [VERSION, NAME]\n    ],\n\n    os: [\n      [\n        // Windows\n        /microsoft (windows) (vista|xp)/i // Windows (iTunes)\n      ],\n      [NAME, VERSION],\n      [\n        /(windows) nt 6\\.2; (arm)/i, // Windows RT\n        /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i, // Windows Phone\n        /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i\n      ],\n      [NAME, [VERSION, strMapper, windowsVersionMap]],\n      [/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],\n      [\n        [NAME, \"Windows\"],\n        [VERSION, strMapper, windowsVersionMap]\n      ],\n      [\n        // iOS/macOS\n        /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i, // iOS\n        /cfnetwork\\/.+darwin/i\n      ],\n      [\n        [VERSION, /_/g, \".\"],\n        [NAME, \"iOS\"]\n      ],\n      [\n        /(mac os x) ?([\\w\\. ]*)/i,\n        /(macintosh|mac_powerpc\\b)(?!.+haiku)/i // Mac OS\n      ],\n      [\n        [NAME, \"Mac OS\"],\n        [VERSION, /_/g, \".\"]\n      ],\n      [\n        // Mobile OSes\n        /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i // Android-x86/HarmonyOS\n      ],\n      [VERSION, NAME],\n      [\n        // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n        /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n        /(blackberry)\\w*\\/([\\w\\.]*)/i, // Blackberry\n        /(tizen|kaios)[\\/ ]([\\w\\.]+)/i, // Tizen/KaiOS\n        /\\((series40);/i // Series 40\n      ],\n      [NAME, VERSION],\n      [\n        /\\(bb(10);/i // BlackBerry 10\n      ],\n      [VERSION, [NAME, BLACKBERRY]],\n      [\n        /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i // Symbian\n      ],\n      [VERSION, [NAME, \"Symbian\"]],\n      [\n        /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n      ],\n      [VERSION, [NAME, FIREFOX + \" OS\"]],\n      [\n        /web0s;.+rt(tv)/i,\n        /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i // WebOS\n      ],\n      [VERSION, [NAME, \"webOS\"]],\n      [\n        // Google Chromecast\n        /crkey\\/([\\d\\.]+)/i // Google Chromecast\n      ],\n      [VERSION, [NAME, CHROME + \"cast\"]],\n      [\n        /(cros) [\\w]+ ([\\w\\.]+\\w)/i // Chromium OS\n      ],\n      [[NAME, \"Chromium OS\"], VERSION],\n      [\n        // Console\n        /(nintendo|playstation) ([wids345portablevuch]+)/i, // Nintendo/Playstation\n        /(xbox); +xbox ([^\\);]+)/i, // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n        // Other\n        /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i, // Joli/Palm\n        /(mint)[\\/\\(\\) ]?(\\w*)/i, // Mint\n        /(mageia|vectorlinux)[; ]/i, // Mageia/VectorLinux\n        /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n        // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n        /(hurd|linux) ?([\\w\\.]*)/i, // Hurd/Linux\n        /(gnu) ?([\\w\\.]*)/i, // GNU\n        /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n        /(haiku) (\\w+)/i // Haiku\n      ],\n      [NAME, VERSION],\n      [\n        /(sunos) ?([\\w\\.\\d]*)/i // Solaris\n      ],\n      [[NAME, \"Solaris\"], VERSION],\n      [\n        /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i, // Solaris\n        /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i, // AIX\n        /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX\n        /(unix) ?([\\w\\.]*)/i // UNIX\n      ],\n      [NAME, VERSION]\n    ]\n  };\n\n  /////////////////\n  // Constructor\n  ////////////////\n\n  var UAParser = function (ua, extensions) {\n    if (typeof ua === OBJ_TYPE) {\n      extensions = ua;\n      ua = undefined;\n    }\n\n    if (!(this instanceof UAParser)) {\n      return new UAParser(ua, extensions).getResult();\n    }\n\n    var _ua =\n      ua ||\n      (typeof window !== UNDEF_TYPE &&\n      window.navigator &&\n      window.navigator.userAgent ? window.navigator.userAgent : EMPTY);\n    var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n\n    this.getBrowser = function () {\n      var _browser = {};\n      _browser[NAME] = undefined;\n      _browser[VERSION] = undefined;\n      rgxMapper.call(_browser, _ua, _rgxmap.browser);\n      _browser.major = majorize(_browser.version);\n      return _browser;\n    };\n    this.getCPU = function () {\n      var _cpu = {};\n      _cpu[ARCHITECTURE] = undefined;\n      rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n      return _cpu;\n    };\n    this.getDevice = function () {\n      var _device = {};\n      _device[VENDOR] = undefined;\n      _device[MODEL] = undefined;\n      _device[TYPE] = undefined;\n      rgxMapper.call(_device, _ua, _rgxmap.device);\n      return _device;\n    };\n    this.getEngine = function () {\n      var _engine = {};\n      _engine[NAME] = undefined;\n      _engine[VERSION] = undefined;\n      rgxMapper.call(_engine, _ua, _rgxmap.engine);\n      return _engine;\n    };\n    this.getOS = function () {\n      var _os = {};\n      _os[NAME] = undefined;\n      _os[VERSION] = undefined;\n      rgxMapper.call(_os, _ua, _rgxmap.os);\n      return _os;\n    };\n    this.getResult = function () {\n      return {\n        ua: this.getUA(),\n        browser: this.getBrowser(),\n        engine: this.getEngine(),\n        os: this.getOS(),\n        device: this.getDevice(),\n        cpu: this.getCPU()\n      };\n    };\n    this.getUA = function () {\n      return _ua;\n    };\n    this.setUA = function (ua) {\n      _ua =\n        typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH ? trim(ua, UA_MAX_LENGTH) : ua;\n      return this;\n    };\n    this.setUA(_ua);\n    return this;\n  };\n\n  UAParser.VERSION = LIBVERSION;\n  UAParser.BROWSER = enumerize([NAME, VERSION, MAJOR]);\n  UAParser.CPU = enumerize([ARCHITECTURE]);\n  UAParser.DEVICE = enumerize([\n    MODEL,\n    VENDOR,\n    TYPE,\n    CONSOLE,\n    MOBILE,\n    SMARTTV,\n    TABLET,\n    WEARABLE,\n    EMBEDDED\n  ]);\n  UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n  ///////////\n  // Export\n  //////////\n\n  // check js environment\n  if (typeof exports !== UNDEF_TYPE) {\n    // nodejs env\n    if (typeof module !== UNDEF_TYPE && module.exports) {\n      exports = module.exports = UAParser;\n    }\n    exports.UAParser = UAParser;\n  } else {\n    // requirejs env (optional)\n    if (typeof define === FUNC_TYPE && define.amd) {\n      define(function () {\n        return UAParser;\n      });\n    } else if (typeof window !== UNDEF_TYPE) {\n      // browser env\n      window.UAParser = UAParser;\n    }\n  }\n\n  // jQuery/Zepto specific (optional)\n  // Note:\n  //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n  //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n  //   and we should catch that.\n  var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n  if ($ && !$.ua) {\n    var parser = new UAParser();\n    $.ua = parser.getResult();\n    $.ua.get = function () {\n      return parser.getUA();\n    };\n    $.ua.set = function (ua) {\n      parser.setUA(ua);\n      var result = parser.getResult();\n      for (var prop in result) {\n        $.ua[prop] = result[prop];\n      }\n    };\n  }\n})(typeof window === \"object\" ? window : this);\n","import { __assign, __awaiter, __generator } from \"tslib\";\nimport { PluginType } from '@amplitude/analytics-types';\nimport UAParser from '@amplitude/ua-parser-js';\nimport { UUID } from '@amplitude/analytics-core';\nimport { getLanguage } from '@amplitude/analytics-client-common';\nimport { VERSION } from '../version';\nvar BROWSER_PLATFORM = 'Web';\nvar IP_ADDRESS = '$remote';\nvar Context = /** @class */ (function () {\n    function Context() {\n        this.name = 'context';\n        this.type = PluginType.BEFORE;\n        this.library = \"amplitude-ts/\".concat(VERSION);\n        /* istanbul ignore else */\n        if (typeof navigator !== 'undefined') {\n            this.userAgent = navigator.userAgent;\n        }\n        this.uaResult = new UAParser(this.userAgent).getResult();\n    }\n    Context.prototype.setup = function (config) {\n        this.config = config;\n        return Promise.resolve(undefined);\n    };\n    Context.prototype.execute = function (context) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var time, osName, osVersion, deviceModel, deviceVendor, lastEventId, nextEventId, event;\n            return __generator(this, function (_c) {\n                time = new Date().getTime();\n                osName = this.uaResult.browser.name;\n                osVersion = this.uaResult.browser.version;\n                deviceModel = this.uaResult.device.model || this.uaResult.os.name;\n                deviceVendor = this.uaResult.device.vendor;\n                lastEventId = (_a = this.config.lastEventId) !== null && _a !== void 0 ? _a : -1;\n                nextEventId = (_b = context.event_id) !== null && _b !== void 0 ? _b : lastEventId + 1;\n                this.config.lastEventId = nextEventId;\n                if (!context.time) {\n                    this.config.lastEventTime = time;\n                }\n                event = __assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({ user_id: this.config.userId, device_id: this.config.deviceId, session_id: this.config.sessionId, time: time }, (this.config.appVersion && { app_version: this.config.appVersion })), (this.config.trackingOptions.platform && { platform: BROWSER_PLATFORM })), (this.config.trackingOptions.osName && { os_name: osName })), (this.config.trackingOptions.osVersion && { os_version: osVersion })), (this.config.trackingOptions.deviceManufacturer && { device_manufacturer: deviceVendor })), (this.config.trackingOptions.deviceModel && { device_model: deviceModel })), (this.config.trackingOptions.language && { language: getLanguage() })), (this.config.trackingOptions.ipAddress && { ip: IP_ADDRESS })), { insert_id: UUID(), partner_id: this.config.partnerId, plan: this.config.plan }), (this.config.ingestionMetadata && {\n                    ingestion_metadata: {\n                        source_name: this.config.ingestionMetadata.sourceName,\n                        source_version: this.config.ingestionMetadata.sourceVersion,\n                    },\n                })), context), { event_id: nextEventId, library: this.library, user_agent: this.userAgent });\n                return [2 /*return*/, event];\n            });\n        });\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=context.js.map","import { __awaiter, __generator, __read } from \"tslib\";\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { PluginType } from '@amplitude/analytics-types';\nimport { DEFAULT_EVENT_PREFIX, DEFAULT_PAGE_VIEW_EVENT } from '../constants';\nvar eventPropertyMap = {\n    page_domain: \"\".concat(DEFAULT_EVENT_PREFIX, \" Page Domain\"),\n    page_location: \"\".concat(DEFAULT_EVENT_PREFIX, \" Page Location\"),\n    page_path: \"\".concat(DEFAULT_EVENT_PREFIX, \" Page Path\"),\n    page_title: \"\".concat(DEFAULT_EVENT_PREFIX, \" Page Title\"),\n    page_url: \"\".concat(DEFAULT_EVENT_PREFIX, \" Page URL\"),\n};\nexport var defaultPageViewEventEnrichment = function () {\n    var name = '@amplitude/plugin-default-page-view-event-enrichment-browser';\n    var type = PluginType.ENRICHMENT;\n    var setup = function () { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        return [2 /*return*/, undefined];\n    }); }); };\n    var execute = function (event) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (event.event_type === DEFAULT_PAGE_VIEW_EVENT && event.event_properties) {\n                event.event_properties = Object.entries(event.event_properties).reduce(function (acc, _a) {\n                    var _b = __read(_a, 2), key = _b[0], value = _b[1];\n                    var transformedPropertyName = eventPropertyMap[key];\n                    if (transformedPropertyName) {\n                        acc[transformedPropertyName] = value;\n                    }\n                    else {\n                        acc[key] = value;\n                    }\n                    return acc;\n                }, {});\n            }\n            return [2 /*return*/, event];\n        });\n    }); };\n    return {\n        name: name,\n        type: type,\n        setup: setup,\n        execute: execute,\n    };\n};\n//# sourceMappingURL=default-page-view-event-enrichment.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PluginType } from '@amplitude/analytics-types';\nimport { DEFAULT_FILE_DOWNLOAD_EVENT, FILE_EXTENSION, FILE_NAME, LINK_ID, LINK_TEXT, LINK_URL } from '../constants';\nexport var fileDownloadTracking = function () {\n    var observer;\n    var eventListeners = [];\n    var addEventListener = function (element, type, handler) {\n        element.addEventListener(type, handler);\n        eventListeners.push({\n            element: element,\n            type: type,\n            handler: handler,\n        });\n    };\n    var removeClickListeners = function () {\n        eventListeners.forEach(function (_a) {\n            var element = _a.element, type = _a.type, handler = _a.handler;\n            /* istanbul ignore next */\n            element === null || element === void 0 ? void 0 : element.removeEventListener(type, handler);\n        });\n        eventListeners = [];\n    };\n    var name = '@amplitude/plugin-file-download-tracking-browser';\n    var type = PluginType.ENRICHMENT;\n    var setup = function (config, amplitude) { return __awaiter(void 0, void 0, void 0, function () {\n        var addFileDownloadListener, ext, links;\n        return __generator(this, function (_a) {\n            /* istanbul ignore if */\n            if (!amplitude) {\n                // TODO: Add required minimum version of @amplitude/analytics-browser\n                config.loggerProvider.warn('File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.');\n                return [2 /*return*/];\n            }\n            /* istanbul ignore if */\n            if (typeof document === 'undefined') {\n                return [2 /*return*/];\n            }\n            addFileDownloadListener = function (a) {\n                var url;\n                try {\n                    // eslint-disable-next-line no-restricted-globals\n                    url = new URL(a.href, window.location.href);\n                }\n                catch (_a) {\n                    /* istanbul ignore next */\n                    return;\n                }\n                var result = ext.exec(url.href);\n                var fileExtension = result === null || result === void 0 ? void 0 : result[1];\n                if (fileExtension) {\n                    addEventListener(a, 'click', function () {\n                        var _a;\n                        if (fileExtension) {\n                            amplitude.track(DEFAULT_FILE_DOWNLOAD_EVENT, (_a = {},\n                                _a[FILE_EXTENSION] = fileExtension,\n                                _a[FILE_NAME] = url.pathname,\n                                _a[LINK_ID] = a.id,\n                                _a[LINK_TEXT] = a.text,\n                                _a[LINK_URL] = a.href,\n                                _a));\n                        }\n                    });\n                }\n            };\n            ext = /\\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/;\n            links = Array.from(document.getElementsByTagName('a'));\n            links.forEach(addFileDownloadListener);\n            // Adds listener to anchor tags added after initial load\n            /* istanbul ignore else */\n            if (typeof MutationObserver !== 'undefined') {\n                observer = new MutationObserver(function (mutations) {\n                    mutations.forEach(function (mutation) {\n                        mutation.addedNodes.forEach(function (node) {\n                            if (node.nodeName === 'A') {\n                                addFileDownloadListener(node);\n                            }\n                            if ('querySelectorAll' in node && typeof node.querySelectorAll === 'function') {\n                                Array.from(node.querySelectorAll('a')).map(addFileDownloadListener);\n                            }\n                        });\n                    });\n                });\n                observer.observe(document.body, {\n                    subtree: true,\n                    childList: true,\n                });\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var execute = function (event) { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        return [2 /*return*/, event];\n    }); }); };\n    var teardown = function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n            removeClickListeners();\n            return [2 /*return*/];\n        });\n    }); };\n    return {\n        name: name,\n        type: type,\n        setup: setup,\n        execute: execute,\n        teardown: teardown,\n    };\n};\n//# sourceMappingURL=file-download-tracking.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PluginType } from '@amplitude/analytics-types';\nimport { DEFAULT_FORM_START_EVENT, DEFAULT_FORM_SUBMIT_EVENT, FORM_ID, FORM_NAME, FORM_DESTINATION, } from '../constants';\nexport var formInteractionTracking = function () {\n    var observer;\n    var eventListeners = [];\n    var addEventListener = function (element, type, handler) {\n        element.addEventListener(type, handler);\n        eventListeners.push({\n            element: element,\n            type: type,\n            handler: handler,\n        });\n    };\n    var removeClickListeners = function () {\n        eventListeners.forEach(function (_a) {\n            var element = _a.element, type = _a.type, handler = _a.handler;\n            /* istanbul ignore next */\n            element === null || element === void 0 ? void 0 : element.removeEventListener(type, handler);\n        });\n        eventListeners = [];\n    };\n    // Extracts the form action attribute, and normalizes it to a valid URL to preserve the previous behavior of accessing the action property directly.\n    var extractFormAction = function (form) {\n        var formDestination = form.getAttribute('action');\n        try {\n            // eslint-disable-next-line no-restricted-globals\n            formDestination = new URL(encodeURI(formDestination !== null && formDestination !== void 0 ? formDestination : ''), window.location.href).href;\n        }\n        catch (_a) {\n            //\n        }\n        return formDestination;\n    };\n    var name = '@amplitude/plugin-form-interaction-tracking-browser';\n    var type = PluginType.ENRICHMENT;\n    var setup = function (config, amplitude) { return __awaiter(void 0, void 0, void 0, function () {\n        var addFormInteractionListener, forms;\n        return __generator(this, function (_a) {\n            /* istanbul ignore if */\n            if (!amplitude) {\n                // TODO: Add required minimum version of @amplitude/analytics-browser\n                config.loggerProvider.warn('Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.');\n                return [2 /*return*/];\n            }\n            /* istanbul ignore if */\n            if (typeof document === 'undefined') {\n                return [2 /*return*/];\n            }\n            addFormInteractionListener = function (form) {\n                var hasFormChanged = false;\n                addEventListener(form, 'change', function () {\n                    var _a;\n                    if (!hasFormChanged) {\n                        var formDestination = extractFormAction(form);\n                        amplitude.track(DEFAULT_FORM_START_EVENT, (_a = {},\n                            _a[FORM_ID] = form.getAttribute('id'),\n                            _a[FORM_NAME] = form.getAttribute('name'),\n                            _a[FORM_DESTINATION] = formDestination,\n                            _a));\n                    }\n                    hasFormChanged = true;\n                });\n                addEventListener(form, 'submit', function () {\n                    var _a, _b;\n                    var formDestination = extractFormAction(form);\n                    if (!hasFormChanged) {\n                        amplitude.track(DEFAULT_FORM_START_EVENT, (_a = {},\n                            _a[FORM_ID] = form.getAttribute('id'),\n                            _a[FORM_NAME] = form.getAttribute('name'),\n                            _a[FORM_DESTINATION] = formDestination,\n                            _a));\n                    }\n                    amplitude.track(DEFAULT_FORM_SUBMIT_EVENT, (_b = {},\n                        _b[FORM_ID] = form.getAttribute('id'),\n                        _b[FORM_NAME] = form.getAttribute('name'),\n                        _b[FORM_DESTINATION] = formDestination,\n                        _b));\n                    hasFormChanged = false;\n                });\n            };\n            forms = Array.from(document.getElementsByTagName('form'));\n            forms.forEach(addFormInteractionListener);\n            // Adds listener to anchor tags added after initial load\n            /* istanbul ignore else */\n            if (typeof MutationObserver !== 'undefined') {\n                observer = new MutationObserver(function (mutations) {\n                    mutations.forEach(function (mutation) {\n                        mutation.addedNodes.forEach(function (node) {\n                            if (node.nodeName === 'FORM') {\n                                addFormInteractionListener(node);\n                            }\n                            if ('querySelectorAll' in node && typeof node.querySelectorAll === 'function') {\n                                Array.from(node.querySelectorAll('form')).map(addFormInteractionListener);\n                            }\n                        });\n                    });\n                });\n                observer.observe(document.body, {\n                    subtree: true,\n                    childList: true,\n                });\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var execute = function (event) { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\n        return [2 /*return*/, event];\n    }); }); };\n    var teardown = function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n            removeClickListeners();\n            return [2 /*return*/];\n        });\n    }); };\n    return {\n        name: name,\n        type: type,\n        setup: setup,\n        execute: execute,\n        teardown: teardown,\n    };\n};\n//# sourceMappingURL=form-interaction-tracking.js.map","/**\n * Applies the proxied functions on the proxied amplitude snippet to an instance of the real object.\n * @ignore\n */\nexport var runQueuedFunctions = function (instance, queue) {\n    convertProxyObjectToRealObject(instance, queue);\n};\n/**\n * Applies the proxied functions on the proxied object to an instance of the real object.\n * Used to convert proxied Identify and Revenue objects.\n */\nexport var convertProxyObjectToRealObject = function (instance, queue) {\n    for (var i = 0; i < queue.length; i++) {\n        var _a = queue[i], name_1 = _a.name, args = _a.args, resolve = _a.resolve;\n        var fn = instance && instance[name_1];\n        if (typeof fn === 'function') {\n            var result = fn.apply(instance, args);\n            if (typeof resolve === 'function') {\n                resolve(result === null || result === void 0 ? void 0 : result.promise);\n            }\n        }\n    }\n    return instance;\n};\n/**\n * Check if the param is snippet proxy\n */\nexport var isInstanceProxy = function (instance) {\n    var instanceProxy = instance;\n    return instanceProxy && instanceProxy._q !== undefined;\n};\n//# sourceMappingURL=snippet-helper.js.map","import { __assign, __awaiter, __extends, __generator } from \"tslib\";\nimport { getAnalyticsConnector, getCookieName, getPageViewTrackingConfig, getQueryParams, IdentityEventSender, isFileDownloadTrackingEnabled, isFormInteractionTrackingEnabled, isSessionTrackingEnabled, setConnectorDeviceId, setConnectorOptOut, setConnectorUserId, } from '@amplitude/analytics-client-common';\nimport { AmplitudeCore, Destination, Identify, returnWrapper, Revenue, UUID } from '@amplitude/analytics-core';\nimport { pageViewTrackingPlugin } from '@amplitude/plugin-page-view-tracking-browser';\nimport { webAttributionPlugin } from '@amplitude/plugin-web-attribution-browser';\nimport { createCookieStorage, createTransport, getTopLevelDomain, useBrowserConfig } from './config';\nimport { DEFAULT_PAGE_VIEW_EVENT, DEFAULT_SESSION_END_EVENT, DEFAULT_SESSION_START_EVENT } from './constants';\nimport { parseLegacyCookies } from './cookie-migration';\nimport { Context } from './plugins/context';\nimport { defaultPageViewEventEnrichment } from './plugins/default-page-view-event-enrichment';\nimport { fileDownloadTracking } from './plugins/file-download-tracking';\nimport { formInteractionTracking } from './plugins/form-interaction-tracking';\nimport { convertProxyObjectToRealObject, isInstanceProxy } from './utils/snippet-helper';\nvar AmplitudeBrowser = /** @class */ (function (_super) {\n    __extends(AmplitudeBrowser, _super);\n    function AmplitudeBrowser() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AmplitudeBrowser.prototype.init = function (apiKey, userId, options) {\n        if (apiKey === void 0) { apiKey = ''; }\n        return returnWrapper(this._init(__assign(__assign({}, options), { userId: userId, apiKey: apiKey })));\n    };\n    AmplitudeBrowser.prototype._init = function (options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _r, _s, _t, _u, _v, _w;\n        return __awaiter(this, void 0, void 0, function () {\n            var _x, _y, _z, legacyCookies, cookieStorage, previousCookies, queryParams, deviceId, sessionId, optOut, lastEventId, lastEventTime, userId, browserOptions, isNewSession, connector, webAttribution, pageViewTrackingOptions;\n            var _this = this;\n            return __generator(this, function (_0) {\n                switch (_0.label) {\n                    case 0:\n                        // Step 0: Block concurrent initialization\n                        if (this.initializing) {\n                            return [2 /*return*/];\n                        }\n                        this.initializing = true;\n                        // Step 1: Read cookies stored by SDK\n                        _x = options;\n                        if (!options.disableCookies) return [3 /*break*/, 1];\n                        _y = '';\n                        return [3 /*break*/, 5];\n                    case 1:\n                        if (!((_a = options.domain) !== null && _a !== void 0)) return [3 /*break*/, 2];\n                        _z = _a;\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, getTopLevelDomain()];\n                    case 3:\n                        _z = (_0.sent());\n                        _0.label = 4;\n                    case 4:\n                        _y = _z;\n                        _0.label = 5;\n                    case 5:\n                        // Step 1: Read cookies stored by SDK\n                        _x.domain = _y;\n                        return [4 /*yield*/, parseLegacyCookies(options.apiKey, options)];\n                    case 6:\n                        legacyCookies = _0.sent();\n                        return [4 /*yield*/, createCookieStorage(options)];\n                    case 7:\n                        cookieStorage = _0.sent();\n                        return [4 /*yield*/, cookieStorage.get(getCookieName(options.apiKey))];\n                    case 8:\n                        previousCookies = _0.sent();\n                        queryParams = getQueryParams();\n                        deviceId = (_d = (_c = (_b = options.deviceId) !== null && _b !== void 0 ? _b : queryParams.deviceId) !== null && _c !== void 0 ? _c : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.deviceId) !== null && _d !== void 0 ? _d : legacyCookies.deviceId;\n                        sessionId = (_e = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.sessionId) !== null && _e !== void 0 ? _e : legacyCookies.sessionId;\n                        optOut = (_g = (_f = options.optOut) !== null && _f !== void 0 ? _f : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.optOut) !== null && _g !== void 0 ? _g : legacyCookies.optOut;\n                        lastEventId = (_h = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.lastEventId) !== null && _h !== void 0 ? _h : legacyCookies.lastEventId;\n                        lastEventTime = (_j = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.lastEventTime) !== null && _j !== void 0 ? _j : legacyCookies.lastEventTime;\n                        userId = (_l = (_k = options.userId) !== null && _k !== void 0 ? _k : previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.userId) !== null && _l !== void 0 ? _l : legacyCookies.userId;\n                        this.previousSessionDeviceId = (_m = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.deviceId) !== null && _m !== void 0 ? _m : legacyCookies.deviceId;\n                        this.previousSessionUserId = (_o = previousCookies === null || previousCookies === void 0 ? void 0 : previousCookies.userId) !== null && _o !== void 0 ? _o : legacyCookies.userId;\n                        return [4 /*yield*/, useBrowserConfig(options.apiKey, __assign(__assign({}, options), { deviceId: deviceId, sessionId: sessionId, optOut: optOut, lastEventId: lastEventId, lastEventTime: lastEventTime, userId: userId, cookieStorage: cookieStorage }))];\n                    case 9:\n                        browserOptions = _0.sent();\n                        return [4 /*yield*/, _super.prototype._init.call(this, browserOptions)];\n                    case 10:\n                        _0.sent();\n                        isNewSession = false;\n                        if (\n                        // user has never sent an event\n                        !this.config.lastEventTime ||\n                            // user has no previous session ID\n                            !this.config.sessionId ||\n                            // has sent an event and has previous session but expired\n                            (this.config.lastEventTime && Date.now() - this.config.lastEventTime > this.config.sessionTimeout)) {\n                            this.setSessionId((_r = (_p = options.sessionId) !== null && _p !== void 0 ? _p : this.config.sessionId) !== null && _r !== void 0 ? _r : Date.now());\n                            isNewSession = true;\n                        }\n                        connector = getAnalyticsConnector(options.instanceName);\n                        connector.identityStore.setIdentity({\n                            userId: this.config.userId,\n                            deviceId: this.config.deviceId,\n                        });\n                        // Step 4: Install plugins\n                        // Do not track any events before this\n                        return [4 /*yield*/, this.add(new Destination()).promise];\n                    case 11:\n                        // Step 4: Install plugins\n                        // Do not track any events before this\n                        _0.sent();\n                        return [4 /*yield*/, this.add(new Context()).promise];\n                    case 12:\n                        _0.sent();\n                        return [4 /*yield*/, this.add(new IdentityEventSender()).promise];\n                    case 13:\n                        _0.sent();\n                        if (!isFileDownloadTrackingEnabled(this.config.defaultTracking)) return [3 /*break*/, 15];\n                        return [4 /*yield*/, this.add(fileDownloadTracking()).promise];\n                    case 14:\n                        _0.sent();\n                        _0.label = 15;\n                    case 15:\n                        if (!isFormInteractionTrackingEnabled(this.config.defaultTracking)) return [3 /*break*/, 17];\n                        return [4 /*yield*/, this.add(formInteractionTracking()).promise];\n                    case 16:\n                        _0.sent();\n                        _0.label = 17;\n                    case 17:\n                        if (!!((_s = this.config.attribution) === null || _s === void 0 ? void 0 : _s.disabled)) return [3 /*break*/, 19];\n                        webAttribution = webAttributionPlugin({\n                            excludeReferrers: (_t = this.config.attribution) === null || _t === void 0 ? void 0 : _t.excludeReferrers,\n                            initialEmptyValue: (_u = this.config.attribution) === null || _u === void 0 ? void 0 : _u.initialEmptyValue,\n                            resetSessionOnNewCampaign: (_v = this.config.attribution) === null || _v === void 0 ? void 0 : _v.resetSessionOnNewCampaign,\n                        });\n                        // For Amplitude-internal functionality\n                        // if pluginEnabledOverride === undefined then use plugin default logic\n                        // if pluginEnabledOverride === true then track attribution\n                        // if pluginEnabledOverride === false then do not track attribution\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                        webAttribution.__pluginEnabledOverride =\n                            isNewSession || ((_w = this.config.attribution) === null || _w === void 0 ? void 0 : _w.trackNewCampaigns) ? undefined : false;\n                        return [4 /*yield*/, this.add(webAttribution).promise];\n                    case 18:\n                        _0.sent();\n                        _0.label = 19;\n                    case 19:\n                        pageViewTrackingOptions = getPageViewTrackingConfig(this.config);\n                        pageViewTrackingOptions.eventType = pageViewTrackingOptions.eventType || DEFAULT_PAGE_VIEW_EVENT;\n                        return [4 /*yield*/, this.add(pageViewTrackingPlugin(pageViewTrackingOptions)).promise];\n                    case 20:\n                        _0.sent();\n                        return [4 /*yield*/, this.add(defaultPageViewEventEnrichment()).promise];\n                    case 21:\n                        _0.sent();\n                        this.initializing = false;\n                        // Step 6: Run queued dispatch functions\n                        return [4 /*yield*/, this.runQueuedFunctions('dispatchQ')];\n                    case 22:\n                        // Step 6: Run queued dispatch functions\n                        _0.sent();\n                        // Step 7: Add the event receiver after running remaining queued functions.\n                        connector.eventBridge.setEventReceiver(function (event) {\n                            void _this.track(event.eventType, event.eventProperties);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AmplitudeBrowser.prototype.getUserId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.userId;\n    };\n    AmplitudeBrowser.prototype.setUserId = function (userId) {\n        if (!this.config) {\n            this.q.push(this.setUserId.bind(this, userId));\n            return;\n        }\n        if (userId !== this.config.userId || userId === undefined) {\n            this.config.userId = userId;\n            setConnectorUserId(userId, this.config.instanceName);\n        }\n    };\n    AmplitudeBrowser.prototype.getDeviceId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.deviceId;\n    };\n    AmplitudeBrowser.prototype.setDeviceId = function (deviceId) {\n        if (!this.config) {\n            this.q.push(this.setDeviceId.bind(this, deviceId));\n            return;\n        }\n        this.config.deviceId = deviceId;\n        setConnectorDeviceId(deviceId, this.config.instanceName);\n    };\n    AmplitudeBrowser.prototype.setOptOut = function (optOut) {\n        setConnectorOptOut(optOut, this.config.instanceName);\n        _super.prototype.setOptOut.call(this, optOut);\n    };\n    AmplitudeBrowser.prototype.reset = function () {\n        this.setDeviceId(UUID());\n        this.setUserId(undefined);\n    };\n    AmplitudeBrowser.prototype.getSessionId = function () {\n        var _a;\n        return (_a = this.config) === null || _a === void 0 ? void 0 : _a.sessionId;\n    };\n    AmplitudeBrowser.prototype.setSessionId = function (sessionId) {\n        var _a;\n        if (!this.config) {\n            this.q.push(this.setSessionId.bind(this, sessionId));\n            return;\n        }\n        // Prevents starting a new session with the same session ID\n        if (sessionId === this.config.sessionId) {\n            return;\n        }\n        var previousSessionId = this.getSessionId();\n        var lastEventTime = this.config.lastEventTime;\n        var lastEventId = (_a = this.config.lastEventId) !== null && _a !== void 0 ? _a : -1;\n        this.config.sessionId = sessionId;\n        this.config.lastEventTime = undefined;\n        if (isSessionTrackingEnabled(this.config.defaultTracking)) {\n            if (previousSessionId && lastEventTime) {\n                this.track(DEFAULT_SESSION_END_EVENT, undefined, {\n                    device_id: this.previousSessionDeviceId,\n                    event_id: ++lastEventId,\n                    session_id: previousSessionId,\n                    time: lastEventTime + 1,\n                    user_id: this.previousSessionUserId,\n                });\n            }\n            this.config.lastEventTime = this.config.sessionId;\n            this.track(DEFAULT_SESSION_START_EVENT, undefined, {\n                event_id: ++lastEventId,\n                session_id: this.config.sessionId,\n                time: this.config.lastEventTime,\n            });\n        }\n        this.previousSessionDeviceId = this.config.deviceId;\n        this.previousSessionUserId = this.config.userId;\n    };\n    AmplitudeBrowser.prototype.extendSession = function () {\n        if (!this.config) {\n            this.q.push(this.extendSession.bind(this));\n            return;\n        }\n        this.config.lastEventTime = Date.now();\n    };\n    AmplitudeBrowser.prototype.setTransport = function (transport) {\n        if (!this.config) {\n            this.q.push(this.setTransport.bind(this, transport));\n            return;\n        }\n        this.config.transportProvider = createTransport(transport);\n    };\n    AmplitudeBrowser.prototype.identify = function (identify, eventOptions) {\n        if (isInstanceProxy(identify)) {\n            var queue = identify._q;\n            identify._q = [];\n            identify = convertProxyObjectToRealObject(new Identify(), queue);\n        }\n        if (eventOptions === null || eventOptions === void 0 ? void 0 : eventOptions.user_id) {\n            this.setUserId(eventOptions.user_id);\n        }\n        if (eventOptions === null || eventOptions === void 0 ? void 0 : eventOptions.device_id) {\n            this.setDeviceId(eventOptions.device_id);\n        }\n        return _super.prototype.identify.call(this, identify, eventOptions);\n    };\n    AmplitudeBrowser.prototype.groupIdentify = function (groupType, groupName, identify, eventOptions) {\n        if (isInstanceProxy(identify)) {\n            var queue = identify._q;\n            identify._q = [];\n            identify = convertProxyObjectToRealObject(new Identify(), queue);\n        }\n        return _super.prototype.groupIdentify.call(this, groupType, groupName, identify, eventOptions);\n    };\n    AmplitudeBrowser.prototype.revenue = function (revenue, eventOptions) {\n        if (isInstanceProxy(revenue)) {\n            var queue = revenue._q;\n            revenue._q = [];\n            revenue = convertProxyObjectToRealObject(new Revenue(), queue);\n        }\n        return _super.prototype.revenue.call(this, revenue, eventOptions);\n    };\n    AmplitudeBrowser.prototype.process = function (event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var currentTime, lastEventTime, timeSinceLastEvent;\n            return __generator(this, function (_a) {\n                currentTime = Date.now();\n                lastEventTime = this.config.lastEventTime || Date.now();\n                timeSinceLastEvent = currentTime - lastEventTime;\n                if (event.event_type !== DEFAULT_SESSION_START_EVENT &&\n                    event.event_type !== DEFAULT_SESSION_END_EVENT &&\n                    (!event.session_id || event.session_id === this.getSessionId()) &&\n                    timeSinceLastEvent > this.config.sessionTimeout) {\n                    this.setSessionId(currentTime);\n                }\n                return [2 /*return*/, _super.prototype.process.call(this, event)];\n            });\n        });\n    };\n    return AmplitudeBrowser;\n}(AmplitudeCore));\nexport { AmplitudeBrowser };\n//# sourceMappingURL=browser-client.js.map","import { debugWrapper, getClientLogConfig, getClientStates } from '@amplitude/analytics-core';\nimport { AmplitudeBrowser } from './browser-client';\nexport var createInstance = function () {\n    var client = new AmplitudeBrowser();\n    return {\n        init: debugWrapper(client.init.bind(client), 'init', getClientLogConfig(client), getClientStates(client, ['config'])),\n        add: debugWrapper(client.add.bind(client), 'add', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.plugins'])),\n        remove: debugWrapper(client.remove.bind(client), 'remove', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.plugins'])),\n        track: debugWrapper(client.track.bind(client), 'track', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        logEvent: debugWrapper(client.logEvent.bind(client), 'logEvent', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        identify: debugWrapper(client.identify.bind(client), 'identify', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        groupIdentify: debugWrapper(client.groupIdentify.bind(client), 'groupIdentify', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        setGroup: debugWrapper(client.setGroup.bind(client), 'setGroup', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        revenue: debugWrapper(client.revenue.bind(client), 'revenue', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        flush: debugWrapper(client.flush.bind(client), 'flush', getClientLogConfig(client), getClientStates(client, ['config.apiKey', 'timeline.queue.length'])),\n        getUserId: debugWrapper(client.getUserId.bind(client), 'getUserId', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId'])),\n        setUserId: debugWrapper(client.setUserId.bind(client), 'setUserId', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId'])),\n        getDeviceId: debugWrapper(client.getDeviceId.bind(client), 'getDeviceId', getClientLogConfig(client), getClientStates(client, ['config', 'config.deviceId'])),\n        setDeviceId: debugWrapper(client.setDeviceId.bind(client), 'setDeviceId', getClientLogConfig(client), getClientStates(client, ['config', 'config.deviceId'])),\n        reset: debugWrapper(client.reset.bind(client), 'reset', getClientLogConfig(client), getClientStates(client, ['config', 'config.userId', 'config.deviceId'])),\n        getSessionId: debugWrapper(client.getSessionId.bind(client), 'getSessionId', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setSessionId: debugWrapper(client.setSessionId.bind(client), 'setSessionId', getClientLogConfig(client), getClientStates(client, ['config'])),\n        extendSession: debugWrapper(client.extendSession.bind(client), 'extendSession', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setOptOut: debugWrapper(client.setOptOut.bind(client), 'setOptOut', getClientLogConfig(client), getClientStates(client, ['config'])),\n        setTransport: debugWrapper(client.setTransport.bind(client), 'setTransport', getClientLogConfig(client), getClientStates(client, ['config'])),\n    };\n};\nexport default createInstance();\n//# sourceMappingURL=browser-client-factory.js.map","/* eslint-disable @typescript-eslint/unbound-method */\nimport client from './browser-client-factory';\nexport { createInstance } from './browser-client-factory';\nexport var add = client.add, extendSession = client.extendSession, flush = client.flush, getDeviceId = client.getDeviceId, getSessionId = client.getSessionId, getUserId = client.getUserId, groupIdentify = client.groupIdentify, identify = client.identify, init = client.init, logEvent = client.logEvent, remove = client.remove, reset = client.reset, revenue = client.revenue, setDeviceId = client.setDeviceId, setGroup = client.setGroup, setOptOut = client.setOptOut, setSessionId = client.setSessionId, setTransport = client.setTransport, setUserId = client.setUserId, track = client.track;\nexport { runQueuedFunctions } from './utils/snippet-helper';\nexport { Revenue, Identify } from '@amplitude/analytics-core';\nimport * as Types_1 from '@amplitude/analytics-types';\nexport { Types_1 as Types };\n//# sourceMappingURL=index.js.map","import { init as amplitudeInit, track as amplitudeTrack } from '@amplitude/analytics-browser';\r\n\r\nlet _initialized = false;\r\nexport function initAmplitude() {\r\n  const key = import.meta.env.VITE_AMPLITUDE_API_KEY;\r\n  if (!key) return;\r\n  try {\r\n    amplitudeInit(key);\r\n    _initialized = true;\r\n  } catch (e) {\r\n    if (process.env.NODE_ENV !== 'production') console.debug('Amplitude init failed', e);\r\n  }\r\n}\r\n\r\nexport function trackAmplitude(eventName: string, payload?: Record<string, any>) {\r\n  try {\r\n    if (!_initialized) return;\r\n    amplitudeTrack(eventName, payload || {});\r\n    if (process.env.NODE_ENV !== 'production') console.info('Amplitude track:', eventName, payload || {});\r\n  } catch (e) {\r\n    if (process.env.NODE_ENV !== 'production') console.debug('Amplitude track failed', e);\r\n  }\r\n}\r\n"],"names":["extendStatics","d","b","p","__extends","__","__assign","t","s","i","__rest","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","__generator","body","_","f","y","g","verb","n","op","__values","o","m","__read","r","ar","error","__spreadArray","to","from","pack","l","IdentifyOperation","RevenueProperty","SpecialEventType","LogLevel","PluginType","ServerZone","Status","TransportType","UNSET_VALUE","AMPLITUDE_PREFIX","STORAGE_PREFIX","AMPLITUDE_SERVER_URL","EU_AMPLITUDE_SERVER_URL","AMPLITUDE_BATCH_SERVER_URL","EU_AMPLITUDE_BATCH_SERVER_URL","MAX_PROPERTY_KEYS","isValidObject","properties","key","isValidProperties","property","e_1","_a","isValid","value_1","value_1_1","valueElement","e_1_1","Identify","operation","userPropertyMap","createTrackEvent","eventInput","eventProperties","eventOptions","baseEvent","createIdentifyEvent","identify","identifyEvent","createGroupIdentifyEvent","groupType","groupName","groupIdentify","createGroupEvent","groupEvent","createRevenueEvent","revenue","buildResult","event","code","message","Timeline","client","plugin","config","pluginName","index","_b","plugins","_this","timeout","item","before","before_1","before_1_1","enrichment","enrichment_1","enrichment_1_1","e_2_1","destination","executeDestinations","_c","e_2","_d","_e","eventClone","queue","SUCCESS_MESSAGE","UNEXPECTED_ERROR_MESSAGE","MAX_RETRIES_EXCEEDED_MESSAGE","OPT_OUT_MESSAGE","MISSING_API_KEY_MESSAGE","INVALID_API_KEY","CLIENT_NOT_INITIALIZED","returnWrapper","awaitable","AmplitudeCore","name","queueName","queuedFunctions","queuedFunctions_1","queuedFunctions_1_1","queuedFunction","callback","optOut","Revenue","productId","quantity","price","revenueType","currency","chunk","arr","size","chunkSize","chunks","element","chunkIndex","PREFIX","Logger","logLevel","args","_i","getDefaultConfig","Config","options","defaultConfig","serverConfig","createServerConfig","getServerUrl","serverZone","useBatch","serverUrl","_serverZone","getErrorMessage","getResponseBodyString","res","responseBodyString","Destination","unsent","context","list","tryable","useRetry","later","batches","batch","payload","errorMessage","eventWithoutExtra","status","dropIndex","dropIndexSet","retry","dropUserIds","dropDeviceIds","throttledIndex","dropUserIdsSet","dropDeviceIdsSet","throttledIndexSet","events","getStacktrace","ignoreDepth","trace","text","getClientLogConfig","logger","getValueByStringPath","obj","path","attr","getClientStates","paths","paths_1","paths_1_1","debugWrapper","fn","fnName","getLogConfig","getStates","fnContext","debugContext","UUID","a","MemoryStorage","BaseTransport","_serverUrl","_payload","responseJSON","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","statusCode","ApplicationContextProviderImpl","getLanguage","EventBridgeImpl","receiver","isEqual","obj1","obj2","primitive","typeA","typeB","primitive_1","primitive_1_1","isArrayA","isArrayB","sorted1","sorted2","result_1","ID_OP_SET","ID_OP_UNSET","ID_OP_CLEAR_ALL","ownProps","resArray","IdentityStoreImpl","self","actingUserProperties","actingIdentity","userId","deviceId","userProperties","actions","e_3","actingProperties","action","e_3_1","identity","originalIdentity","listener","safeGlobal","AnalyticsConnector","instanceName","getAnalyticsConnector","setConnectorUserId","setConnectorDeviceId","setConnectorOptOut","getGlobalScope","getQueryParams","globalScope","pairs","params","acc","curr","query","tryDecodeURIComponent","UTM_CAMPAIGN","UTM_CONTENT","UTM_ID","UTM_MEDIUM","UTM_SOURCE","UTM_TERM","DCLID","FBCLID","GBRAID","GCLID","KO_CLICK_ID","LI_FAT_ID","MSCLKID","RDT_CID","TTCLID","TWCLID","WBRAID","BASE_CAMPAIGN","CampaignParser","utmCampaign","utmContent","utmId","utmMedium","utmSource","utmTerm","data","getCookieName","apiKey","postKey","limit","getOldCookieName","isFileDownloadTrackingEnabled","defaultTracking","isFormInteractionTrackingEnabled","isPageViewTrackingEnabled","isSessionTrackingEnabled","getPageViewTrackingConfig","trackOn","trackHistoryChanges","eventType","isDefaultPageViewTrackingEnabled","userLanguage","IdentityEventSender","CookieStorage","testStrorage","testKey","cookie","match","expirationDays","expires","expireDate","date","str","FetchTransport","_super","response","responseText","omitUndefined","input","val","pageViewTrackingPlugin","amplitude","loggerProvider","pushState","clientOrOptions","configOrUndefined","createPageViewEvent","getCampaignParams","shouldTrackOnPageLoad","previousURL","trackHistoryPageView","newURL","shouldTrackPageView","shouldTrackHistoryPageView","trackHistoryPageViewWrapper","receivedType","target","state","unused","url","pageViewEvent","isCampaignEvent","$set","$unset","userProperties_1","trackingOption","oldURL","getStorageKey","domainWithoutSubdomain","domain","parts","isNewCampaign","current","previous","referring_domain","currentCampaign","prevReferringDomain","previousCampaign","hasNewCampaign","hasNewDomain","createCampaignEvent","campaign","campaignParameters","webAttributionPlugin","excludeReferrers","storage","storageKey","pluginEnabledOverride","campaignEvent","MAX_ARRAY_LENGTH","LocalStorage","random","testStorage","isExceededArraySize","serializedValue","droppedEventsCount","XHRTransport","xhr","SendBeaconTransport","success","VERSION","cookieStorage","trackingOptions","BrowserConfig","sessionId","lastEventTime","lastEventId","cache","useBrowserConfig","createEventsStorage","createTransport","createCookieStorage","overrides","baseConfig","createFlexibleStorage","hasStorageProviderProperty","transport","getTopLevelDomain","host","levels","DEFAULT_EVENT_PREFIX","DEFAULT_PAGE_VIEW_EVENT","DEFAULT_FORM_START_EVENT","DEFAULT_FORM_SUBMIT_EVENT","DEFAULT_FILE_DOWNLOAD_EVENT","DEFAULT_SESSION_START_EVENT","DEFAULT_SESSION_END_EVENT","FILE_EXTENSION","FILE_NAME","LINK_ID","LINK_TEXT","LINK_URL","FORM_ID","FORM_NAME","FORM_DESTINATION","parseLegacyCookies","oldCookieName","cookies","decode","parseTime","num","integer","window","undefined","LIBVERSION","EMPTY","UNKNOWN","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","UA_MAX_LENGTH","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","EDGE","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","extend","regexes","extensions","mergedRegexes","enumerize","enums","has","str1","str2","lowerize","majorize","version","trim","len","rgxMapper","ua","arrays","j","k","q","matches","regex","props","strMapper","map","oldSafariMap","windowsVersionMap","UAParser","_ua","_rgxmap","_browser","_cpu","_device","_engine","_os","module","exports","$","parser","prop","this","BROWSER_PLATFORM","IP_ADDRESS","Context","time","osName","osVersion","deviceModel","deviceVendor","nextEventId","eventPropertyMap","defaultPageViewEventEnrichment","type","setup","execute","transformedPropertyName","fileDownloadTracking","observer","eventListeners","addEventListener","handler","removeClickListeners","addFileDownloadListener","ext","links","fileExtension","mutations","mutation","node","teardown","formInteractionTracking","extractFormAction","form","formDestination","addFormInteractionListener","forms","hasFormChanged","convertProxyObjectToRealObject","instance","name_1","isInstanceProxy","instanceProxy","AmplitudeBrowser","_y","_z","legacyCookies","previousCookies","queryParams","browserOptions","isNewSession","connector","webAttribution","pageViewTrackingOptions","_0","previousSessionId","currentTime","timeSinceLastEvent","createInstance","track","_initialized","initAmplitude","trackAmplitude","eventName","amplitudeTrack"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56]}