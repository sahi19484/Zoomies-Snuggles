import{c as jt,g as zt}from"./index-fJax_Esn.js";var Qe=function(t,e){return Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])},Qe(t,e)};function Ie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qe(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var E=function(){return E=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},E.apply(this,arguments)};function Ye(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]]);return i}function w(t,e,i,r){function n(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function c(v){try{d(r.next(v))}catch(g){a(g)}}function f(v){try{d(r.throw(v))}catch(g){a(g)}}function d(v){v.done?o(v.value):n(v.value).then(c,f)}d((r=r.apply(t,e||[])).next())})}function _(t,e){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(v){return f([d,v])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(i=0)),i;)try{if(r=1,n&&(o=d[0]&2?n.return:d[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,d[1])).done)return o;switch(n=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(v){d=[6,v],n=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function ue(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),n,o=[],a;try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return o}function J(t,e,i){if(i||arguments.length===2)for(var r=0,n=e.length,o;r<n;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var z;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(z||(z={}));var ie;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue"})(ie||(ie={}));var pe;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(pe||(pe={}));var Y;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(Y||(Y={}));var K;(function(t){t.BEFORE="before",t.ENRICHMENT="enrichment",t.DESTINATION="destination"})(K||(K={}));var Ne;(function(t){t.US="US",t.EU="EU",t.STAGING="STAGING"})(Ne||(Ne={}));var B;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(B||(B={}));var Le;(function(t){t.XHR="xhr",t.SendBeacon="beacon",t.Fetch="fetch"})(Le||(Le={}));var ut="-",qe="AMP",Gt="".concat(qe,"_unsent"),Ot="https://api2.amplitude.com/2/httpapi",Kt="https://api.eu.amplitude.com/2/httpapi",Ht="https://api2.amplitude.com/batch",Wt="https://api.eu.amplitude.com/batch",Qt=1e3,Xe=function(t){if(Object.keys(t).length>Qt)return!1;for(var e in t){var i=t[e];if(!Pt(e,i))return!1}return!0},Pt=function(t,e){var i,r;if(typeof t!="string")return!1;if(Array.isArray(e)){var n=!0;try{for(var o=ue(e),a=o.next();!a.done;a=o.next()){var c=a.value;if(Array.isArray(c))return!1;if(typeof c=="object")n=n&&Xe(c);else if(!["number","string"].includes(typeof c))return!1;if(!n)return!1}}catch(f){i={error:f}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}}else{if(e==null)return!1;if(typeof e=="object")return Xe(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},Me=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return E({},this._properties)},t.prototype.set=function(e,i){return this._safeSet(z.SET,e,i),this},t.prototype.setOnce=function(e,i){return this._safeSet(z.SET_ONCE,e,i),this},t.prototype.append=function(e,i){return this._safeSet(z.APPEND,e,i),this},t.prototype.prepend=function(e,i){return this._safeSet(z.PREPEND,e,i),this},t.prototype.postInsert=function(e,i){return this._safeSet(z.POSTINSERT,e,i),this},t.prototype.preInsert=function(e,i){return this._safeSet(z.PREINSERT,e,i),this},t.prototype.remove=function(e,i){return this._safeSet(z.REMOVE,e,i),this},t.prototype.add=function(e,i){return this._safeSet(z.ADD,e,i),this},t.prototype.unset=function(e){return this._safeSet(z.UNSET,e,ut),this},t.prototype.clearAll=function(){return this._properties={},this._properties[z.CLEAR_ALL]=ut,this},t.prototype._safeSet=function(e,i,r){if(this._validate(e,i,r)){var n=this._properties[e];return n===void 0&&(n={},this._properties[e]=n),n[i]=r,this._propertySet.add(i),!0}return!1},t.prototype._validate=function(e,i,r){return this._properties[z.CLEAR_ALL]!==void 0||this._propertySet.has(i)?!1:e===z.ADD?typeof r=="number":e!==z.UNSET&&e!==z.REMOVE?Pt(i,r):!0},t}(),Yt=function(t,e,i){var r=typeof t=="string"?{event_type:t}:t;return E(E(E({},r),i),e&&{event_properties:e})},Rt=function(t,e){var i=E(E({},e),{event_type:pe.IDENTIFY,user_properties:t.getUserProperties()});return i},Xt=function(t,e,i,r){var n,o=E(E({},r),{event_type:pe.GROUP_IDENTIFY,group_properties:i.getUserProperties(),groups:(n={},n[t]=e,n)});return o},$t=function(t,e,i){var r,n=new Me;n.set(t,e);var o=E(E({},i),{event_type:pe.IDENTIFY,user_properties:n.getUserProperties(),groups:(r={},r[t]=e,r)});return o},Zt=function(t,e){return E(E({},e),{event_type:pe.REVENUE,event_properties:t.getEventProperties()})},Ee=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=B.Unknown),{event:t,code:e,message:i}},Jt=function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,i){return w(this,void 0,void 0,function(){return _(this,function(r){switch(r.label){case 0:return[4,e.setup(i,this.client)];case 1:return r.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e,i){var r;return w(this,void 0,void 0,function(){var n,o;return _(this,function(a){switch(a.label){case 0:return n=this.plugins.findIndex(function(c){return c.name===e}),n===-1?(i.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(o=this.plugins[n],this.plugins.splice(n,1),[4,(r=o.teardown)===null||r===void 0?void 0:r.call(o)]);case 1:return a.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var i=this.plugins;i.map(function(r){var n;return(n=r.teardown)===null||n===void 0?void 0:n.call(r)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var i=this;return new Promise(function(r){i.queue.push([e,r]),i.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var i=this;this.applying||(this.applying=!0,setTimeout(function(){i.apply(i.queue.shift()).then(function(){i.applying=!1,i.queue.length>0&&i.scheduleApply(0)})},e))},t.prototype.apply=function(e){return w(this,void 0,void 0,function(){var i,r,n,o,a,c,f,p,u,d,v,g,s,p,u,l,h,m,I,y,b,P;return _(this,function(S){switch(S.label){case 0:if(!e)return[2];i=F(e,1),r=i[0],n=F(e,2),o=n[1],a=this.plugins.filter(function(x){return x.type===K.BEFORE}),S.label=1;case 1:S.trys.push([1,6,7,8]),c=ue(a),f=c.next(),S.label=2;case 2:return f.done?[3,5]:(p=f.value,[4,p.execute(E({},r))]);case 3:if(u=S.sent(),u===null)return o({event:r,code:0,message:""}),[2];r=u,S.label=4;case 4:return f=c.next(),[3,2];case 5:return[3,8];case 6:return d=S.sent(),I={error:d},[3,8];case 7:try{f&&!f.done&&(y=c.return)&&y.call(c)}finally{if(I)throw I.error}return[7];case 8:v=this.plugins.filter(function(x){return x.type===K.ENRICHMENT}),S.label=9;case 9:S.trys.push([9,14,15,16]),g=ue(v),s=g.next(),S.label=10;case 10:return s.done?[3,13]:(p=s.value,[4,p.execute(E({},r))]);case 11:if(u=S.sent(),u===null)return o({event:r,code:0,message:""}),[2];r=u,S.label=12;case 12:return s=g.next(),[3,10];case 13:return[3,16];case 14:return l=S.sent(),b={error:l},[3,16];case 15:try{s&&!s.done&&(P=g.return)&&P.call(g)}finally{if(b)throw b.error}return[7];case 16:return h=this.plugins.filter(function(x){return x.type===K.DESTINATION}),m=h.map(function(x){var C=E({},r);return x.execute(C).catch(function(L){return Ee(C,0,String(L))})}),Promise.all(m).then(function(x){var C=F(x,1),L=C[0];o(L)}),[2]}})})},t.prototype.flush=function(){return w(this,void 0,void 0,function(){var e,i,r,n=this;return _(this,function(o){switch(o.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(a){return n.apply(a)}))];case 1:return o.sent(),i=this.plugins.filter(function(a){return a.type===K.DESTINATION}),r=i.map(function(a){return a.flush&&a.flush()}),[4,Promise.all(r)];case 2:return o.sent(),[2]}})})},t}(),ei="Event tracked successfully",ti="Unexpected error occurred",ii="Event rejected due to exceeded retry count",ri="Event skipped due to optOut config",ni="Event rejected due to missing API key",oi="Invalid API key",ai="Client not initialized",Q=function(t){return{promise:t||Promise.resolve()}},si=function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new Jt(this),this.name=e}return t.prototype._init=function(e){return w(this,void 0,void 0,function(){return _(this,function(i){switch(i.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return i.sent(),[2]}})})},t.prototype.runQueuedFunctions=function(e){return w(this,void 0,void 0,function(){var i,r,n,o,a,c,f;return _(this,function(d){switch(d.label){case 0:i=this[e],this[e]=[],d.label=1;case 1:d.trys.push([1,6,7,8]),r=ue(i),n=r.next(),d.label=2;case 2:return n.done?[3,5]:(o=n.value,[4,o()]);case 3:d.sent(),d.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return a=d.sent(),c={error:a},[3,8];case 7:try{n&&!n.done&&(f=r.return)&&f.call(r)}finally{if(c)throw c.error}return[7];case 8:return[2]}})})},t.prototype.track=function(e,i,r){var n=Yt(e,i,r);return Q(this.dispatch(n))},t.prototype.identify=function(e,i){var r=Rt(e,i);return Q(this.dispatch(r))},t.prototype.groupIdentify=function(e,i,r,n){var o=Xt(e,i,r,n);return Q(this.dispatch(o))},t.prototype.setGroup=function(e,i,r){var n=$t(e,i,r);return Q(this.dispatch(n))},t.prototype.revenue=function(e,i){var r=Zt(e,i);return Q(this.dispatch(r))},t.prototype.add=function(e){return this.config?Q(this.timeline.register(e,this.config)):(this.q.push(this.add.bind(this,e)),Q())},t.prototype.remove=function(e){return this.config?Q(this.timeline.deregister(e,this.config)):(this.q.push(this.remove.bind(this,e)),Q())},t.prototype.dispatchWithCallback=function(e,i){if(!this.config)return i(Ee(e,0,ai));this.process(e).then(i)},t.prototype.dispatch=function(e){return w(this,void 0,void 0,function(){var i=this;return _(this,function(r){return this.config?[2,this.process(e)]:[2,new Promise(function(n){i.dispatchQ.push(i.dispatchWithCallback.bind(i,e,n))})]})})},t.prototype.process=function(e){return w(this,void 0,void 0,function(){var n,i,r,n;return _(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.config.optOut?[2,Ee(e,0,ri)]:[4,this.timeline.push(e)];case 1:return n=o.sent(),n.code===200?this.config.loggerProvider.log(n.message):this.config.loggerProvider.error(n.message),[2,n];case 2:return i=o.sent(),this.config.loggerProvider.error(i),r=String(i),n=Ee(e,0,r),[2,n];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.config){this.q.push(this.setOptOut.bind(this,!!e));return}this.config.optOut=!!e},t.prototype.flush=function(){return Q(this.timeline.flush())},t}(),ui=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setCurrency=function(e){return this.currency=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setEventProperties=function(e){return Xe(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?E({},this.properties):{};return e[ie.REVENUE_PRODUCT_ID]=this.productId,e[ie.REVENUE_QUANTITY]=this.quantity,e[ie.REVENUE_PRICE]=this.price,e[ie.REVENUE_TYPE]=this.revenueType,e[ie.REVENUE_CURRENCY]=this.currency,e[ie.REVENUE]=this.revenue,e},t}(),ci=function(t,e){var i=Math.max(e,1);return t.reduce(function(r,n,o){var a=Math.floor(o/i);return r[a]||(r[a]=[]),r[a].push(n),r},[])},Re="Amplitude Logger ",li=function(){function t(){this.logLevel=Y.None}return t.prototype.disable=function(){this.logLevel=Y.None},t.prototype.enable=function(e){e===void 0&&(e=Y.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.logLevel<Y.Verbose||console.log("".concat(Re,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.logLevel<Y.Warn||console.warn("".concat(Re,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.logLevel<Y.Error||console.error("".concat(Re,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.logLevel<Y.Debug||console.log("".concat(Re,"[Debug]: ").concat(e.join(" ")))},t}(),Ce=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:Y.Warn,loggerProvider:new li,optOut:!1,serverUrl:Ot,serverZone:Ne.US,useBatch:!1}},di=function(){function t(e){var i,r,n,o;this._optOut=!1;var a=Ce();this.apiKey=e.apiKey,this.flushIntervalMillis=(i=e.flushIntervalMillis)!==null&&i!==void 0?i:a.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||a.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||a.flushQueueSize,this.instanceName=e.instanceName||a.instanceName,this.loggerProvider=e.loggerProvider||a.loggerProvider,this.logLevel=(r=e.logLevel)!==null&&r!==void 0?r:a.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.optOut=(n=e.optOut)!==null&&n!==void 0?n:a.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||a.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(o=e.useBatch)!==null&&o!==void 0?o:a.useBatch,this.loggerProvider.enable(this.logLevel);var c=xt(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=c.serverZone,this.serverUrl=c.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}(),fi=function(t,e){return t===Ne.EU?e?Wt:Kt:e?Ht:Ot},xt=function(t,e,i){if(t===void 0&&(t=""),e===void 0&&(e=Ce().serverZone),i===void 0&&(i=Ce().useBatch),t)return{serverUrl:t,serverZone:void 0};var r=["US","EU"].includes(e)?e:Ce().serverZone;return{serverZone:r,serverUrl:fi(r,i)}};function vi(t){return t instanceof Error?t.message:String(t)}function xe(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body))}catch{}return e}var hi=function(){function t(){this.name="amplitude",this.type=K.DESTINATION,this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return t.prototype.setup=function(e){var i;return w(this,void 0,void 0,function(){var r,n=this;return _(this,function(o){switch(o.label){case 0:return this.config=e,this.storageKey="".concat(Gt,"_").concat(this.config.apiKey.substring(0,10)),[4,(i=this.config.storageProvider)===null||i===void 0?void 0:i.get(this.storageKey)];case 1:return r=o.sent(),this.saveEvents(),r&&r.length>0&&Promise.all(r.map(function(a){return n.execute(a)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var i=this;return new Promise(function(r){var n={event:e,attempts:0,callback:function(o){return r(o)},timeout:0};i.addToQueue(n)})},t.prototype.addToQueue=function(){for(var e=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var n=i.filter(function(o){return o.attempts<e.config.flushMaxRetries?(o.attempts+=1,!0):(e.fulfillRequest([o],500,ii),!1)});n.forEach(function(o){if(e.queue=e.queue.concat(o),o.timeout===0){e.schedule(e.config.flushIntervalMillis);return}setTimeout(function(){o.timeout=0,e.schedule(0)},o.timeout)}),this.saveEvents()},t.prototype.schedule=function(e){var i=this;this.scheduled||(this.scheduled=setTimeout(function(){i.flush(!0).then(function(){i.queue.length>0&&i.schedule(e)})},e))},t.prototype.flush=function(e){return e===void 0&&(e=!1),w(this,void 0,void 0,function(){var i,r,n,o=this;return _(this,function(a){switch(a.label){case 0:return i=[],r=[],this.queue.forEach(function(c){return c.timeout===0?i.push(c):r.push(c)}),this.queue=r,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),n=ci(i,this.config.flushQueueSize),[4,Promise.all(n.map(function(c){return o.send(c,e)}))];case 1:return a.sent(),[2]}})})},t.prototype.send=function(e,i){return i===void 0&&(i=!0),w(this,void 0,void 0,function(){var r,n,o,a,c;return _(this,function(f){switch(f.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,ni)];r={api_key:this.config.apiKey,events:e.map(function(d){var v=d.event;v.extra;var g=Ye(v,["extra"]);return g}),options:{min_id_length:this.config.minIdLength}},f.label=1;case 1:return f.trys.push([1,3,,4]),n=xt(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(n,r)];case 2:return o=f.sent(),o===null?(this.fulfillRequest(e,0,ti),[2]):i?(this.handleResponse(o,e),[3,4]):("body"in o?this.fulfillRequest(e,o.statusCode,"".concat(o.status,": ").concat(xe(o))):this.fulfillRequest(e,o.statusCode,o.status),[2]);case 3:return a=f.sent(),this.config.loggerProvider.error(a),c=vi(a),this.fulfillRequest(e,0,c),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,i){var r=e.status;switch(r){case B.Success:{this.handleSuccessResponse(e,i);break}case B.Invalid:{this.handleInvalidResponse(e,i);break}case B.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,i);break}case B.RateLimit:{this.handleRateLimitResponse(e,i);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(r,"' provided for ").concat(i.length,' events"}')),this.handleOtherResponse(i);break}}},t.prototype.handleSuccessResponse=function(e,i){this.fulfillRequest(i,e.statusCode,ei)},t.prototype.handleInvalidResponse=function(e,i){var r=this;if(e.body.missingField||e.body.error.startsWith(oi)){this.fulfillRequest(i,e.statusCode,e.body.error);return}var n=J(J(J(J([],F(Object.values(e.body.eventsWithInvalidFields)),!1),F(Object.values(e.body.eventsWithMissingFields)),!1),F(Object.values(e.body.eventsWithInvalidIdLengths)),!1),F(e.body.silencedEvents),!1).flat(),o=new Set(n),a=i.filter(function(c,f){if(o.has(f)){r.fulfillRequest([c],e.statusCode,e.body.error);return}return!0});a.length>0&&this.config.loggerProvider.warn(xe(e)),this.addToQueue.apply(this,J([],F(a),!1))},t.prototype.handlePayloadTooLargeResponse=function(e,i){if(i.length===1){this.fulfillRequest(i,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(xe(e)),this.config.flushQueueSize/=2,this.addToQueue.apply(this,J([],F(i),!1))},t.prototype.handleRateLimitResponse=function(e,i){var r=this,n=Object.keys(e.body.exceededDailyQuotaUsers),o=Object.keys(e.body.exceededDailyQuotaDevices),a=e.body.throttledEvents,c=new Set(n),f=new Set(o),d=new Set(a),v=i.filter(function(g,s){if(g.event.user_id&&c.has(g.event.user_id)||g.event.device_id&&f.has(g.event.device_id)){r.fulfillRequest([g],e.statusCode,e.body.error);return}return d.has(s)&&(g.timeout=r.throttleTimeout),!0});v.length>0&&this.config.loggerProvider.warn(xe(e)),this.addToQueue.apply(this,J([],F(v),!1))},t.prototype.handleOtherResponse=function(e){var i=this;this.addToQueue.apply(this,J([],F(e.map(function(r){return r.timeout=r.attempts*i.retryTimeout,r})),!1))},t.prototype.fulfillRequest=function(e,i,r){this.saveEvents(),e.forEach(function(n){return n.callback(Ee(n.event,i,r))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=Array.from(this.queue.map(function(i){return i.event}));this.config.storageProvider.set(this.storageKey,e)}},t}(),pi=function(t){var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(i){return i.trim()})},M=function(t){return function(){var e=E({},t.config),i=e.loggerProvider,r=e.logLevel;return{logger:i,logLevel:r}}},gi=function(t,e){var i,r;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var n=ue(e.split(".")),o=n.next();!o.done;o=n.next()){var a=o.value;if(a in t)t=t[a];else return}}catch(c){i={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return t},q=function(t,e){return function(){var i,r,n={};try{for(var o=ue(e),a=o.next();!a.done;a=o.next()){var c=a.value;n[c]=gi(t,c)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return n}},V=function(t,e,i,r,n){return n===void 0&&(n=null),function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var c=i(),f=c.logger,d=c.logLevel;if(d&&d<Y.Debug||!d||!f)return t.apply(n,o);var v={type:"invoke public method",name:e,args:o,stacktrace:pi(1),time:{start:new Date().toISOString()},states:{}};r&&v.states&&(v.states.before=r());var g=t.apply(n,o);return g&&g.promise?g.promise.then(function(){r&&v.states&&(v.states.after=r()),v.time&&(v.time.end=new Date().toISOString()),f.debug(JSON.stringify(v,null,2))}):(r&&v.states&&(v.states.after=r()),v.time&&(v.time.end=new Date().toISOString()),f.debug(JSON.stringify(v,null,2))),g}},Ve=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Ve)},At=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return w(this,void 0,void 0,function(){return _(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return w(this,void 0,void 0,function(){return _(this,function(i){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return w(this,void 0,void 0,function(){var i;return _(this,function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:return i=r.sent(),[2,i?JSON.stringify(i):void 0]}})})},t.prototype.set=function(e,i){return w(this,void 0,void 0,function(){return _(this,function(r){return this.memoryStorage.set(e,i),[2]})})},t.prototype.remove=function(e){return w(this,void 0,void 0,function(){return _(this,function(i){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return w(this,void 0,void 0,function(){return _(this,function(e){return this.memoryStorage.clear(),[2]})})},t}(),et=function(){function t(){}return t.prototype.send=function(e,i){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var i,r,n,o,a,c,f,d,v,g,s,p,u,l,h,m,I,y,b,P,S,x;if(typeof e!="object")return null;var C=e.code||0,L=this.buildStatus(C);switch(L){case B.Success:return{status:L,statusCode:C,body:{eventsIngested:(i=e.events_ingested)!==null&&i!==void 0?i:0,payloadSizeBytes:(r=e.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(n=e.server_upload_time)!==null&&n!==void 0?n:0}};case B.Invalid:return{status:L,statusCode:C,body:{error:(o=e.error)!==null&&o!==void 0?o:"",missingField:(a=e.missing_field)!==null&&a!==void 0?a:"",eventsWithInvalidFields:(c=e.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(f=e.events_with_missing_fields)!==null&&f!==void 0?f:{},eventsWithInvalidIdLengths:(d=e.events_with_invalid_id_lengths)!==null&&d!==void 0?d:{},epsThreshold:(v=e.eps_threshold)!==null&&v!==void 0?v:0,exceededDailyQuotaDevices:(g=e.exceeded_daily_quota_devices)!==null&&g!==void 0?g:{},silencedDevices:(s=e.silenced_devices)!==null&&s!==void 0?s:[],silencedEvents:(p=e.silenced_events)!==null&&p!==void 0?p:[],throttledDevices:(u=e.throttled_devices)!==null&&u!==void 0?u:{},throttledEvents:(l=e.throttled_events)!==null&&l!==void 0?l:[]}};case B.PayloadTooLarge:return{status:L,statusCode:C,body:{error:(h=e.error)!==null&&h!==void 0?h:""}};case B.RateLimit:return{status:L,statusCode:C,body:{error:(m=e.error)!==null&&m!==void 0?m:"",epsThreshold:(I=e.eps_threshold)!==null&&I!==void 0?I:0,throttledDevices:(y=e.throttled_devices)!==null&&y!==void 0?y:{},throttledUsers:(b=e.throttled_users)!==null&&b!==void 0?b:{},exceededDailyQuotaDevices:(P=e.exceeded_daily_quota_devices)!==null&&P!==void 0?P:{},exceededDailyQuotaUsers:(S=e.exceeded_daily_quota_users)!==null&&S!==void 0?S:{},throttledEvents:(x=e.throttled_events)!==null&&x!==void 0?x:[]}};case B.Timeout:default:return{status:L,statusCode:C}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?B.Success:e===429?B.RateLimit:e===413?B.PayloadTooLarge:e===408?B.Timeout:e>=400&&e<500?B.Invalid:e>=500?B.Failed:B.Unknown},t}(),mi=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:yi(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),yi=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},bi=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(i){e(i)}),this.queue=[])},t}(),re=function(){return re=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},re.apply(this,arguments)};function Ue(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),n,o=[],a;try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return o}var De=function(t,e){var i,r,n=["string","number","boolean","undefined"],o=typeof t,a=typeof e;if(o!==a)return!1;try{for(var c=Ue(n),f=c.next();!f.done;f=c.next()){var d=f.value;if(d===o)return t===e}}catch(h){i={error:h}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var v=Array.isArray(t),g=Array.isArray(e);if(v!==g)return!1;if(v&&g){for(var s=0;s<t.length;s++)if(!De(t[s],e[s]))return!1}else{var p=Object.keys(t).sort(),u=Object.keys(e).sort();if(!De(p,u))return!1;var l=!0;return Object.keys(t).forEach(function(h){De(t[h],e[h])||(l=!1)}),l}return!0},wi="$set",_i="$unset",Ei="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),i=e.length,r=new Array(i);i--;)r[i]=[e[i],t[e[i]]];return r});var Ii=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,i=re({},this.identity.userProperties),r=re(re({},this.identity),{userProperties:i});return{setUserId:function(n){return r.userId=n,this},setDeviceId:function(n){return r.deviceId=n,this},setUserProperties:function(n){return r.userProperties=n,this},setOptOut:function(n){return r.optOut=n,this},updateUserProperties:function(n){var o,a,c,f,d,v,g=r.userProperties||{};try{for(var s=Ue(Object.entries(n)),p=s.next();!p.done;p=s.next()){var u=ct(p.value,2),l=u[0],h=u[1];switch(l){case wi:try{for(var m=(c=void 0,Ue(Object.entries(h))),I=m.next();!I.done;I=m.next()){var y=ct(I.value,2),b=y[0],P=y[1];g[b]=P}}catch(C){c={error:C}}finally{try{I&&!I.done&&(f=m.return)&&f.call(m)}finally{if(c)throw c.error}}break;case _i:try{for(var S=(d=void 0,Ue(Object.keys(h))),x=S.next();!x.done;x=S.next()){var b=x.value;delete g[b]}}catch(C){d={error:C}}finally{try{x&&!x.done&&(v=S.return)&&v.call(S)}finally{if(d)throw d.error}}break;case Ei:g={};break}}}catch(C){o={error:C}}finally{try{p&&!p.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return r.userProperties=g,this},commit:function(){return e.setIdentity(r),this}}},t.prototype.getIdentity=function(){return re({},this.identity)},t.prototype.setIdentity=function(e){var i=re({},this.identity);this.identity=re({},e),De(i,this.identity)||this.listeners.forEach(function(r){r(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),_e=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,Si=function(){function t(){this.identityStore=new Ii,this.eventBridge=new bi,this.applicationContextProvider=new mi}return t.getInstance=function(e){return _e.analyticsConnectorInstances||(_e.analyticsConnectorInstances={}),_e.analyticsConnectorInstances[e]||(_e.analyticsConnectorInstances[e]=new t),_e.analyticsConnectorInstances[e]},t}(),ge=function(t){return t===void 0&&(t="$default_instance"),Si.getInstance(t)},Ti=function(t,e){ge(e).identityStore.editIdentity().setUserId(t).commit()},ki=function(t,e){ge(e).identityStore.editIdentity().setDeviceId(t).commit()},Oi=function(t,e){ge(e).identityStore.editIdentity().setOptOut(t).commit()},X=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},$e=function(){var t,e=X();if(!(!((t=e==null?void 0:e.location)===null||t===void 0)&&t.search))return{};var i=e.location.search.substring(1).split("&").filter(Boolean),r=i.reduce(function(n,o){var a=o.split("=",2),c=lt(a[0]),f=lt(a[1]);return f&&(n[c]=f),n},{});return r},lt=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},Pi="utm_campaign",Ri="utm_content",xi="utm_id",Ai="utm_medium",Ci="utm_source",Ui="utm_term",dt="dclid",ft="fbclid",vt="gbraid",ht="gclid",pt="ko_click_id",gt="li_fat_id",mt="msclkid",yt="rtd_cid",bt="ttclid",wt="twclid",_t="wbraid",tt={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},Ct=function(){function t(){}return t.prototype.parse=function(){return w(this,void 0,void 0,function(){return _(this,function(e){return[2,E(E(E(E({},tt),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=$e(),i=e[Pi],r=e[Ri],n=e[xi],o=e[Ai],a=e[Ci],c=e[Ui];return{utm_campaign:i,utm_content:r,utm_id:n,utm_medium:o,utm_source:a,utm_term:c}},t.prototype.getReferrer=function(){var e,i,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(i=(e=r.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&i!==void 0?i:void 0}catch{}return r},t.prototype.getClickIds=function(){var e,i=$e();return e={},e[dt]=i[dt],e[ft]=i[ft],e[vt]=i[vt],e[ht]=i[ht],e[pt]=i[pt],e[gt]=i[gt],e[mt]=i[mt],e[yt]=i[yt],e[bt]=i[bt],e[wt]=i[wt],e[_t]=i[_t],e},t}(),Ut=function(t,e,i){return e===void 0&&(e=""),i===void 0&&(i=10),[qe,e,t.substring(0,i)].filter(Boolean).join("_")},Di=function(t){return"".concat(qe.toLowerCase(),"_").concat(t.substring(0,6))},Ni=function(t){return typeof t=="boolean"?t:!!(t!=null&&t.fileDownloads)},Li=function(t){return typeof t=="boolean"?t:!!(t!=null&&t.formInteractions)},Mi=function(t){return typeof t=="boolean"?t:!!((t==null?void 0:t.pageViews)===!0||t!=null&&t.pageViews&&typeof t.pageViews=="object")},qi=function(t){return typeof t=="boolean"?t:!!(t!=null&&t.sessions)},Vi=function(t){var e,i=!((e=t.attribution)===null||e===void 0)&&e.trackPageViews?"attribution":function(){return!1},r=void 0,n="Page View",o=Mi(t.defaultTracking);return o&&(i=void 0,n=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(i=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(r=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(n=t.defaultTracking.pageViews.eventType))),{trackOn:i,trackHistoryChanges:r,eventType:n}},Fi=function(){var t,e,i,r;if(typeof navigator>"u")return"";var n=navigator.userLanguage;return(r=(i=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&i!==void 0?i:n)!==null&&r!==void 0?r:""},Bi=function(){function t(){this.name="identity",this.type=K.BEFORE,this.identityStore=ge().identityStore}return t.prototype.execute=function(e){return w(this,void 0,void 0,function(){var i;return _(this,function(r){return i=e.user_properties,i&&this.identityStore.editIdentity().updateUserProperties(i).commit(),[2,e]})})},t.prototype.setup=function(e){return w(this,void 0,void 0,function(){return _(this,function(i){return e.instanceName&&(this.identityStore=ge(e.instanceName).identityStore),[2]})})},t}(),Ze=function(){function t(e){this.options=E({},e)}return t.prototype.isEnabled=function(){return w(this,void 0,void 0,function(){var e,i,r;return _(this,function(n){switch(n.label){case 0:if(!X())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),i="AMP_TEST",n.label=1;case 1:return n.trys.push([1,4,5,7]),[4,e.set(i,t.testValue)];case 2:return n.sent(),[4,e.get(i)];case 3:return r=n.sent(),[2,r===t.testValue];case 4:return n.sent(),[2,!1];case 5:return[4,e.remove(i)];case 6:return n.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return w(this,void 0,void 0,function(){var i;return _(this,function(r){switch(r.label){case 0:return[4,this.getRaw(e)];case 1:if(i=r.sent(),!i)return[2,void 0];try{try{i=decodeURIComponent(atob(i))}catch{}return[2,JSON.parse(i)]}catch{return[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var i;return w(this,void 0,void 0,function(){var r,n,o;return _(this,function(a){return r=X(),n=(i=r==null?void 0:r.document.cookie.split("; "))!==null&&i!==void 0?i:[],o=n.find(function(c){return c.indexOf(e+"=")===0}),o?[2,o.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,i){var r;return w(this,void 0,void 0,function(){var n,o,a,c,f,d;return _(this,function(v){try{n=(r=this.options.expirationDays)!==null&&r!==void 0?r:0,o=i!==null?n:-1,a=void 0,o&&(c=new Date,c.setTime(c.getTime()+o*24*60*60*1e3),a=c),f="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(i)))),a&&(f+="; expires=".concat(a.toUTCString())),f+="; path=/",this.options.domain&&(f+="; domain=".concat(this.options.domain)),this.options.secure&&(f+="; Secure"),this.options.sameSite&&(f+="; SameSite=".concat(this.options.sameSite)),d=X(),d&&(d.document.cookie=f)}catch{}return[2]})})},t.prototype.remove=function(e){return w(this,void 0,void 0,function(){return _(this,function(i){switch(i.label){case 0:return[4,this.set(e,null)];case 1:return i.sent(),[2]}})})},t.prototype.reset=function(){return w(this,void 0,void 0,function(){return _(this,function(e){return[2]})})},t}(),ji=function(t){Ie(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(i,r){return w(this,void 0,void 0,function(){var n,o,a;return _(this,function(c){switch(c.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return n={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(r),method:"POST"},[4,fetch(i,n)];case 1:return o=c.sent(),[4,o.text()];case 2:a=c.sent();try{return[2,this.buildResponse(JSON.parse(a))]}catch{return[2,this.buildResponse({code:o.status})]}return[2]}})})},e}(et),zi=function(t){var e={};for(var i in t){var r=t[i];r&&(e[i]=r)}return e},Gi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i,r={},n=X(),o=void 0,a,c=F(t,2),f=c[0],d=c[1];f&&"init"in f?(i=f,d&&(r=d)):f&&(r=f);var v=function(){return w(void 0,void 0,void 0,function(){var h,m,I;return _(this,function(y){switch(y.label){case 0:return m={event_type:(I=r.eventType)!==null&&I!==void 0?I:"Page View"},h=[{}],[4,Ki()];case 1:return[2,(m.event_properties=E.apply(void 0,[E.apply(void 0,h.concat([y.sent()])),{page_domain:typeof location<"u"&&location.hostname||"",page_location:typeof location<"u"&&location.href||"",page_path:typeof location<"u"&&location.pathname||"",page_title:typeof document<"u"&&document.title||"",page_url:typeof location<"u"&&location.href.split("?")[0]||""}]),m)]}})})},g=function(){return typeof r.trackOn>"u"||typeof r.trackOn=="function"&&r.trackOn()},s=typeof location<"u"?location.href:null,p=function(){return w(void 0,void 0,void 0,function(){var h,m,I,y;return _(this,function(b){switch(b.label){case 0:return h=location.href,m=Wi(r.trackHistoryChanges,h,s||"")&&g(),s=h,m?(o==null||o.log("Tracking page view event"),i!=null?[3,1]:[3,3]):[3,4];case 1:return y=(I=i).track,[4,v()];case 2:y.apply(I,[b.sent()]),b.label=3;case 3:b.label=4;case 4:return[2]}})})},u=function(){p()},l={name:"page-view-tracking",type:K.ENRICHMENT,setup:function(h,m){return w(void 0,void 0,void 0,function(){var I,y,b,P,S;return _(this,function(x){switch(x.label){case 0:return i=i??m,i?(o=h.loggerProvider,o.log("Installing @amplitude/plugin-page-view-tracking-browser"),r.trackOn=!((P=h.attribution)===null||P===void 0)&&P.trackPageViews?"attribution":r.trackOn,!m&&(!((S=h.attribution)===null||S===void 0)&&S.trackPageViews)&&(o.warn("@amplitude/plugin-page-view-tracking-browser overrides page view tracking behavior defined in @amplitude/analytics-browser. Resolve by disabling page view tracking in @amplitude/analytics-browser."),h.attribution.trackPageViews=!1),r.trackHistoryChanges&&n&&(n.addEventListener("popstate",u),a=n.history.pushState,n.history.pushState=new Proxy(n.history.pushState,{apply:function(C,L,j){var $=F(j,3),R=$[0],H=$[1],ee=$[2];C.apply(L,[R,H,ee]),p()}})),g()?(o.log("Tracking page view event"),b=(y=i).track,[4,v()]):[3,2]):(I=f?"Options":"undefined",h.loggerProvider.error("Argument of type '".concat(I,"' is not assignable to parameter of type 'BrowserClient'.")),[2]);case 1:b.apply(y,[x.sent()]),x.label=2;case 2:return[2]}})})},execute:function(h){return w(void 0,void 0,void 0,function(){var m;return _(this,function(I){switch(I.label){case 0:return r.trackOn==="attribution"&&Hi(h)?(o==null||o.log("Enriching campaign event to page view event with campaign parameters"),[4,v()]):[3,2];case 1:m=I.sent(),h.event_type=m.event_type,h.event_properties=E(E({},h.event_properties),m.event_properties),I.label=2;case 2:return[2,h]}})})},teardown:function(){return w(void 0,void 0,void 0,function(){return _(this,function(h){return n&&(n.removeEventListener("popstate",u),a&&(n.history.pushState=a)),[2]})})}};return l.__trackHistoryPageView=p,l},Ki=function(){return w(void 0,void 0,void 0,function(){var t;return _(this,function(e){switch(e.label){case 0:return t=zi,[4,new Ct().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},Hi=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,i=e[z.SET]||{},r=e[z.UNSET]||{},n=J(J([],F(Object.keys(i)),!1),F(Object.keys(r)),!1);return Object.keys(tt).every(function(o){return n.includes(o)})}return!1},Wi=function(t,e,i){switch(t){case"pathOnly":return e.split("?")[0]!==i.split("?")[0];default:return e!==i}},Qi=function(t,e,i){return i===void 0&&(i=10),[qe,e,t.substring(0,i)].filter(Boolean).join("_")},Et=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},Yi=function(t,e,i){var r;t.referrer;var n=t.referring_domain,o=Ye(t,["referrer","referring_domain"]),a=e||{};a.referrer;var c=a.referring_domain,f=Ye(a,["referrer","referring_domain"]);if(t.referring_domain&&(!((r=i.excludeReferrers)===null||r===void 0)&&r.includes(t.referring_domain)))return!1;var d=JSON.stringify(o)!==JSON.stringify(f),v=Et(n||"")!==Et(c||"");return!e||d||v},Xi=function(t,e){var i=E(E({},tt),t),r=Object.entries(i).reduce(function(n,o){var a,c=F(o,2),f=c[0],d=c[1];return n.setOnce("initial_".concat(f),(a=d??e.initialEmptyValue)!==null&&a!==void 0?a:"EMPTY"),d?n.set(f,d):n.unset(f)},new Me);return Rt(r)},$i=function(){for(var t=this,e,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var n,o={},a=F(i,2),c=a[0],f=a[1];c&&"init"in c?(n=c,f&&(o=f)):c&&(o=c);var d=(e=o.excludeReferrers)!==null&&e!==void 0?e:[];typeof location<"u"&&d.unshift(location.hostname),o=E(E({disabled:!1,initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1},o),{excludeReferrers:d});var v={name:"web-attribution",type:K.BEFORE,setup:function(g,s){var p;return w(this,void 0,void 0,function(){var u,l,h,m,I,y,b,P;return _(this,function(S){switch(S.label){case 0:return n=n??s,n?o.disabled?(g.loggerProvider.log("@amplitude/plugin-web-attribution-browser is disabled. Attribution is not tracked."),[2]):(g.loggerProvider.log("Installing @amplitude/plugin-web-attribution-browser."),!s&&!(!((p=g.attribution)===null||p===void 0)&&p.disabled)&&(g.loggerProvider.warn("@amplitude/plugin-web-attribution-browser overrides web attribution behavior defined in @amplitude/analytics-browser. Resolve by disabling web attribution tracking in @amplitude/analytics-browser."),g.attribution={disabled:!0}),l=g.cookieStorage,h=Qi(g.apiKey,"MKTG"),[4,Promise.all([new Ct().parse(),l.get(h)])]):(u=c?"Options":"undefined",g.loggerProvider.error("Argument of type '".concat(u,"' is not assignable to parameter of type 'BrowserClient'.")),[2]);case 1:return m=F.apply(void 0,[S.sent(),2]),I=m[0],y=m[1],b=this.__pluginEnabledOverride,(b??Yi(I,y,o))&&(o.resetSessionOnNewCampaign&&(n.setSessionId(Date.now()),g.loggerProvider.log("Created a new session for new campaign.")),g.loggerProvider.log("Tracking attribution."),P=Xi(I,o),n.track(P),l.set(h,I)),[2]}})})},execute:function(g){return w(t,void 0,void 0,function(){return _(this,function(s){return[2,g]})})}};return v.__pluginEnabledOverride=void 0,v},Ae=1e3,Dt=function(){function t(e){this.loggerProvider=e==null?void 0:e.loggerProvider}return t.prototype.isEnabled=function(){return w(this,void 0,void 0,function(){var e,i,r,n;return _(this,function(o){switch(o.label){case 0:if(!X())return[2,!1];e=String(Date.now()),i=new t,r="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,i.set(r,e)];case 2:return o.sent(),[4,i.get(r)];case 3:return n=o.sent(),[2,n===e];case 4:return o.sent(),[2,!1];case 5:return[4,i.remove(r)];case 6:return o.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return w(this,void 0,void 0,function(){var i;return _(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return i=r.sent(),i?[2,JSON.parse(i)]:[2,void 0];case 2:return r.sent(),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var i;return w(this,void 0,void 0,function(){return _(this,function(r){return[2,((i=X())===null||i===void 0?void 0:i.localStorage.getItem(e))||void 0]})})},t.prototype.set=function(e,i){var r,n;return w(this,void 0,void 0,function(){var o,a,c;return _(this,function(f){o=Array.isArray(i)&&i.length>Ae;try{a=JSON.stringify(o?i.slice(0,Ae):i),(r=X())===null||r===void 0||r.localStorage.setItem(e,a)}catch{}return o&&(c=i.length-Ae,(n=this.loggerProvider)===null||n===void 0||n.error("Failed to save ".concat(c," events because the queue length exceeded ").concat(Ae,"."))),[2]})})},t.prototype.remove=function(e){var i;return w(this,void 0,void 0,function(){return _(this,function(r){try{(i=X())===null||i===void 0||i.localStorage.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return w(this,void 0,void 0,function(){return _(this,function(i){try{(e=X())===null||e===void 0||e.localStorage.clear()}catch{}return[2]})})},t}(),Zi=function(t){Ie(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.state={done:4},i}return e.prototype.send=function(i,r){return w(this,void 0,void 0,function(){var n=this;return _(this,function(o){return[2,new Promise(function(a,c){typeof XMLHttpRequest>"u"&&c(new Error("XHRTransport is not supported."));var f=new XMLHttpRequest;f.open("POST",i,!0),f.onreadystatechange=function(){if(f.readyState===n.state.done){var d=f.responseText;try{a(n.buildResponse(JSON.parse(d)))}catch{a(n.buildResponse({code:f.status}))}}},f.setRequestHeader("Content-Type","application/json"),f.setRequestHeader("Accept","*/*"),f.send(JSON.stringify(r))})]})})},e}(et),Ji=function(t){Ie(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(i,r){return w(this,void 0,void 0,function(){var n=this;return _(this,function(o){return[2,new Promise(function(a,c){var f=X();if(!(f!=null&&f.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var d=JSON.stringify(r),v=f.navigator.sendBeacon(i,JSON.stringify(r));return a(v?n.buildResponse({code:200,events_ingested:r.events.length,payload_size_bytes:d.length,server_upload_time:Date.now()}):n.buildResponse({code:500}))}catch(g){c(g)}})]})})},e}(et),Nt="1.14.0",Se=function(){var t=new At,e={deviceManufacturer:!0,deviceModel:!0,ipAddress:!0,language:!0,osName:!0,osVersion:!0,platform:!0};return{cookieExpiration:365,cookieSameSite:"Lax",cookieSecure:!1,cookieStorage:t,cookieUpgrade:!0,disableCookies:!1,domain:"",sessionTimeout:30*60*1e3,trackingOptions:e,transportProvider:new ji}},It=function(t){Ie(e,t);function e(i,r){var n=this,o,a,c,f,d,v,g,s,p,u=Se();return n=t.call(this,E(E({flushIntervalMillis:1e3,flushMaxRetries:5,flushQueueSize:30,transportProvider:u.transportProvider},r),{apiKey:i}))||this,n.version=Nt,n._optOut=!1,n.cookieStorage=(o=r==null?void 0:r.cookieStorage)!==null&&o!==void 0?o:u.cookieStorage,n.deviceId=r==null?void 0:r.deviceId,n.lastEventId=r==null?void 0:r.lastEventId,n.lastEventTime=r==null?void 0:r.lastEventTime,n.optOut=!!(r!=null&&r.optOut),n.sessionId=r==null?void 0:r.sessionId,n.userId=r==null?void 0:r.userId,n.appVersion=r==null?void 0:r.appVersion,n.attribution=r==null?void 0:r.attribution,n.cookieExpiration=(a=r==null?void 0:r.cookieExpiration)!==null&&a!==void 0?a:u.cookieExpiration,n.cookieSameSite=(c=r==null?void 0:r.cookieSameSite)!==null&&c!==void 0?c:u.cookieSameSite,n.cookieSecure=(f=r==null?void 0:r.cookieSecure)!==null&&f!==void 0?f:u.cookieSecure,n.cookieUpgrade=(d=r==null?void 0:r.cookieUpgrade)!==null&&d!==void 0?d:u.cookieUpgrade,n.defaultTracking=r==null?void 0:r.defaultTracking,n.disableCookies=(v=r==null?void 0:r.disableCookies)!==null&&v!==void 0?v:u.disableCookies,n.defaultTracking=r==null?void 0:r.defaultTracking,n.domain=(g=r==null?void 0:r.domain)!==null&&g!==void 0?g:u.domain,n.partnerId=r==null?void 0:r.partnerId,n.sessionTimeout=(s=r==null?void 0:r.sessionTimeout)!==null&&s!==void 0?s:u.sessionTimeout,n.trackingOptions=(p=r==null?void 0:r.trackingOptions)!==null&&p!==void 0?p:u.trackingOptions,n}return Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(i){this._deviceId!==i&&(this._deviceId=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(i){this._userId!==i&&(this._userId=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(i){this._sessionId!==i&&(this._sessionId=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(i){this._optOut!==i&&(this._optOut=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(i){this._lastEventTime!==i&&(this._lastEventTime=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(i){this._lastEventId!==i&&(this._lastEventId=i,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var i,r={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId};(i=this.cookieStorage)===null||i===void 0||i.set(Ut(this.apiKey),r)},e}(di),er=function(t,e){return w(void 0,void 0,void 0,function(){var i,r,n,o,a,c,f,d,v,g,s,p,u,l,h;return _(this,function(m){switch(m.label){case 0:return i=Se(),r=(l=e==null?void 0:e.deviceId)!==null&&l!==void 0?l:Ve(),n=e==null?void 0:e.lastEventId,o=e==null?void 0:e.lastEventTime,a=e==null?void 0:e.optOut,c=e==null?void 0:e.sessionId,f=e==null?void 0:e.userId,d=e==null?void 0:e.cookieStorage,v=e==null?void 0:e.domain,g=It.bind,s=[void 0,t],p=[E({},e)],u={cookieStorage:d,deviceId:r,domain:v,lastEventId:n,lastEventTime:o,optOut:a,sessionId:c},[4,ir(e)];case 1:return[2,new(g.apply(It,s.concat([E.apply(void 0,p.concat([(u.storageProvider=m.sent(),u.trackingOptions=E(E({},i.trackingOptions),e==null?void 0:e.trackingOptions),u.transportProvider=(h=e==null?void 0:e.transportProvider)!==null&&h!==void 0?h:Mt(e==null?void 0:e.transport),u.userId=f,u)]))])))]}})})},Lt=function(t,e){return e===void 0&&(e=Se()),w(void 0,void 0,void 0,function(){var i,r,n;return _(this,function(o){switch(o.label){case 0:return i=E(E({},e),t),r=t==null?void 0:t.cookieStorage,n=!r,n?[3,2]:[4,r.isEnabled()];case 1:n=!o.sent(),o.label=2;case 2:return n?[2,tr(i)]:[2,r]}})})},tr=function(t){return w(void 0,void 0,void 0,function(){var e,i;return _(this,function(r){switch(r.label){case 0:return e=new Ze({domain:t.domain,expirationDays:t.cookieExpiration,sameSite:t.cookieSameSite,secure:t.cookieSecure}),i=t.disableCookies,i?[3,2]:[4,e.isEnabled()];case 1:i=!r.sent(),r.label=2;case 2:return i?(e=new Dt,[4,e.isEnabled()]):[3,4];case 3:r.sent()||(e=new At),r.label=4;case 4:return[2,e]}})})},ir=function(t){return w(void 0,void 0,void 0,function(){var e,i,r,n,o,a,c,f,d;return _(this,function(v){switch(v.label){case 0:if(e=t&&Object.prototype.hasOwnProperty.call(t,"storageProvider"),i=t&&t.loggerProvider,!(!e||t.storageProvider))return[3,9];v.label=1;case 1:v.trys.push([1,7,8,9]),r=ue([t==null?void 0:t.storageProvider,new Dt({loggerProvider:i})]),n=r.next(),v.label=2;case 2:return n.done?[3,6]:(o=n.value,a=o,a?[4,o.isEnabled()]:[3,4]);case 3:a=v.sent(),v.label=4;case 4:if(a)return[2,o];v.label=5;case 5:return n=r.next(),[3,2];case 6:return[3,9];case 7:return c=v.sent(),f={error:c},[3,9];case 8:try{n&&!n.done&&(d=r.return)&&d.call(r)}finally{if(f)throw f.error}return[7];case 9:return[2,void 0]}})})},Mt=function(t){return t===Le.XHR?new Zi:t===Le.SendBeacon?new Ji:Se().transportProvider},rr=function(t){return w(void 0,void 0,void 0,function(){var e,i,r,n,o,o,a,c,f,d;return _(this,function(v){switch(v.label){case 0:return[4,new Ze().isEnabled()];case 1:if(!v.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,i=e.split("."),r=[],n="AMP_TLDTEST",o=i.length-2;o>=0;--o)r.push(i.slice(o).join("."));o=0,v.label=2;case 2:return o<r.length?(a=r[o],c={domain:"."+a},f=new Ze(c),[4,f.set(n,1)]):[3,7];case 3:return v.sent(),[4,f.get(n)];case 4:return d=v.sent(),d?[4,f.remove(n)]:[3,6];case 5:return v.sent(),[2,"."+a];case 6:return o++,[3,2];case 7:return[2,""]}})})},G="[Amplitude]",qt="".concat(G," Page Viewed"),St="".concat(G," Form Started"),nr="".concat(G," Form Submitted"),or="".concat(G," File Downloaded"),Tt="session_start",kt="session_end",ar="".concat(G," File Extension"),sr="".concat(G," File Name"),ur="".concat(G," Link ID"),cr="".concat(G," Link Text"),lr="".concat(G," Link URL"),je="".concat(G," Form ID"),ze="".concat(G," Form Name"),Ge="".concat(G," Form Destination"),dr=function(t,e){return w(void 0,void 0,void 0,function(){var i,r,n,o,a,c,f,d,v,g,s;return _(this,function(p){switch(p.label){case 0:return[4,Lt(e)];case 1:return i=p.sent(),r=Di(t),[4,i.getRaw(r)];case 2:return n=p.sent(),n?((s=e.cookieUpgrade)!==null&&s!==void 0?s:Se().cookieUpgrade)?[4,i.remove(r)]:[3,4]:[2,{optOut:!1}];case 3:p.sent(),p.label=4;case 4:return o=F(n.split("."),6),a=o[0],c=o[1],f=o[2],d=o[3],v=o[4],g=o[5],[2,{deviceId:a,userId:fr(c),sessionId:Ke(d),lastEventId:Ke(g),lastEventTime:Ke(v),optOut:!!f}]}})})},Ke=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},fr=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}},Je={exports:{}};(function(t,e){(function(i,r){var n="0.7.33",o="",a="?",c="function",f="undefined",d="object",v="string",g="major",s="model",p="name",u="type",l="vendor",h="version",m="architecture",I="console",y="mobile",b="tablet",P="smarttv",S="wearable",x="embedded",C=350,L="Amazon",j="Apple",$="ASUS",R="BlackBerry",H="Browser",ee="Chrome",Te="Edge",ne="Firefox",oe="Google",me="Huawei",ce="LG",le="Microsoft",de="Motorola",te="Opera",ae="Samsung",se="Sharp",fe="Sony",U="Xiaomi",ve="Zebra",it="Facebook",Vt=function(T,A){var k={};for(var N in T)A[N]&&A[N].length%2===0?k[N]=A[N].concat(T[N]):k[N]=T[N];return k},ke=function(T){for(var A={},k=0;k<T.length;k++)A[T[k].toUpperCase()]=T[k];return A},rt=function(T,A){return typeof T===v?ye(A).indexOf(ye(T))!==-1:!1},ye=function(T){return T.toLowerCase()},Ft=function(T){return typeof T===v?T.replace(/[^\d\.]/g,o).split(".")[0]:r},Fe=function(T,A){if(typeof T===v)return T=T.replace(/^\s\s*/,o),typeof A===f?T:T.substring(0,C)},be=function(T,A){for(var k=0,N,O,Pe,D,we,Z;k<A.length&&!we;){var at=A[k],st=A[k+1];for(N=O=0;N<at.length&&!we;)if(we=at[N++].exec(T),we)for(Pe=0;Pe<st.length;Pe++)Z=we[++O],D=st[Pe],typeof D===d&&D.length>0?D.length===2?typeof D[1]==c?this[D[0]]=D[1].call(this,Z):this[D[0]]=D[1]:D.length===3?typeof D[1]===c&&!(D[1].exec&&D[1].test)?this[D[0]]=Z?D[1].call(this,Z,D[2]):r:this[D[0]]=Z?Z.replace(D[1],D[2]):r:D.length===4&&(this[D[0]]=Z?D[3].call(this,Z.replace(D[1],D[2])):r):this[D]=Z||r;k+=2}},Be=function(T,A){for(var k in A)if(typeof A[k]===d&&A[k].length>0){for(var N=0;N<A[k].length;N++)if(rt(A[k][N],T))return k===a?r:k}else if(rt(A[k],T))return k===a?r:k;return T},Bt={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},nt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ot={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,h],[/opios[\/ ]+([\w\.]+)/i],[h,[p,te+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[p,te]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[p,"UC"+H]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+H],h],[/\bfocus\/([\w\.]+)/i],[h,[p,ne+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[p,te+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[p,te+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[p,"MIUI "+H]],[/fxios\/([-\w\.]+)/i],[h,[p,ne]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+H]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+H],h],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,it],h],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[p,ee+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,ee+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[p,"Android "+H]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[h,Be,Bt]],[/(webkit|khtml)\/([\w\.]+)/i],[p,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[p,ne+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,h],[/(cobalt)\/([\w\.]+)/i],[p,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,ye]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,o,ye]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,ye]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[l,ae],[u,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[l,ae],[u,y]],[/((ipod|iphone)\d+,\d+)/i],[s,[l,j],[u,y]],[/(ipad\d+,\d+)/i],[s,[l,j],[u,b]],[/\((ip(?:hone|od)[\w ]*);/i],[s,[l,j],[u,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[l,j],[u,b]],[/(macintosh);/i],[s,[l,j]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[l,me],[u,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[l,me],[u,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[l,U],[u,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[l,U],[u,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[l,"OPPO"],[u,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[l,"Vivo"],[u,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[s,[l,"Realme"],[u,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[l,de],[u,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[l,de],[u,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[l,ce],[u,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[l,ce],[u,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[l,"Lenovo"],[u,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[l,"Nokia"],[u,y]],[/(pixel c)\b/i],[s,[l,oe],[u,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[l,oe],[u,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[l,fe],[u,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[l,fe],[u,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[l,"OnePlus"],[u,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[l,L],[u,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[l,L],[u,y]],[/(playbook);[-\w\),; ]+(rim)/i],[s,l,[u,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[l,R],[u,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[l,$],[u,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[l,$],[u,y]],[/(nexus 9)/i],[s,[l,"HTC"],[u,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[s,/_/g," "],[u,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[l,"Acer"],[u,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[l,"Meizu"],[u,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[l,se],[u,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,s,[u,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,s,[u,b]],[/(surface duo)/i],[s,[l,le],[u,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[l,"Fairphone"],[u,y]],[/(u304aa)/i],[s,[l,"AT&T"],[u,y]],[/\bsie-(\w*)/i],[s,[l,"Siemens"],[u,y]],[/\b(rct\w+) b/i],[s,[l,"RCA"],[u,b]],[/\b(venue[\d ]{2,7}) b/i],[s,[l,"Dell"],[u,b]],[/\b(q(?:mv|ta)\w+) b/i],[s,[l,"Verizon"],[u,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[l,"Barnes & Noble"],[u,b]],[/\b(tm\d{3}\w+) b/i],[s,[l,"NuVision"],[u,b]],[/\b(k88) b/i],[s,[l,"ZTE"],[u,b]],[/\b(nx\d{3}j) b/i],[s,[l,"ZTE"],[u,y]],[/\b(gen\d{3}) b.+49h/i],[s,[l,"Swiss"],[u,y]],[/\b(zur\d{3}) b/i],[s,[l,"Swiss"],[u,b]],[/\b((zeki)?tb.*\b) b/i],[s,[l,"Zeki"],[u,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],s,[u,b]],[/\b(ns-?\w{0,9}) b/i],[s,[l,"Insignia"],[u,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[l,"NextBook"],[u,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],s,[u,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],s,[u,y]],[/\b(ph-1) /i],[s,[l,"Essential"],[u,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[l,"Envizen"],[u,b]],[/\b(trio[-\w\. ]+) b/i],[s,[l,"MachSpeed"],[u,b]],[/\btu_(1491) b/i],[s,[l,"Rotor"],[u,b]],[/(shield[\w ]+) b/i],[s,[l,"Nvidia"],[u,b]],[/(sprint) (\w+)/i],[l,s,[u,y]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[l,le],[u,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[l,ve],[u,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[l,ve],[u,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,s,[u,I]],[/droid.+; (shield) bui/i],[s,[l,"Nvidia"],[u,I]],[/(playstation [345portablevi]+)/i],[s,[l,fe],[u,I]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[l,le],[u,I]],[/smart-tv.+(samsung)/i],[l,[u,P]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[l,ae],[u,P]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,ce],[u,P]],[/(apple) ?tv/i],[l,[s,j+" TV"],[u,P]],[/crkey/i],[[s,ee+"cast"],[l,oe],[u,P]],[/droid.+aft(\w)( bui|\))/i],[s,[l,L],[u,P]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[l,se],[u,P]],[/(bravia[\w ]+)( bui|\))/i],[s,[l,fe],[u,P]],[/(mitv-\w{5}) bui/i],[s,[l,U],[u,P]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[l,Fe],[s,Fe],[u,P]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,P]],[/((pebble))app/i],[l,s,[u,S]],[/droid.+; (glass) \d/i],[s,[l,oe],[u,S]],[/droid.+; (wt63?0{2,3})\)/i],[s,[l,ve],[u,S]],[/(quest( 2)?)/i],[s,[l,it],[u,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[u,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[s,[u,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[u,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,y]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[p,Te+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[h,Be,nt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[h,Be,nt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,h],[/\(bb(10);/i],[h,[p,R]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[p,ne+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[h,[p,ee+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],h],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,h],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,h]]},W=function(T,A){if(typeof T===d&&(A=T,T=r),!(this instanceof W))return new W(T,A).getResult();var k=T||(typeof i!==f&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o),N=A?Vt(ot,A):ot;return this.getBrowser=function(){var O={};return O[p]=r,O[h]=r,be.call(O,k,N.browser),O.major=Ft(O.version),O},this.getCPU=function(){var O={};return O[m]=r,be.call(O,k,N.cpu),O},this.getDevice=function(){var O={};return O[l]=r,O[s]=r,O[u]=r,be.call(O,k,N.device),O},this.getEngine=function(){var O={};return O[p]=r,O[h]=r,be.call(O,k,N.engine),O},this.getOS=function(){var O={};return O[p]=r,O[h]=r,be.call(O,k,N.os),O},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return k},this.setUA=function(O){return k=typeof O===v&&O.length>C?Fe(O,C):O,this},this.setUA(k),this};W.VERSION=n,W.BROWSER=ke([p,h,g]),W.CPU=ke([m]),W.DEVICE=ke([s,l,u,I,y,P,b,S,x]),W.ENGINE=W.OS=ke([p,h]),t.exports&&(e=t.exports=W),e.UAParser=W;var he=typeof i!==f&&(i.jQuery||i.Zepto);if(he&&!he.ua){var Oe=new W;he.ua=Oe.getResult(),he.ua.get=function(){return Oe.getUA()},he.ua.set=function(T){Oe.setUA(T);var A=Oe.getResult();for(var k in A)he.ua[k]=A[k]}}})(typeof window=="object"?window:jt)})(Je,Je.exports);var vr=Je.exports;const hr=zt(vr);var pr="Web",gr="$remote",mr=function(){function t(){this.name="context",this.type=K.BEFORE,this.library="amplitude-ts/".concat(Nt),typeof navigator<"u"&&(this.userAgent=navigator.userAgent),this.uaResult=new hr(this.userAgent).getResult()}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var i,r;return w(this,void 0,void 0,function(){var n,o,a,c,f,d,v,g;return _(this,function(s){return n=new Date().getTime(),o=this.uaResult.browser.name,a=this.uaResult.browser.version,c=this.uaResult.device.model||this.uaResult.os.name,f=this.uaResult.device.vendor,d=(i=this.config.lastEventId)!==null&&i!==void 0?i:-1,v=(r=e.event_id)!==null&&r!==void 0?r:d+1,this.config.lastEventId=v,e.time||(this.config.lastEventTime=n),g=E(E(E(E(E(E(E(E(E(E(E(E({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:n},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:pr}),this.config.trackingOptions.osName&&{os_name:o}),this.config.trackingOptions.osVersion&&{os_version:a}),this.config.trackingOptions.deviceManufacturer&&{device_manufacturer:f}),this.config.trackingOptions.deviceModel&&{device_model:c}),this.config.trackingOptions.language&&{language:Fi()}),this.config.trackingOptions.ipAddress&&{ip:gr}),{insert_id:Ve(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:v,library:this.library,user_agent:this.userAgent}),[2,g]})})},t}(),yr={page_domain:"".concat(G," Page Domain"),page_location:"".concat(G," Page Location"),page_path:"".concat(G," Page Path"),page_title:"".concat(G," Page Title"),page_url:"".concat(G," Page URL")},br=function(){var t="@amplitude/plugin-default-page-view-event-enrichment-browser",e=K.ENRICHMENT,i=function(){return w(void 0,void 0,void 0,function(){return _(this,function(n){return[2,void 0]})})},r=function(n){return w(void 0,void 0,void 0,function(){return _(this,function(o){return n.event_type===qt&&n.event_properties&&(n.event_properties=Object.entries(n.event_properties).reduce(function(a,c){var f=F(c,2),d=f[0],v=f[1],g=yr[d];return g?a[g]=v:a[d]=v,a},{})),[2,n]})})};return{name:t,type:e,setup:i,execute:r}},wr=function(){var t,e=[],i=function(d,v,g){d.addEventListener(v,g),e.push({element:d,type:v,handler:g})},r=function(){e.forEach(function(d){var v=d.element,g=d.type,s=d.handler;v==null||v.removeEventListener(g,s)}),e=[]},n="@amplitude/plugin-file-download-tracking-browser",o=K.ENRICHMENT,a=function(d,v){return w(void 0,void 0,void 0,function(){var g,s,p;return _(this,function(u){return v?typeof document>"u"?[2]:(g=function(l){var h;try{h=new URL(l.href,window.location.href)}catch{return}var m=s.exec(h.href),I=m==null?void 0:m[1];I&&i(l,"click",function(){var y;I&&v.track(or,(y={},y[ar]=I,y[sr]=h.pathname,y[ur]=l.id,y[cr]=l.text,y[lr]=l.href,y))})},s=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,p=Array.from(document.getElementsByTagName("a")),p.forEach(g),typeof MutationObserver<"u"&&(t=new MutationObserver(function(l){l.forEach(function(h){h.addedNodes.forEach(function(m){m.nodeName==="A"&&g(m),"querySelectorAll"in m&&typeof m.querySelectorAll=="function"&&Array.from(m.querySelectorAll("a")).map(g)})})}),t.observe(document.body,{subtree:!0,childList:!0})),[2]):(d.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked."),[2])})})},c=function(d){return w(void 0,void 0,void 0,function(){return _(this,function(v){return[2,d]})})},f=function(){return w(void 0,void 0,void 0,function(){return _(this,function(d){return t==null||t.disconnect(),r(),[2]})})};return{name:n,type:o,setup:a,execute:c,teardown:f}},_r=function(){var t,e=[],i=function(v,g,s){v.addEventListener(g,s),e.push({element:v,type:g,handler:s})},r=function(){e.forEach(function(v){var g=v.element,s=v.type,p=v.handler;g==null||g.removeEventListener(s,p)}),e=[]},n=function(v){var g=v.getAttribute("action");try{g=new URL(encodeURI(g??""),window.location.href).href}catch{}return g},o="@amplitude/plugin-form-interaction-tracking-browser",a=K.ENRICHMENT,c=function(v,g){return w(void 0,void 0,void 0,function(){var s,p;return _(this,function(u){return g?typeof document>"u"?[2]:(s=function(l){var h=!1;i(l,"change",function(){var m;if(!h){var I=n(l);g.track(St,(m={},m[je]=l.getAttribute("id"),m[ze]=l.getAttribute("name"),m[Ge]=I,m))}h=!0}),i(l,"submit",function(){var m,I,y=n(l);h||g.track(St,(m={},m[je]=l.getAttribute("id"),m[ze]=l.getAttribute("name"),m[Ge]=y,m)),g.track(nr,(I={},I[je]=l.getAttribute("id"),I[ze]=l.getAttribute("name"),I[Ge]=y,I)),h=!1})},p=Array.from(document.getElementsByTagName("form")),p.forEach(s),typeof MutationObserver<"u"&&(t=new MutationObserver(function(l){l.forEach(function(h){h.addedNodes.forEach(function(m){m.nodeName==="FORM"&&s(m),"querySelectorAll"in m&&typeof m.querySelectorAll=="function"&&Array.from(m.querySelectorAll("form")).map(s)})})}),t.observe(document.body,{subtree:!0,childList:!0})),[2]):(v.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked."),[2])})})},f=function(v){return w(void 0,void 0,void 0,function(){return _(this,function(g){return[2,v]})})},d=function(){return w(void 0,void 0,void 0,function(){return _(this,function(v){return t==null||t.disconnect(),r(),[2]})})};return{name:o,type:a,setup:c,execute:f,teardown:d}},He=function(t,e){for(var i=0;i<e.length;i++){var r=e[i],n=r.name,o=r.args,a=r.resolve,c=t&&t[n];if(typeof c=="function"){var f=c.apply(t,o);typeof a=="function"&&a(f==null?void 0:f.promise)}}return t},We=function(t){var e=t;return e&&e._q!==void 0},Er=function(t){Ie(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(i,r,n){return i===void 0&&(i=""),Q(this._init(E(E({},n),{userId:r,apiKey:i})))},e.prototype._init=function(i){var r,n,o,a,c,f,d,v,g,s,p,u,l,h,m,I,y,b,P,S;return w(this,void 0,void 0,function(){var x,C,L,j,$,R,H,ee,Te,ne,oe,me,ce,le,de,te,ae,se,fe=this;return _(this,function(U){switch(U.label){case 0:return this.initializing?[2]:(this.initializing=!0,x=i,i.disableCookies?(C="",[3,5]):[3,1]);case 1:return(r=i.domain)!==null&&r!==void 0?(L=r,[3,4]):[3,2];case 2:return[4,rr()];case 3:L=U.sent(),U.label=4;case 4:C=L,U.label=5;case 5:return x.domain=C,[4,dr(i.apiKey,i)];case 6:return j=U.sent(),[4,Lt(i)];case 7:return $=U.sent(),[4,$.get(Ut(i.apiKey))];case 8:return R=U.sent(),H=$e(),ee=(a=(o=(n=i.deviceId)!==null&&n!==void 0?n:H.deviceId)!==null&&o!==void 0?o:R==null?void 0:R.deviceId)!==null&&a!==void 0?a:j.deviceId,Te=(c=R==null?void 0:R.sessionId)!==null&&c!==void 0?c:j.sessionId,ne=(d=(f=i.optOut)!==null&&f!==void 0?f:R==null?void 0:R.optOut)!==null&&d!==void 0?d:j.optOut,oe=(v=R==null?void 0:R.lastEventId)!==null&&v!==void 0?v:j.lastEventId,me=(g=R==null?void 0:R.lastEventTime)!==null&&g!==void 0?g:j.lastEventTime,ce=(p=(s=i.userId)!==null&&s!==void 0?s:R==null?void 0:R.userId)!==null&&p!==void 0?p:j.userId,this.previousSessionDeviceId=(u=R==null?void 0:R.deviceId)!==null&&u!==void 0?u:j.deviceId,this.previousSessionUserId=(l=R==null?void 0:R.userId)!==null&&l!==void 0?l:j.userId,[4,er(i.apiKey,E(E({},i),{deviceId:ee,sessionId:Te,optOut:ne,lastEventId:oe,lastEventTime:me,userId:ce,cookieStorage:$}))];case 9:return le=U.sent(),[4,t.prototype._init.call(this,le)];case 10:return U.sent(),de=!1,(!this.config.lastEventTime||!this.config.sessionId||this.config.lastEventTime&&Date.now()-this.config.lastEventTime>this.config.sessionTimeout)&&(this.setSessionId((m=(h=i.sessionId)!==null&&h!==void 0?h:this.config.sessionId)!==null&&m!==void 0?m:Date.now()),de=!0),te=ge(i.instanceName),te.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),[4,this.add(new hi).promise];case 11:return U.sent(),[4,this.add(new mr).promise];case 12:return U.sent(),[4,this.add(new Bi).promise];case 13:return U.sent(),Ni(this.config.defaultTracking)?[4,this.add(wr()).promise]:[3,15];case 14:U.sent(),U.label=15;case 15:return Li(this.config.defaultTracking)?[4,this.add(_r()).promise]:[3,17];case 16:U.sent(),U.label=17;case 17:return!((I=this.config.attribution)===null||I===void 0)&&I.disabled?[3,19]:(ae=$i({excludeReferrers:(y=this.config.attribution)===null||y===void 0?void 0:y.excludeReferrers,initialEmptyValue:(b=this.config.attribution)===null||b===void 0?void 0:b.initialEmptyValue,resetSessionOnNewCampaign:(P=this.config.attribution)===null||P===void 0?void 0:P.resetSessionOnNewCampaign}),ae.__pluginEnabledOverride=de||!((S=this.config.attribution)===null||S===void 0)&&S.trackNewCampaigns?void 0:!1,[4,this.add(ae).promise]);case 18:U.sent(),U.label=19;case 19:return se=Vi(this.config),se.eventType=se.eventType||qt,[4,this.add(Gi(se)).promise];case 20:return U.sent(),[4,this.add(br()).promise];case 21:return U.sent(),this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 22:return U.sent(),te.eventBridge.setEventReceiver(function(ve){fe.track(ve.eventType,ve.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var i;return(i=this.config)===null||i===void 0?void 0:i.userId},e.prototype.setUserId=function(i){if(!this.config){this.q.push(this.setUserId.bind(this,i));return}(i!==this.config.userId||i===void 0)&&(this.config.userId=i,Ti(i,this.config.instanceName))},e.prototype.getDeviceId=function(){var i;return(i=this.config)===null||i===void 0?void 0:i.deviceId},e.prototype.setDeviceId=function(i){if(!this.config){this.q.push(this.setDeviceId.bind(this,i));return}this.config.deviceId=i,ki(i,this.config.instanceName)},e.prototype.setOptOut=function(i){Oi(i,this.config.instanceName),t.prototype.setOptOut.call(this,i)},e.prototype.reset=function(){this.setDeviceId(Ve()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var i;return(i=this.config)===null||i===void 0?void 0:i.sessionId},e.prototype.setSessionId=function(i){var r;if(!this.config){this.q.push(this.setSessionId.bind(this,i));return}if(i!==this.config.sessionId){var n=this.getSessionId(),o=this.config.lastEventTime,a=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1;this.config.sessionId=i,this.config.lastEventTime=void 0,qi(this.config.defaultTracking)&&(n&&o&&this.track(kt,void 0,{device_id:this.previousSessionDeviceId,event_id:++a,session_id:n,time:o+1,user_id:this.previousSessionUserId}),this.config.lastEventTime=this.config.sessionId,this.track(Tt,void 0,{event_id:++a,session_id:this.config.sessionId,time:this.config.lastEventTime})),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId}},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(i){if(!this.config){this.q.push(this.setTransport.bind(this,i));return}this.config.transportProvider=Mt(i)},e.prototype.identify=function(i,r){if(We(i)){var n=i._q;i._q=[],i=He(new Me,n)}return r!=null&&r.user_id&&this.setUserId(r.user_id),r!=null&&r.device_id&&this.setDeviceId(r.device_id),t.prototype.identify.call(this,i,r)},e.prototype.groupIdentify=function(i,r,n,o){if(We(n)){var a=n._q;n._q=[],n=He(new Me,a)}return t.prototype.groupIdentify.call(this,i,r,n,o)},e.prototype.revenue=function(i,r){if(We(i)){var n=i._q;i._q=[],i=He(new ui,n)}return t.prototype.revenue.call(this,i,r)},e.prototype.process=function(i){return w(this,void 0,void 0,function(){var r,n,o;return _(this,function(a){return r=Date.now(),n=this.config.lastEventTime||Date.now(),o=r-n,i.event_type!==Tt&&i.event_type!==kt&&(!i.session_id||i.session_id===this.getSessionId())&&o>this.config.sessionTimeout&&this.setSessionId(r),[2,t.prototype.process.call(this,i)]})})},e}(si),Ir=function(){var t=new Er;return{init:V(t.init.bind(t),"init",M(t),q(t,["config"])),add:V(t.add.bind(t),"add",M(t),q(t,["config.apiKey","timeline.plugins"])),remove:V(t.remove.bind(t),"remove",M(t),q(t,["config.apiKey","timeline.plugins"])),track:V(t.track.bind(t),"track",M(t),q(t,["config.apiKey","timeline.queue.length"])),logEvent:V(t.logEvent.bind(t),"logEvent",M(t),q(t,["config.apiKey","timeline.queue.length"])),identify:V(t.identify.bind(t),"identify",M(t),q(t,["config.apiKey","timeline.queue.length"])),groupIdentify:V(t.groupIdentify.bind(t),"groupIdentify",M(t),q(t,["config.apiKey","timeline.queue.length"])),setGroup:V(t.setGroup.bind(t),"setGroup",M(t),q(t,["config.apiKey","timeline.queue.length"])),revenue:V(t.revenue.bind(t),"revenue",M(t),q(t,["config.apiKey","timeline.queue.length"])),flush:V(t.flush.bind(t),"flush",M(t),q(t,["config.apiKey","timeline.queue.length"])),getUserId:V(t.getUserId.bind(t),"getUserId",M(t),q(t,["config","config.userId"])),setUserId:V(t.setUserId.bind(t),"setUserId",M(t),q(t,["config","config.userId"])),getDeviceId:V(t.getDeviceId.bind(t),"getDeviceId",M(t),q(t,["config","config.deviceId"])),setDeviceId:V(t.setDeviceId.bind(t),"setDeviceId",M(t),q(t,["config","config.deviceId"])),reset:V(t.reset.bind(t),"reset",M(t),q(t,["config","config.userId","config.deviceId"])),getSessionId:V(t.getSessionId.bind(t),"getSessionId",M(t),q(t,["config"])),setSessionId:V(t.setSessionId.bind(t),"setSessionId",M(t),q(t,["config"])),extendSession:V(t.extendSession.bind(t),"extendSession",M(t),q(t,["config"])),setOptOut:V(t.setOptOut.bind(t),"setOptOut",M(t),q(t,["config"])),setTransport:V(t.setTransport.bind(t),"setTransport",M(t),q(t,["config"]))}};const Sr=Ir();var Tr=Sr.track;let kr=!1;function Pr(){}function Rr(t,e){try{if(!kr)return;Tr(t,e||{}),console.info("Amplitude track:",t,e||{})}catch(i){console.debug("Amplitude track failed",i)}}export{Pr as initAmplitude,Rr as trackAmplitude};
//# sourceMappingURL=amplitude-BkyHndzM.js.map
